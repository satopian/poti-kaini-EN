!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2,r=t.register;r("2m2jt",function(e,r){"use strict";var n=t("eC9e0").Buffer,i=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.exports&&e.exports.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.writePsdBuffer=e.exports.writePsdUint8Array=e.exports.writePsd=e.exports.readPsd=e.exports.byteArrayToBase64=e.exports.initializeCanvas=void 0;var o=t("kCSTH"),s=t("5OPaf"),l=t("jWkTT");a(t("TW1B9"),e.exports),a(t("3vNLh"),e.exports);var d=t("jE67M");function c(e,t){var r=(0,o.createWriter)();return(0,o.writePsd)(r,e,t),(0,o.getWriterBufferNoCopy)(r)}Object.defineProperty(e.exports,"initializeCanvas",{enumerable:!0,get:function(){return d.initializeCanvas}}),a(t("cKsyM"),e.exports),e.exports.byteArrayToBase64=l.fromByteArray,e.exports.readPsd=function(e,t){var r="buffer"in e?(0,s.createReader)(e.buffer,e.byteOffset,e.byteLength):(0,s.createReader)(e);return(0,s.readPsd)(r,t)},e.exports.writePsd=function(e,t){var r=(0,o.createWriter)();return(0,o.writePsd)(r,e,t),(0,o.getWriterBuffer)(r)},e.exports.writePsdUint8Array=c,e.exports.writePsdBuffer=function(e,t){if(void 0===n)throw Error("Buffer not supported on this platform");return n.from(c(e,t))}}),r("eC9e0",function(r,n){"use strict";e(r.exports,"Buffer",function(){return i},function(e){return i=e}),e(r.exports,"INSPECT_MAX_BYTES",function(){return a},function(e){return a=e});var i,a,o=t("fFwUa"),s=t("cx0mh"),l=t("7h4XF"),d=t("9xmuV"),c=t("jWkTT"),u=t("4Ooth"),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function p(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return v(e)}return g(e,t,r)}function g(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!h.isEncoding(i))throw TypeError("Unknown encoding: "+i);var a=0|x(n,i),o=p(a),s=o.write(n,i);return s!==a&&(o=o.slice(0,s)),o}if(ArrayBuffer.isView(e)){var l=e;if(W(l,Uint8Array)){var d=new Uint8Array(l);return w(d.buffer,d.byteOffset,d.byteLength)}return y(l)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return w(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return h.from(c,t,r);var u=function(e){if(h.isBuffer(e)){var t=0|b(e.length),r=p(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?p(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function m(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function v(e){return m(e),p(e<0?0:0|b(e))}function y(e){for(var t=e.length<0?0:0|b(e.length),r=p(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function w(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),h.prototype),n}function b(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}i=h,a=50,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,r){return g(e,t,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,r){return(m(e),e<=0)?p(e):void 0!==t?"string"==typeof r?p(e).fill(t,r):p(e).fill(t):p(e)},h.allocUnsafe=function(e){return v(e)},h.allocUnsafeSlow=function(e){return v(e)};function x(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return n?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function S(e,t,r){var n,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=H[e[a]];return i}(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return n=this,i=t,a=r,0===i&&a===n.length?c.fromByteArray(n):c.fromByteArray(n.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function k(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function I(e,t,r,n,i){var a;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return _(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){var a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,r/=2}function d(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=r;a<s;a++)if(d(e,a)===d(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else -1!==c&&(a-=a-c),c=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var u=!0,f=0;f<l;f++)if(d(e,a+f)!==d(t,f)){u=!1;break}if(u)return a}return -1}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var l=void 0,d=void 0,c=void 0,u=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:(192&(l=e[i+1]))==128&&(u=(31&a)<<6|63&l)>127&&(o=u);break;case 3:l=e[i+1],d=e[i+2],(192&l)==128&&(192&d)==128&&(u=(15&a)<<12|(63&l)<<6|63&d)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:l=e[i+1],d=e[i+2],c=e[i+3],(192&l)==128&&(192&d)==128&&(192&c)==128&&(u=(15&a)<<18|(63&l)<<12|(63&d)<<6|63&c)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}var f=n,p=f.length;if(p<=4096)return String.fromCharCode.apply(String,f);for(var h="",g=0;g<p;)h+=String.fromCharCode.apply(String,f.slice(g,g+=4096));return h}function F(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,a){if(!h.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function U(e,t,r,n,i){L(t,n,i,e,r,7);var a=Number(t&BigInt(0xffffffff));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;var o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function A(e,t,r,n,i){L(t,n,i,e,r,7);var a=Number(t&BigInt(0xffffffff));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;var o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function E(e,t,r,n,i,a){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function P(e,t,r,n,i){return t*=1,r>>>=0,i||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),u.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return t*=1,r>>>=0,i||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),u.write(e,t,r,n,52,8),r+8}h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(W(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=h.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(W(a,Uint8Array))i+a.length>n.length?(h.isBuffer(a)||(a=h.from(a)),a.copy(n,i)):Uint8Array.prototype.set.call(n,a,i);else if(h.isBuffer(a))a.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=a.length}return n},h.byteLength=x,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?C(this,0,e):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=a;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(e,t,r,n,i){if(W(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,o=r-t,s=Math.min(a,o),l=this.slice(n,i),d=e.slice(t,r),c=0;c<s;++c)if(l[c]!==d[c]){a=l[c],o=d[c];break}return a<o?-1:+(o<a)},h.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return I(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return I(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,l,d,c,u,f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var p=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i,a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var s,l=parseInt(t.substr(2*i,2),16);if((s=l)!=s)break;e[r+i]=l}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,a=r,j(N(e,this.length-i),this,i,a);case"ascii":case"latin1":case"binary":return o=t,s=r,j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,s);case"base64":return l=t,d=r,j(G(e),this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,u=r,j(function(e,t){for(var r,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,u);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=X(function(e){R(e>>>=0,"offset");var t=this[e],r=this[e+7];(void 0===t||void 0===r)&&z(e,this.length-8);var n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),h.prototype.readBigUInt64BE=X(function(e){R(e>>>=0,"offset");var t=this[e],r=this[e+7];(void 0===t||void 0===r)&&z(e,this.length-8);var n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},h.prototype.readInt8=function(e,t){return(e>>>=0,t||F(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},h.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=X(function(e){R(e>>>=0,"offset");var t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&z(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),h.prototype.readBigInt64BE=X(function(e){R(e>>>=0,"offset");var t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&z(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),u.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),u.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),u.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),u.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=X(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=X(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=X(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=X(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=h.isBuffer(e)?e:h.from(e,n),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};var B={};function O(e,t,r){B[e]=function(r){function n(){var r;return(0,s._)(this,n),Object.defineProperty(r=(0,o._)(this,n),"message",{value:t.apply(r,arguments),writable:!0,configurable:!0}),r.name=`${r.name} [${e}]`,r.stack,delete r.name,r}return(0,d._)(n,r),(0,l._)(n,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${e}]: ${this.message}`}}]),n}(r)}function T(e){for(var t="",r=e.length,n=+("-"===e[0]);r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function L(e,t,r,n,i,a){if(e>r||e<t){var o,s="bigint"==typeof t?"n":"";throw o=a>3?0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:`>= ${t}${s} and <= ${r}${s}`,new B.ERR_OUT_OF_RANGE("value",o,e)}R(i,"offset"),(void 0===n[i]||void 0===n[i+a])&&z(i,n.length-(a+1))}function R(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw R(e,r),new B.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),O("ERR_OUT_OF_RANGE",function(e,t,r){var n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=T(String(r)):"bigint"==typeof r&&(i=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(i=T(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);var V=/[^+/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function G(e){return c.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){var i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var H=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}();function X(e){return"undefined"==typeof BigInt?K:e}function K(){throw Error("BigInt not supported")}}),r("fFwUa",function(r,n){e(r.exports,"_",function(){return s});var i=t("2JCCy"),a=t("ff8rK"),o=t("5IlRA");function s(e,t,r){return t=(0,i._)(t),(0,o._)(e,(0,a._)()?Reflect.construct(t,r||[],(0,i._)(e).constructor):t.apply(e,r))}}),r("2JCCy",function(t,r){e(t.exports,"_",function(){return n});function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}}),r("ff8rK",function(t,r){e(t.exports,"_",function(){return n});function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n=function(){return!!e})()}}),r("5IlRA",function(r,n){e(r.exports,"_",function(){return o});var i=t("d6zUP"),a=t("8KHnw");function o(e,t){return t&&("object"===(0,a._)(t)||"function"==typeof t)?t:(0,i._)(e)}}),r("d6zUP",function(t,r){e(t.exports,"_",function(){return n});function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}}),r("8KHnw",function(t,r){e(t.exports,"_",function(){return n});function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}}),r("9xmuV",function(r,n){e(r.exports,"_",function(){return a});var i=t("5oklS");function a(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,i._)(e,t)}}),r("5oklS",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}}),r("jWkTT",function(t,r){"use strict";e(t.exports,"toByteArray",function(){return n},function(e){return n=e}),e(t.exports,"fromByteArray",function(){return i},function(e){return i=e});for(var n=function(e){var t,r,n=u(e),i=n[0],a=n[1],l=new s((i+a)*3/4-a),d=0,c=a>0?i-4:i;for(r=0;r<c;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,l[d++]=255&t),1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},i=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a[n>>18&63]+a[n>>12&63]+a[n>>6&63]+a[63&n]);return i.join("")}(e,o,o+16383>s?s:o+16383));return 1===n?i.push(a[(t=e[r-1])>>2]+a[t<<4&63]+"=="):2===n&&i.push(a[(t=(e[r-2]<<8)+e[r-1])>>10]+a[t>>4&63]+a[t<<2&63]+"="),i.join("")},a=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,c=l.length;d<c;++d)a[d]=l[d],o[l.charCodeAt(d)]=d;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}o[45]=62,o[95]=63}),r("4Ooth",function(t,r){var n,i;e(t.exports,"read",function(){return n},function(e){return n=e}),e(t.exports,"write",function(){return i},function(e){return i=e}),n=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,d=l>>1,c=-7,u=r?i-1:0,f=r?-1:1,p=e[t+u];for(u+=f,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+u],u+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+u],u+=f,c-=8);if(0===a)a=1-d;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=d}return(p?-1:1)*o*Math.pow(2,a-n)},i=function(e,t,r,n,i,a){var o,s,l,d=8*a-i-1,c=(1<<d)-1,u=c>>1,f=5960464477539062e-23*(23===i),p=n?0:a-1,h=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?t+=f/l:t+=f*Math.pow(2,1-u),t*l>=2&&(o++,l/=2),o+u>=c?(s=0,o=c):o+u>=1?(s=(t*l-1)*Math.pow(2,i),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(o=o<<i|s,d+=i;d>0;e[r+p]=255&o,p+=h,o/=256,d-=8);e[r+p-h]|=128*g}}),r("kCSTH",function(e,r){"use strict";var n=e.exports&&e.exports.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.writeColor=e.exports.writePsd=e.exports.writeSection=e.exports.writeUnicodeStringWithPadding=e.exports.writeUnicodeString=e.exports.writeUnicodeStringWithoutLengthLE=e.exports.writeUnicodeStringWithoutLength=e.exports.writePascalString=e.exports.writeSignature=e.exports.writeZeros=e.exports.writeBytes=e.exports.writeFixedPointPath32=e.exports.writeFixedPoint32=e.exports.writeFloat64=e.exports.writeFloat32=e.exports.writeUint32=e.exports.writeInt32LE=e.exports.writeInt32=e.exports.writeUint16LE=e.exports.writeUint16=e.exports.writeInt16=e.exports.writeUint8=e.exports.getWriterBufferNoCopy=e.exports.getWriterBuffer=e.exports.createWriter=void 0;var i=t("jE67M"),a=t("cAUqy"),o=t("aqyg9");function s(e,t){var r=k(e,1);e.view.setUint8(r,t)}function l(e,t){var r=k(e,2);e.view.setInt16(r,t,!1)}function d(e,t){var r=k(e,2);e.view.setUint16(r,t,!1)}function c(e,t){var r=k(e,2);e.view.setUint16(r,t,!0)}function u(e,t){var r=k(e,4);e.view.setInt32(r,t,!1)}function f(e,t){var r=k(e,4);e.view.setUint32(r,t,!1)}function p(e,t){var r=k(e,8);e.view.setFloat64(r,t,!1)}function h(e,t){t&&(S(e,e.offset+t.length),new Uint8Array(e.buffer).set(t,e.offset),e.offset+=t.length)}function g(e,t){for(var r=0;r<t;r++)s(e,0)}function m(e,t){if(4!==t.length)throw Error("Invalid signature: '".concat(t,"'"));for(var r=0;r<4;r++)s(e,t.charCodeAt(r))}function v(e,t,r){var n=t.length;if(n>255)throw Error("String too long");s(e,n);for(var i=0;i<n;i++){var a=t.charCodeAt(i);s(e,a<128?a:63)}for(;++n%r;)s(e,0)}function y(e,t){for(var r=0;r<t.length;r++)d(e,t.charCodeAt(r))}function w(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),i&&f(e,0);var a=e.offset;f(e,0),r();for(var o=e.offset-a-4,l=o;l%t;)s(e,0),l++;n&&(o=l),e.view.setUint32(a,o,!1)}function b(e,t){s(e,t[0]),s(e,t[1]),s(e,t[2]),s(e,t[3])}function x(e,t,r,n){for(var o=function(a){var o=a.key;if("Txt2"===o&&n.invalidateTextLayers)return"continue";if("vmsk"===o&&n.psb&&(o="vsms"),a.has(t)){var s=n.psb&&-1!==i.largeAdditionalInfoKeys.indexOf(o),l="Txt2"!==o&&"cinf"!==o&&"extn"!==o&&"CAI "!==o&&"OCIO"!==o,d="Txt2"===o||"luni"===o||"vmsk"===o||"artb"===o||"artd"===o||"vogk"===o||"SoLd"===o||"lnk2"===o||"vscg"===o||"vsms"===o||"GdFl"===o||"lmfx"===o||"lrFX"===o||"cinf"===o||"PlLd"===o||"Anno"===o||"CAI "===o||"OCIO"===o||"GenI"===o||"FEid"===o;m(e,s?"8B64":"8BIM"),m(e,o),w(e,d?4:2,function(){a.write(e,t,r,n)},l,s)}},s=0,l=a.infoHandlers;s<l.length;s++)o(l[s])}function S(e,t){t>e.buffer.byteLength&&function(e,t){var r=e.buffer.byteLength;do r*=2;while(t>r)var n=new ArrayBuffer(r),i=new Uint8Array(n),a=new Uint8Array(e.buffer);i.set(a),e.buffer=n,e.view=new DataView(e.buffer)}(e,t)}function k(e,t){var r=e.offset;return S(e,e.offset+=t),r}function I(e,t,r,n,a,o){var s=0|n.top,l=0|n.left,d=0|n.right,c=0|n.bottom,u=_(n),f=u.width,p=u.height,h=n.imageData;if(!h&&n.canvas&&f&&p&&(h=n.canvas.getContext("2d").getImageData(0,0,f,p)),f&&p&&h){if(d=l+f,c=s+p,h.width!==f||h.height!==p)throw Error("Invalid imageData dimentions");var g=void 0,m=void 0;i.RAW_IMAGE_DATA&&r[o?"realMaskDataRaw":"maskDataRaw"]?(g=r[o?"realMaskDataRaw":"maskDataRaw"],m=r[o?"realMaskDataRawCompression":"maskDataRawCompression"]):a.compress?(g=(0,i.writeDataZipWithoutPrediction)(h,[0]),m=2):(g=(0,i.writeDataRLE)(e,h,[0],!!a.psb),m=1),t.channels.push({channelId:o?-3:-2,compression:m,buffer:g,length:2+g.length})}t[o?"realMask":"mask"]={top:s,left:l,right:d,bottom:c}}function _(e){var t,r,n,i,a=e.canvas,o=e.imageData;return{width:null!=(r=null!=(t=null==o?void 0:o.width)?t:null==a?void 0:a.width)?r:0,height:null!=(i=null!=(n=null==o?void 0:o.height)?n:null==a?void 0:a.height)?i:0}}function C(e,t,r,n){for(var i=e.data,a=(t*e.width+r)*4+3|0,o=a+(n-r)*4|0,s=a;s<o;s=s+4|0)if(0!==i[s])return!1;return!0}function F(e,t,r,n){for(var i=e.data,a=4*e.width|0,o=r*a+4*t+3|0,s=r,l=o;s<n;s++,l=l+a|0)if(0!==i[l])return!1;return!0}e.exports.createWriter=function(e){void 0===e&&(e=4096);var t=new ArrayBuffer(e),r=new DataView(t);return{buffer:t,view:r,offset:0,tempBuffer:void 0}},e.exports.getWriterBuffer=function(e){return e.buffer.slice(0,e.offset)},e.exports.getWriterBufferNoCopy=function(e){return new Uint8Array(e.buffer,0,e.offset)},e.exports.writeUint8=s,e.exports.writeInt16=l,e.exports.writeUint16=d,e.exports.writeUint16LE=c,e.exports.writeInt32=u,e.exports.writeInt32LE=function(e,t){var r=k(e,4);e.view.setInt32(r,t,!0)},e.exports.writeUint32=f,e.exports.writeFloat32=function(e,t){var r=k(e,4);e.view.setFloat32(r,t,!1)},e.exports.writeFloat64=p,e.exports.writeFixedPoint32=function(e,t){u(e,65536*t)},e.exports.writeFixedPointPath32=function(e,t){u(e,0x1000000*t)},e.exports.writeBytes=h,e.exports.writeZeros=g,e.exports.writeSignature=m,e.exports.writePascalString=v,e.exports.writeUnicodeStringWithoutLength=y,e.exports.writeUnicodeStringWithoutLengthLE=function(e,t){for(var r=0;r<t.length;r++)c(e,t.charCodeAt(r))},e.exports.writeUnicodeString=function(e,t){f(e,t.length),y(e,t)},e.exports.writeUnicodeStringWithPadding=function(e,t){f(e,t.length+1);for(var r=0;r<t.length;r++)d(e,t.charCodeAt(r));d(e,0)},e.exports.writeSection=w,e.exports.writePsd=function(e,t,r){if(void 0===r&&(r={}),!(+t.width>0&&+t.height>0))throw Error("Invalid document size");if((t.width>3e4||t.height>3e4)&&!r.psb)throw Error("Document size is too large (max is 30000x30000, use PSB format instead)");var a,c,y,S,k,D=null!=(k=t.bitsPerChannel)?k:8;if(8!==D)throw Error("bitsPerChannel other than 8 are not supported for writing");!function e(t){null==(r=t.children)||r.forEach(e);var r,n=t.imageData;if(n&&(n.data instanceof Uint32Array||n.data instanceof Uint16Array))throw Error("imageData has incorrect bitDepth");if("mask"in t&&t.mask){var i=t.mask.imageData;if(i&&(i.data instanceof Uint32Array||i.data instanceof Uint16Array))throw Error("mask imageData has incorrect bitDepth")}}(t);var U=n({},t.imageResources),A=n(n({},r),{layerIds:new Set,layerToId:new Map});A.generateThumbnail&&(a=t,c=(0,i.createCanvas)(10,10),y=1,a.width>a.height?(c.width=160,c.height=Math.floor(a.height*(c.width/a.width)),y=c.width/a.width):(c.height=160,c.width=Math.floor(a.width*(c.height/a.height)),y=c.height/a.height),(S=c.getContext("2d")).scale(y,y),a.imageData?S.drawImage((0,i.imageDataToCanvas)(a.imageData),0,0):a.canvas&&S.drawImage(a.canvas,0,0),U.thumbnail=c);var E=t.imageData;if(!E&&t.canvas&&(E=t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height)),E&&(t.width!==E.width||t.height!==E.height))throw Error("Document canvas must have the same size as document");var P=!!E&&(0,i.hasAlpha)(E);e.tempBuffer=new Uint8Array(Math.max(function e(t){void 0===t&&(t=[]);for(var r=0,n=0,i=t;n<i.length;n++){var a=i[n];if(a.canvas||a.imageData){var o=_(a),s=o.width,l=o.height;r=Math.max(r,2*l+2*s*l)}a.children&&(r=Math.max(r,e(a.children)))}return r}(t.children),8*t.width*t.height+2*t.height)),m(e,"8BPS"),d(e,r.psb?2:1),g(e,6),d(e,P?4:3),f(e,t.height),f(e,t.width),d(e,D),d(e,3),w(e,1,function(){var r,n,i;if(t.palette){for(var a=0;a<256;a++)s(e,(null==(r=t.palette[a])?void 0:r.r)||0);for(var a=0;a<256;a++)s(e,(null==(n=t.palette[a])?void 0:n.g)||0);for(var a=0;a<256;a++)s(e,(null==(i=t.palette[a])?void 0:i.b)||0)}});var M=[];(function e(t,r){if(r)for(var a=0;a<r.length;a++){var o=r[a];if(o.children&&o.canvas)throw Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(o.children&&o.imageData)throw Error("Invalid layer, cannot have both 'imageData' and 'children' properties");o.children?(t.push({name:"</Layer group>",sectionDivider:{type:3}}),e(t,o.children),t.push(n(n({},o),{blendMode:"pass through"===o.blendMode?"normal":o.blendMode,sectionDivider:{type:!1===o.opened?2:1,key:i.fromBlendMode[o.blendMode]||"pass",subType:0}}))):t.push(n({},o))}})(M,t.children),M.length||M.push({}),U.layersGroup=M.map(function(e){return e.linkGroup||0}),U.layerGroupsEnabledId=M.map(function(e){return+(!1!=e.linkGroupEnabled)}),w(e,1,function(){for(var t=function(t){for(var r=t.has(U),n=!1===r?0:!0===r?1:r,i=function(r){m(e,"8BIM"),d(e,t.key),v(e,"",2),w(e,2,function(){return t.write(e,U,r)})},a=0;a<n;a++)i(a)},r=0,n=o.resourceHandlers;r<n.length;r++)t(n[r])}),w(e,2,function(){var r,n,a,o,c,y,S;r=e,n=M,a=t,o=P,w(r,4,function(){l(r,o?-n.length:n.length);for(var e,t=n.map(function(e,t){var n,a,o,s;return n=r.tempBuffer,s=function(e,t,r,n){var a,o=0|t.top,s=0|t.left,l=0|t.right,d=0|t.bottom,c=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],u=_(t),f=u.width,p=u.height;if(!(t.canvas||t.imageData)||!f||!p)return l=s,d=o,{layer:t,top:o,left:s,right:l,bottom:d,channels:c};l=s+f,d=o+p;var h=t.imageData||t.canvas.getContext("2d").getImageData(0,0,f,p);if(n.trimImageData){var g=function(e){for(var t=0,r=0,n=e.width,i=e.height;t<i&&C(e,t,r,n);)t++;for(;i>t&&C(e,i-1,r,n);)i--;for(;r<n&&F(e,r,t,i);)r++;for(;n>r&&F(e,n-1,t,i);)n--;return{top:t,left:r,right:n,bottom:i}}(h);if(0!==g.left||0!==g.top||g.right!==h.width||g.bottom!==h.height){if(s+=g.left,o+=g.top,l-=h.width-g.right,d-=h.height-g.bottom,f=l-s,p=d-o,!f||!p)return{layer:t,top:o,left:s,right:l,bottom:d,channels:c};h=function(e,t,r,n,a){if(e.data instanceof Uint32Array||e.data instanceof Uint16Array)throw Error("imageData has incorrect bit depth");for(var o=(0,i.createImageData)(n,a),s=e.data,l=o.data,d=0;d<a;d++)for(var c=0;c<n;c++){var u=(c+t+(d+r)*e.width)*4,f=(c+d*n)*4;l[f]=s[u],l[f+1]=s[u+1],l[f+2]=s[u+2],l[f+3]=s[u+3]}return o}(h,g.left,g.top,f,p)}}var m=[0,1,2];return(!r||n.noBackground||t.mask||(0,i.hasAlpha)(h)||i.RAW_IMAGE_DATA&&(null==(a=t.imageDataRaw)?void 0:a["-1"]))&&m.unshift(-1),c=m.map(function(r){var a,o,s=(0,i.offsetForChannel)(r,!1);return i.RAW_IMAGE_DATA&&t.imageDataRaw?(a=t.imageDataRaw[r],o=t.imageDataRawCompression[r]):n.compress?(a=(0,i.writeDataZipWithoutPrediction)(h,[s]),o=2):(a=(0,i.writeDataRLE)(e,h,[s],!!n.psb),o=1),{channelId:r,compression:o,buffer:a,length:2+a.length}}),{layer:t,top:o,left:s,right:l,bottom:d,channels:c}}(n,a=e,0===t,o=c),a.mask&&I(n,s,a,a.mask,o,!1),a.realMask&&I(n,s,a,a.realMask,o,!0),s}),y=function(t){var n=t.layer,o=t.top,h=t.left,y=t.bottom,S=t.right,k=t.channels;u(r,o),u(r,h),u(r,y),u(r,S),d(r,k.length);for(var I=0;I<k.length;I++){var _=k[I];l(r,_.channelId),c.psb&&f(r,0),f(r,_.length)}m(r,"8BIM"),m(r,i.fromBlendMode[n.blendMode]||"norm"),s(r,Math.round(255*(0,i.clamp)(null!=(e=n.opacity)?e:1,0,1))),s(r,+!!n.clipping);var C=8;n.transparencyProtected&&(C|=1),n.hidden&&(C|=2),(n.vectorMask||n.sectionDivider&&0!==n.sectionDivider.type||n.adjustment)&&(C|=16),n.effectsOpen&&(C|=32),s(r,C),s(r,0),w(r,1,function(){var e,i,o,l,d,f,h;e=r,i=n,o=t,l=i.mask,d=i.realMask,w(e,1,function(){if(l||d){var t=0,r=0,n=0;l&&(void 0!==l.userMaskDensity&&(t|=1),void 0!==l.userMaskFeather&&(t|=2),void 0!==l.vectorMaskDensity&&(t|=4),void 0!==l.vectorMaskFeather&&(t|=8),l.disabled&&(r|=2),l.positionRelativeToLayer&&(r|=1),l.fromVectorData&&(r|=8),t&&(r|=16));var i=o.mask||{};if(u(e,i.top||0),u(e,i.left||0),u(e,i.bottom||0),u(e,i.right||0),s(e,l&&l.defaultColor||0),s(e,r),d){d.disabled&&(n|=2),d.positionRelativeToLayer&&(n|=1),d.fromVectorData&&(n|=8);var a=o.realMask||{};s(e,n),s(e,d.defaultColor||0),u(e,a.top||0),u(e,a.left||0),u(e,a.bottom||0),u(e,a.right||0)}t&&l&&(s(e,t),void 0!==l.userMaskDensity&&s(e,Math.round(255*l.userMaskDensity)),void 0!==l.userMaskFeather&&p(e,l.userMaskFeather),void 0!==l.vectorMaskDensity&&s(e,Math.round(255*l.vectorMaskDensity)),void 0!==l.vectorMaskFeather&&p(e,l.vectorMaskFeather)),g(e,2)}}),f=r,h=n,w(f,1,function(){var e=h.blendingRanges;if(e){b(f,e.compositeGrayBlendSource),b(f,e.compositeGraphBlendDestinationRange);for(var t=0,r=e.ranges;t<r.length;t++){var n=r[t];b(f,n.sourceRange),b(f,n.destRange)}}}),v(r,(n.name||"").substring(0,255),4),x(r,n,a,c)})},S=0;S<t.length;S++){var k=t[S];y(k)}for(var D=0;D<t.length;D++)for(var k=t[D],U=0,A=k.channels;U<A.length;U++){var E=A[U];d(r,E.compression),E.buffer&&h(r,E.buffer)}},!0,(c=A).psb),y=e,S=t.globalLayerMaskInfo,w(y,1,function(){S&&(d(y,S.overlayColorSpace),d(y,S.colorSpace1),d(y,S.colorSpace2),d(y,S.colorSpace3),d(y,S.colorSpace4),d(y,255*S.opacity),s(y,S.kind),g(y,3))}),x(e,t,t,A)},void 0,!!A.psb);var B=E?E.width:t.width,O=E?E.height:t.height,T={data:new Uint8Array(B*O*4),width:B,height:O};if(d(e,1),i.RAW_IMAGE_DATA&&t.imageDataRaw)console.log("writing raw image data"),h(e,t.imageDataRaw);else{if(E&&T.data.set(new Uint8Array(E.data.buffer,E.data.byteOffset,E.data.byteLength)),P)for(var L=T.width*T.height*4,R=T.data,z=0;z<L;z+=4){var V=R[z+3];if(0!=V&&255!=V){var N=V/255,G=255*(1-N);R[z+0]=R[z+0]*N+G,R[z+1]=R[z+1]*N+G,R[z+2]=R[z+2]*N+G}}h(e,(0,i.writeDataRLE)(e.tempBuffer,T,P?[0,1,2,3]:[0,1,2],!!r.psb))}},e.exports.writeColor=function(e,t){t?"r"in t?(d(e,0),d(e,Math.round(257*t.r)),d(e,Math.round(257*t.g)),d(e,Math.round(257*t.b)),d(e,0)):"fr"in t?(d(e,0),d(e,Math.round(65535*t.fr)),d(e,Math.round(65535*t.fg)),d(e,Math.round(65535*t.fb)),d(e,0)):"l"in t?(d(e,7),l(e,Math.round(1e4*t.l)),l(e,Math.round(t.a<0?12800*t.a:12700*t.a)),l(e,Math.round(t.b<0?12800*t.b:12700*t.b)),d(e,0)):"h"in t?(d(e,1),d(e,Math.round(65535*t.h)),d(e,Math.round(65535*t.s)),d(e,Math.round(65535*t.b)),d(e,0)):"c"in t?(d(e,2),d(e,Math.round(257*t.c)),d(e,Math.round(257*t.m)),d(e,Math.round(257*t.y)),d(e,Math.round(257*t.k))):(d(e,8),d(e,Math.round(1e4*t.k/255)),g(e,6)):(d(e,0),g(e,8))}}),r("jE67M",function(e,r){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.initializeCanvas=e.exports.createImageData=e.exports.createCanvasFromData=e.exports.createCanvas=e.exports.writeDataZipWithoutPrediction=e.exports.writeDataRLE=e.exports.writeDataRaw=e.exports.decodeBitmap=e.exports.imageDataToCanvas=e.exports.resetImageData=e.exports.hasAlpha=e.exports.clamp=e.exports.offsetForChannel=e.exports.Compression=e.exports.ChannelID=e.exports.MaskParams=e.exports.LayerMaskFlags=e.exports.ColorSpace=e.exports.createEnum=e.exports.revMap=e.exports.largeAdditionalInfoKeys=e.exports.layerColors=e.exports.toBlendMode=e.exports.fromBlendMode=e.exports.RAW_IMAGE_DATA=e.exports.MOCK_HANDLERS=void 0;var n,i,a,o,s,l=t("jWkTT"),d=t("1eu3Z");function c(e){var t={};return Object.keys(e).forEach(function(r){return t[e[r]]=r}),t}e.exports.MOCK_HANDLERS=!1,e.exports.RAW_IMAGE_DATA=!1,e.exports.fromBlendMode={},e.exports.toBlendMode={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"},Object.keys(e.exports.toBlendMode).forEach(function(t){return e.exports.fromBlendMode[e.exports.toBlendMode[t]]=t}),e.exports.layerColors=["none","red","orange","yellow","green","blue","violet","gray"],e.exports.largeAdditionalInfoKeys=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"],e.exports.revMap=c,e.exports.createEnum=function(e,t,r){var n=c(r);return{decode:function(e){var r=e.split(".")[1];if(r&&!n[r])throw Error("Unrecognized value for enum: '".concat(e,"'"));return n[r]||t},encode:function(n){if(n&&!r[n])throw Error("Invalid value for enum: '".concat(n,"'"));return"".concat(e,".").concat(r[n]||r[t])}}},(n=e.exports.ColorSpace||(e.exports.ColorSpace={}))[n.RGB=0]="RGB",n[n.HSB=1]="HSB",n[n.CMYK=2]="CMYK",n[n.Lab=7]="Lab",n[n.Grayscale=8]="Grayscale",(i=e.exports.LayerMaskFlags||(e.exports.LayerMaskFlags={}))[i.PositionRelativeToLayer=1]="PositionRelativeToLayer",i[i.LayerMaskDisabled=2]="LayerMaskDisabled",i[i.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",i[i.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",i[i.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt",(a=e.exports.MaskParams||(e.exports.MaskParams={}))[a.UserMaskDensity=1]="UserMaskDensity",a[a.UserMaskFeather=2]="UserMaskFeather",a[a.VectorMaskDensity=4]="VectorMaskDensity",a[a.VectorMaskFeather=8]="VectorMaskFeather",(o=e.exports.ChannelID||(e.exports.ChannelID={}))[o.Color0=0]="Color0",o[o.Color1=1]="Color1",o[o.Color2=2]="Color2",o[o.Color3=3]="Color3",o[o.Transparency=-1]="Transparency",o[o.UserMask=-2]="UserMask",o[o.RealUserMask=-3]="RealUserMask",(s=e.exports.Compression||(e.exports.Compression={}))[s.RawData=0]="RawData",s[s.RleCompressed=1]="RleCompressed",s[s.ZipWithoutPrediction=2]="ZipWithoutPrediction",s[s.ZipWithPrediction=3]="ZipWithPrediction",e.exports.offsetForChannel=function(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case -1:return t?4:3;default:return e+1}},e.exports.clamp=function(e,t,r){return e<t?t:e>r?r:e},e.exports.hasAlpha=function(e){for(var t=e.width*e.height*4,r=3;r<t;r+=4)if(255!==e.data[r])return!0;return!1},e.exports.resetImageData=function(e){for(var t=e.data,r=t instanceof Float32Array?1:t instanceof Uint16Array?65535:255,n=0,i=0|t.length;n<i;n=n+4|0)t[n+0]=0,t[n+1]=0,t[n+2]=0,t[n+3]=r},e.exports.imageDataToCanvas=function(t){var r,n=(0,e.exports.createCanvas)(t.width,t.height);if(t.data instanceof Uint8ClampedArray)r=t;else{r=(0,e.exports.createImageData)(t.width,t.height);var i=t.data,a=r.data;if(i instanceof Float32Array)for(var o=0,s=i.length;o<s;o+=4)a[o+0]=Math.round(255*Math.pow(i[o+0],1/2.2)),a[o+1]=Math.round(255*Math.pow(i[o+1],1/2.2)),a[o+2]=Math.round(255*Math.pow(i[o+2],1/2.2)),a[o+3]=Math.round(255*i[o+3]);else for(var l=8*(i instanceof Uint16Array),o=0,s=i.length;o<s;o++)a[o]=i[o]>>>l}return n.getContext("2d").putImageData(r,0,0),n},e.exports.decodeBitmap=function(e,t,r,n){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw Error("Invalid bit depth");for(var i=0,a=0,o=0;i<n;i++)for(var s=0;s<r;)for(var l=e[o++],d=0;d<8&&s<r;d++,s++,a+=4){var c=128&l?0:255;l<<=1,t[a+0]=c,t[a+1]=c,t[a+2]=c,t[a+3]=255}},e.exports.writeDataRaw=function(e,t,r,n){if(r&&n){for(var i=new Uint8Array(r*n),a=0;a<i.length;a++)i[a]=e.data[4*a+t];return i}},e.exports.writeDataRLE=function(e,t,r,n){var i=t.data,a=t.width,o=t.height;if(a&&o){for(var s=4*a|0,l=0,d=r.length*(n?4:2)*o|0,c=0;c<r.length;c++)for(var u=r[c],f=0,p=0|u;f<o;f++){var h=f*s|0,g=h+s|0,m=g+u-4|0,v=m-4|0,y=d;for(p=h+u|0;p<g;p=p+4|0)if(p<v){var w=i[p],b=i[p=p+4|0],x=i[p=p+4|0];if(w===b&&w===x){for(var S=3;S<128&&p<m&&i[p+4|0]===w;)S=S+1|0,p=p+4|0;e[d++]=1-S,e[d++]=w}else{var k=d,I=!0,S=1;for(e[d++]=0,e[d++]=w;p<m&&S<128;){if(p=p+4|0,w=b,b=x,x=i[p],w===b&&w===x){p=p-12|0,I=!1;break}S++,e[d++]=w}I&&(S<127?(e[d++]=b,e[d++]=x,S+=2):S<128?(e[d++]=b,S++,p=p-4|0):p=p-8|0),e[k]=S-1}}else p===m?e[d++]=0:(e[d++]=1,e[d++]=i[p],p=p+4|0),e[d++]=i[p];var _=d-y;n&&(e[l++]=_>>24&255,e[l++]=_>>16&255),e[l++]=_>>8&255,e[l++]=255&_}return e.slice(0,d)}},e.exports.writeDataZipWithoutPrediction=function(e,t){for(var r=e.data,n=e.width*e.height,i=new Uint8Array(n),a=[],o=0,s=0;s<t.length;s++){for(var l=t[s],c=0,u=l;c<n;c++,u+=4)i[c]=r[u];var f=(0,d.deflate)(i);a.push(f),o+=f.byteLength}if(!(a.length>0))return a[0];for(var f=new Uint8Array(o),l=0,p=0;p<a.length;p++){var h=a[p];f.set(h,l),l+=h.byteLength}return f},e.exports.createCanvas=function(){throw Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},e.exports.createCanvasFromData=function(){throw Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")};var u=void 0;e.exports.createImageData=function(t,r){return u||(u=(0,e.exports.createCanvas)(1,1)),u.getContext("2d").createImageData(t,r)},"undefined"!=typeof document&&(e.exports.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},e.exports.createCanvasFromData=function(e){var t=new Image;t.src="data:image/jpeg;base64,"+(0,l.fromByteArray)(e);var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r}),e.exports.initializeCanvas=function(t,r,n){e.exports.createCanvas=t,e.exports.createCanvasFromData=r||e.exports.createCanvasFromData,e.exports.createImageData=n||e.exports.createImageData}}),r("1eu3Z",function(t,r){function n(e){for(var t=e.length;--t>=0;)e[t]=0}e(t.exports,"deflate",function(){return tJ}),e(t.exports,"inflate",function(){return tQ});var i,a,o,s,l,d=573,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=Array(576);n(h);var g=Array(60);n(g);var m=Array(512);n(m);var v=Array(256);n(v);var y=Array(29);n(y);var w=Array(30);function b(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function x(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}n(w);var S=function(e){return e<256?m[e]:m[256+(e>>>7)]},k=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},I=function(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},_=function(e,t,r){I(e,r[2*t],r[2*t+1])},C=function(e,t){var r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0)return r>>>1},F=function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},D=function(e,t){var r,n,i,a,o,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<d;r++)(a=l[2*l[2*(n=e.heap[r])+1]+1]+1)>g&&(a=g,m++),l[2*n+1]=a,!(n>c)&&(e.bl_count[a]++,o=0,n>=h&&(o=p[n-h]),s=l[2*n],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(u[2*n+1]+o)));if(0!==m){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,m-=2}while(m>0)for(a=g;0!==a;a--)for(n=e.bl_count[a];0!==n;)!((i=e.heap[--r])>c)&&(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),n--)}},U=function(e,t,r){var n,i,a=Array(16),o=0;for(n=1;n<=15;n++)o=o+r[n-1]<<1,a[n]=o;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=C(a[s]++,s))}},A=function(){var e,t,r,n,s,l=Array(16);for(n=0,r=0;n<28;n++)for(e=0,y[n]=r;e<1<<c[n];e++)v[r++]=n;for(v[r-1]=n,s=0,n=0;n<16;n++)for(e=0,w[n]=s;e<1<<u[n];e++)m[s++]=n;for(s>>=7;n<30;n++)for(e=0,w[n]=s<<7;e<1<<u[n]-7;e++)m[256+s++]=n;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,l[8]++;for(;e<=255;)h[2*e+1]=9,e++,l[9]++;for(;e<=279;)h[2*e+1]=7,e++,l[7]++;for(;e<=287;)h[2*e+1]=8,e++,l[8]++;for(U(h,287,l),e=0;e<30;e++)g[2*e+1]=5,g[2*e]=C(e,5);i=new b(h,c,257,286,15),a=new b(g,u,0,30,15),o=new b([],f,0,19,7)},E=function(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},P=function(e){e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},M=function(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]},B=function(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&M(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!M(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},O=function(e,t,r){var n,i,a,o,s=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+s++])+((255&e.pending_buf[e.sym_buf+s++])<<8),i=e.pending_buf[e.sym_buf+s++],0===n?_(e,i,t):(_(e,(a=v[i])+256+1,t),0!==(o=c[a])&&I(e,i-=y[a],o),_(e,a=S(--n),r),0!==(o=u[a])&&I(e,n-=w[a],o));while(s<e.sym_next)_(e,256,t)},T=function(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(r=0,e.heap_len=0,e.heap_max=d;r<l;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)B(e,a,r);i=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],B(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,B(e,a,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],D(e,t),U(a,c,e.bl_count)},L=function(e,t,r){var n,i,a=-1,o=t[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=t[(n+1)*2+1],++s<l&&i===o||(s<d?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))},R=function(e,t,r){var n,i,a=-1,o=t[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),n=0;n<=r;n++)if(i=o,o=t[(n+1)*2+1],!(++s<l)||i!==o){if(s<d)do _(e,i,e.bl_tree);while(0!=--s)else 0!==i?(i!==a&&(_(e,i,e.bl_tree),s--),_(e,16,e.bl_tree),I(e,s-3,2)):s<=10?(_(e,17,e.bl_tree),I(e,s-3,3)):(_(e,18,e.bl_tree),I(e,s-11,7));s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}},z=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),T(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},V=function(e,t,r,n){var i;for(I(e,t-257,5),I(e,r-1,5),I(e,n-4,4),i=0;i<n;i++)I(e,e.bl_tree[2*p[i]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,r-1)},N=function(e){var t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},G=!1,j=function(e,t,r,n){I(e,0+ +!!n,3),P(e),k(e,r),k(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},W=function(e){G||(A(),G=!0),e.l_desc=new x(e.dyn_ltree,i),e.d_desc=new x(e.dyn_dtree,a),e.bl_desc=new x(e.bl_tree,o),e.bi_buf=0,e.bi_valid=0,E(e)},H=function(e,t,r,n){var i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=N(e)),T(e,e.l_desc),T(e,e.d_desc),o=z(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?j(e,t,r,n):4===e.strategy||a===i?(I(e,2+ +!!n,3),O(e,h,g)):(I(e,4+ +!!n,3),V(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),O(e,e.dyn_ltree,e.dyn_dtree)),E(e),n&&P(e)},X=function(e){I(e,2,3),_(e,256,h),F(e)},K=function(e,t,r,n){for(var i=65535&e,a=e>>>16&65535,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do a=a+(i=i+t[n++]|0)|0;while(--o)i%=65521,a%=65521}return i|a<<16},Z=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t}()),Y=function(e,t,r,n){var i=n+r;e^=-1;for(var a=n;a<i;a++)e=e>>>8^Z[(e^t[a])&255];return -1^e},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$=0,J=1,Q=2,ee=3,et=4,er=5,en=6,ei=0,ea=1,eo=2,es=-2,el=-3,ed=-4,ec=-5,eu=-1,ef=1,ep=2,eh=3,eg=4,em=0,ev=2,ey=8,ew=function(e,t,r){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(v[r]+256+1)*2]++,e.dyn_dtree[2*S(t)]++),e.sym_next===e.sym_end},eb=$,ex=et,eS=er,ek=ei,eI=ea,e_=es,eC=ec,eF=ef,eD=ep,eU=ey,eA=573,eE=function(e,t){return e.msg=q[t],t},eP=function(e){return 2*e-9*(e>4)},eM=function(e){for(var t=e.length;--t>=0;)e[t]=0},eB=function(e){var t,r,n,i=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t)n=t=i;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},eO=function(e,t,r){return(t<<e.hash_shift^r)&e.hash_mask},eT=function(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},eL=function(e,t){H(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,eT(e.strm)},eR=function(e,t){e.pending_buf[e.pending++]=t},ez=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eV=function(e,t,r,n){var i=e.avail_in;return(i>n&&(i=n),0===i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=K(e.adler,t,i,r):2===e.state.wrap&&(e.adler=Y(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},eN=function(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,c=e.w_mask,u=e.prev,f=e.strstart+258,p=d[a+o-1],h=d[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(d[(r=t)+o]!==h||d[r+o-1]!==p||d[r]!==d[a]||d[++r]!==d[a+1])continue;a+=2,r++;do;while(d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&d[++a]===d[++r]&&a<f)if(n=258-(f-a),a=f-258,n>o){if(e.match_start=t,o=n,n>=s)break;p=d[a+o-1],h=d[a+o]}}while((t=u[t&c])>l&&0!=--i)return o<=e.lookahead?o:e.lookahead},eG=function(e){var t,r,n,i=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-262)&&(e.window.set(e.window.subarray(i,i+i-r),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),eB(e),r+=i),0===e.strm.avail_in)break;if(t=eV(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=eO(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=eO(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ej=function(e,t){var r,n,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r>(n=e.strstart-e.block_start)+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<a&&(0===r&&t!==ex||t===eb||r!==n+e.strm.avail_in)))break;o=+(t===ex&&r===n+e.strm.avail_in),j(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,eT(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(eV(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o)return((s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o)?4:t!==eb&&t!==ex&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(eV(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,a=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((n=e.strstart-e.block_start)>=a||(n||t===ex)&&t!==eb&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=+(t===ex&&0===e.strm.avail_in&&r===n),j(e,e.block_start,r,o),e.block_start+=r,eT(e.strm)),o?3:1)},eW=function(e,t){for(var r,n;;){if(e.lookahead<262){if(eG(e),e.lookahead<262&&t===eb)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=eO(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=eN(e,r)),e.match_length>=3)if(n=ew(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eO(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eO(e,e.ins_h,e.window[e.strstart+1]);else n=ew(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(eL(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===ex)?(eL(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eL(e,!1),0===e.strm.avail_out)?1:2},eH=function(e,t){for(var r,n,i;;){if(e.lookahead<262){if(eG(e),e.lookahead<262&&t===eb)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=eO(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=eN(e,r),e.match_length<=5&&(e.strategy===eF||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=ew(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=eO(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(eL(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=ew(e,0,e.window[e.strstart-1]))&&eL(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=ew(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ex)?(eL(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eL(e,!1),0===e.strm.avail_out)?1:2},eX=function(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=258){if(eG(e),e.lookahead<=258&&t===eb)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+258;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a)e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=ew(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ew(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(eL(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ex)?(eL(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eL(e,!1),0===e.strm.avail_out)?1:2},eK=function(e,t){for(var r;;){if(0===e.lookahead&&(eG(e),0===e.lookahead)){if(t===eb)return 1;break}if(e.match_length=0,r=ew(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(eL(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ex)?(eL(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eL(e,!1),0===e.strm.avail_out)?1:2};function eZ(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var eY=[new eZ(0,0,0,0,ej),new eZ(4,4,8,4,eW),new eZ(4,5,16,8,eW),new eZ(4,6,32,32,eW),new eZ(4,4,16,16,eH),new eZ(8,16,32,32,eH),new eZ(8,16,128,128,eH),new eZ(8,32,128,256,eH),new eZ(32,128,258,1024,eH),new eZ(32,258,258,4096,eH)],eq=function(e){e.window_size=2*e.w_size,eM(e.head),e.max_lazy_match=eY[e.level].max_lazy,e.good_match=eY[e.level].good_length,e.nice_match=eY[e.level].nice_length,e.max_chain_length=eY[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0};function e$(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eU,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eA),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eM(this.dyn_ltree),eM(this.dyn_dtree),eM(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eM(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eM(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var eJ=function(e){if(!e)return 1;var t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},eQ=function(e){if(eJ(e))return eE(e,e_);e.total_in=e.total_out=0,e.data_type=ev;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,W(t),ek},e0=function(e){var t=eQ(e);return t===ek&&eq(e.state),t},e1=function(e,t,r,n,i,a){if(!e)return e_;var o=1;if(t===eu&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==eU||n<8||n>15||t<0||t>9||a<0||a>eg||8===n&&1!==o)return eE(e,e_);8===n&&(n=9);var s=new e$;return e.state=s,s.strm=e,s.status=42,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=r,e0(e)},e2=function(e,t){if(eJ(e)||t>eS||t<0)return e?eE(e,e_):e_;var r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==ex)return eE(e,0===e.avail_out?eC:e_);var n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(eT(e),0===e.avail_out)return r.last_flush=-1,ek}else if(0===e.avail_in&&eP(t)<=eP(n)&&t!==ex)return eE(e,eC);if(666===r.status&&0!==e.avail_in)return eE(e,eC);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){var i=eU+(r.w_bits-8<<4)<<8;if(i|=(r.strategy>=eD||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(i|=32),ez(r,i+=31-i%31),0!==r.strstart&&(ez(r,e.adler>>>16),ez(r,65535&e.adler)),e.adler=1,r.status=113,eT(e),0!==r.pending)return r.last_flush=-1,ek}if(57===r.status){if(e.adler=0,eR(r,31),eR(r,139),eR(r,8),r.gzhead)eR(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),eR(r,255&r.gzhead.time),eR(r,r.gzhead.time>>8&255),eR(r,r.gzhead.time>>16&255),eR(r,r.gzhead.time>>24&255),eR(r,9===r.level?2:4*(r.strategy>=eD||r.level<2)),eR(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(eR(r,255&r.gzhead.extra.length),eR(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Y(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(eR(r,0),eR(r,0),eR(r,0),eR(r,0),eR(r,0),eR(r,9===r.level?2:4*(r.strategy>=eD||r.level<2)),eR(r,3),r.status=113,eT(e),0!==r.pending)return r.last_flush=-1,ek}if(69===r.status){if(r.gzhead.extra){for(var a=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;r.pending+o>r.pending_buf_size;){var s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=Y(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=s,eT(e),0!==r.pending)return r.last_flush=-1,ek;a=0,o-=s}var l=new Uint8Array(r.gzhead.extra);r.pending_buf.set(l.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>a&&(e.adler=Y(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){var d,c=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>c&&(e.adler=Y(e.adler,r.pending_buf,r.pending-c,c)),eT(e),0!==r.pending)return r.last_flush=-1,ek;c=0}d=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,eR(r,d)}while(0!==d)r.gzhead.hcrc&&r.pending>c&&(e.adler=Y(e.adler,r.pending_buf,r.pending-c,c)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){var u,f=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>f&&(e.adler=Y(e.adler,r.pending_buf,r.pending-f,f)),eT(e),0!==r.pending)return r.last_flush=-1,ek;f=0}u=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,eR(r,u)}while(0!==u)r.gzhead.hcrc&&r.pending>f&&(e.adler=Y(e.adler,r.pending_buf,r.pending-f,f))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(eT(e),0!==r.pending))return r.last_flush=-1,ek;eR(r,255&e.adler),eR(r,e.adler>>8&255),e.adler=0}if(r.status=113,eT(e),0!==r.pending)return r.last_flush=-1,ek}if(0!==e.avail_in||0!==r.lookahead||t!==eb&&666!==r.status){var p=0===r.level?ej(r,t):r.strategy===eD?eK(r,t):r.strategy===eh?eX(r,t):eY[r.level].func(r,t);if((3===p||4===p)&&(r.status=666),1===p||3===p)return 0===e.avail_out&&(r.last_flush=-1),ek;if(2===p&&(t===J?X(r):t!==eS&&(j(r,0,0,!1),t===ee&&(eM(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),eT(e),0===e.avail_out))return r.last_flush=-1,ek}return t!==ex?ek:r.wrap<=0?eI:(2===r.wrap?(eR(r,255&e.adler),eR(r,e.adler>>8&255),eR(r,e.adler>>16&255),eR(r,e.adler>>24&255),eR(r,255&e.total_in),eR(r,e.total_in>>8&255),eR(r,e.total_in>>16&255),eR(r,e.total_in>>24&255)):(ez(r,e.adler>>>16),ez(r,65535&e.adler)),eT(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ek:eI)},e3=function(e){if(eJ(e))return e_;var t=e.state.status;return e.state=null,113===t?eE(e,el):ek},e6=function(e,t){var r=t.length;if(eJ(e))return e_;var n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return e_;if(1===i&&(e.adler=K(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(eM(n.head),n.strstart=0,n.block_start=0,n.insert=0);var a=new Uint8Array(n.w_size);a.set(t.subarray(r-n.w_size,r),0),t=a,r=n.w_size}var o=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,eG(n);n.lookahead>=3;){var d=n.strstart,c=n.lookahead-2;do n.ins_h=eO(n,n.ins_h,n.window[d+3-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--c)n.strstart=d,n.lookahead=2,eG(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=o,n.wrap=i,ek},e5=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}return e},e8=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),a=0,o=0,s=e.length;a<s;a++){var l=e[a];i.set(l,o),o+=l.length}return i},e4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){e4=!1}for(var e7=new Uint8Array(256),e9=0;e9<256;e9++)e7[e9]=e9>=252?6:e9>=248?5:e9>=240?4:e9>=224?3:e9>=192?2:1;e7[254]=e7[254]=1;var te=function(e,t){if(t<65534&&e.subarray&&e4)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},tt=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)(64512&(r=e.charCodeAt(i)))==55296&&i+1<o&&(64512&(n=e.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(a=0,t=new Uint8Array(s),i=0;a<s;i++)(64512&(r=e.charCodeAt(i)))==55296&&i+1<o&&(64512&(n=e.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t},tr=function(e,t){var r,n,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));var a=Array(2*i);for(n=0,r=0;r<i;){var o=e[r++];if(o<128){a[n++]=o;continue}var s=e7[o];if(s>4){a[n++]=65533,r+=s-1;continue}for(o&=2===s?31:3===s?15:7;s>1&&r<i;)o=o<<6|63&e[r++],s--;if(s>1){a[n++]=65533;continue}o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|1023&o)}return te(a,n)},tn=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+e7[e[r]]>t?r:t},ti=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ta=Object.prototype.toString,to=Q,ts=ee,tl=ei,td=ea;function tc(e){this.options=e5({level:eu,method:ey,chunkSize:16384,windowBits:15,memLevel:8,strategy:em},e||{});var t,r,n,i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ti,this.strm.avail_out=0;var a=e1(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(a!==tl)throw Error(q[a]);if(i.header&&(t=this.strm,r=i.header,eJ(t)||2!==t.state.wrap||(t.state.gzhead=r)),i.dictionary){if(n="string"==typeof i.dictionary?tt(i.dictionary):"[object ArrayBuffer]"===ta.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,(a=e6(this.strm,n))!==tl)throw Error(q[a]);this._dict_set=!0}}function tu(e,t){var r=new tc(t);if(r.push(e,!0),r.err)throw r.msg||q[r.err];return r.result}tc.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?et:$,"string"==typeof e?i.input=tt(e):"[object ArrayBuffer]"===ta.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){if(0===i.avail_out&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(n===to||n===ts)&&i.avail_out<=6){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if((r=e2(i,n))===td)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=e3(this.strm),this.onEnd(r),this.ended=!0,r===tl;if(0===i.avail_out){this.onData(i.output);continue}if(n>0&&i.next_out>0){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if(0===i.avail_in)break}return!0},tc.prototype.onData=function(e){this.chunks.push(e)},tc.prototype.onEnd=function(e){e===tl&&(this.result=e8(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tf=function(e,t){var r,n,i,a,o,s,l,d,c,u,f,p,h,g,m,v,y,w,b,x,S,k,I,_,C=e.state;r=e.next_in,I=e.input,n=r+(e.avail_in-5),i=e.next_out,_=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=C.dmax,l=C.wsize,d=C.whave,c=C.wnext,u=C.window,f=C.hold,p=C.bits,h=C.lencode,g=C.distcode,m=(1<<C.lenbits)-1,v=(1<<C.distbits)-1;e:do for(p<15&&(f+=I[r++]<<p,p+=8,f+=I[r++]<<p,p+=8),y=h[f&m];;){if(f>>>=w=y>>>24,p-=w,0==(w=y>>>16&255))_[i++]=65535&y;else if(16&w)for(b=65535&y,(w&=15)&&(p<w&&(f+=I[r++]<<p,p+=8),b+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=I[r++]<<p,p+=8,f+=I[r++]<<p,p+=8),y=g[f&v];;){if(f>>>=w=y>>>24,p-=w,16&(w=y>>>16&255)){if(x=65535&y,p<(w&=15)&&(f+=I[r++]<<p,(p+=8)<w&&(f+=I[r++]<<p,p+=8)),(x+=f&(1<<w)-1)>s){e.msg="invalid distance too far back",C.mode=16209;break e}if(f>>>=w,p-=w,x>(w=i-a)){if((w=x-w)>d&&C.sane){e.msg="invalid distance too far back",C.mode=16209;break e}if(S=0,k=u,0===c){if(S+=l-w,w<b){b-=w;do _[i++]=u[S++];while(--w)S=i-x,k=_}}else if(c<w){if(S+=l+c-w,(w-=c)<b){b-=w;do _[i++]=u[S++];while(--w)if(S=0,c<b){b-=w=c;do _[i++]=u[S++];while(--w)S=i-x,k=_}}}else if(S+=c-w,w<b){b-=w;do _[i++]=u[S++];while(--w)S=i-x,k=_}for(;b>2;)_[i++]=k[S++],_[i++]=k[S++],_[i++]=k[S++],b-=3;b&&(_[i++]=k[S++],b>1&&(_[i++]=k[S++]))}else{S=i-x;do _[i++]=_[S++],_[i++]=_[S++],_[i++]=_[S++],b-=3;while(b>2)b&&(_[i++]=_[S++],b>1&&(_[i++]=_[S++]))}}else if((64&w)==0){y=g[(65535&y)+(f&(1<<w)-1)];continue}else{e.msg="invalid distance code",C.mode=16209;break e}break}else if((64&w)==0){y=h[(65535&y)+(f&(1<<w)-1)];continue}else if(32&w){C.mode=16191;break e}else{e.msg="invalid literal/length code",C.mode=16209;break e}break}while(r<n&&i<o)r-=b=p>>3,p-=b<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=i<o?257+(o-i):257-(i-o),C.hold=f,C.bits=p},tp=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),th=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tg=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tm=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tv=function(e,t,r,n,i,a,o,s){var l,d,c,u,f,p,h,g,m,v=s.bits,y=0,w=0,b=0,x=0,S=0,k=0,I=0,_=0,C=0,F=0,D=null,U=new Uint16Array(16),A=new Uint16Array(16),E=null;for(y=0;y<=15;y++)U[y]=0;for(w=0;w<n;w++)U[t[r+w]]++;for(x=15,S=v;x>=1&&0===U[x];x--);if(S>x&&(S=x),0===x)return i[a++]=0x1400000,i[a++]=0x1400000,s.bits=1,0;for(b=1;b<x&&0===U[b];b++);for(S<b&&(S=b),_=1,y=1;y<=15;y++)if(_<<=1,(_-=U[y])<0)return -1;if(_>0&&(0===e||1!==x))return -1;for(y=1,A[1]=0;y<15;y++)A[y+1]=A[y]+U[y];for(w=0;w<n;w++)0!==t[r+w]&&(o[A[t[r+w]]++]=w);if(0===e?(D=E=o,p=20):1===e?(D=tp,E=th,p=257):(D=tg,E=tm,p=0),F=0,w=0,y=b,f=a,k=S,I=0,c=-1,u=(C=1<<S)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){h=y-I,o[w]+1<p?(g=0,m=o[w]):o[w]>=p?(g=E[o[w]-p],m=D[o[w]-p]):(g=96,m=0),l=1<<y-I,b=d=1<<k;do i[f+(F>>I)+(d-=l)]=h<<24|g<<16|m;while(0!==d)for(l=1<<y-1;F&l;)l>>=1;if(0!==l?(F&=l-1,F+=l):F=0,w++,0==--U[y]){if(y===x)break;y=t[r+o[w]]}if(y>S&&(F&u)!==c){for(0===I&&(I=S),f+=b,_=1<<(k=y-I);k+I<x&&!((_-=U[k+I])<=0);)k++,_<<=1;if(C+=1<<k,1===e&&C>852||2===e&&C>592)return 1;i[c=F&u]=S<<24|k<<16|f-a}}return 0!==F&&(i[f+F]=y-I<<24|4194304),s.bits=S,0},ty=et,tw=er,tb=en,tx=ei,tS=ea,tk=eo,tI=es,t_=el,tC=ed,tF=ey,tD=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function tU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var tA=function(e){if(!e)return 1;var t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},tE=function(e){if(tA(e))return tI;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tx},tP=function(e){if(tA(e))return tI;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tE(e)},tM=function(e,t){if(tA(e))return tI;var r,n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tI:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,tP(e))},tB=!0,tO=function(e){if(tB){s=new Int32Array(512),l=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tv(1,e.lens,0,288,s,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tv(2,e.lens,0,32,l,0,e.work,{bits:5}),tB=!1}e.lencode=s,e.lenbits=9,e.distcode=l,e.distbits=5},tT=function(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},tL=function(e,t){if(!e)return tI;var r=new tU;e.state=r,r.strm=e,r.window=null,r.mode=16180;var n=tM(e,t);return n!==tx&&(e.state=null),n},tR=function(e,t){var r,n,i,a,o,s,l,d,c,u,f,p,h,g,m,v,y,w,b,x,S,k,I,_,C=0,F=new Uint8Array(4),D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tA(e)||!e.output||!e.input&&0!==e.avail_in)return tI;16191===(r=e.state).mode&&(r.mode=16192),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=r.hold,c=r.bits,u=s,f=l,k=tx;t:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;c<16;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(2&r.wrap&&35615===d){0===r.wbits&&(r.wbits=15),r.check=0,F[0]=255&d,F[1]=d>>>8&255,r.check=Y(r.check,F,2,0),d=0,c=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&d)!==tF){e.msg="unknown compression method",r.mode=16209;break}if(d>>>=4,c-=4,S=(15&d)+8,0===r.wbits&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&d?16189:16191,d=0,c=0;break;case 16181:for(;c<16;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(r.flags=d,(255&r.flags)!==tF){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&4&r.wrap&&(F[0]=255&d,F[1]=d>>>8&255,r.check=Y(r.check,F,2,0)),d=0,c=0,r.mode=16182;case 16182:for(;c<32;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.head&&(r.head.time=d),512&r.flags&&4&r.wrap&&(F[0]=255&d,F[1]=d>>>8&255,F[2]=d>>>16&255,F[3]=d>>>24&255,r.check=Y(r.check,F,4,0)),d=0,c=0,r.mode=16183;case 16183:for(;c<16;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&4&r.wrap&&(F[0]=255&d,F[1]=d>>>8&255,r.check=Y(r.check,F,2,0)),d=0,c=0,r.mode=16184;case 16184:if(1024&r.flags){for(;c<16;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&4&r.wrap&&(F[0]=255&d,F[1]=d>>>8&255,r.check=Y(r.check,F,2,0)),d=0,c=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((p=r.length)>s&&(p=s),p&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+p),S)),512&r.flags&&4&r.wrap&&(r.check=Y(r.check,n,p,a)),s-=p,a+=p,r.length-=p),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break t;p=0;do S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S));while(S&&p<s)if(512&r.flags&&4&r.wrap&&(r.check=Y(r.check,n,p,a)),s-=p,a+=p,S)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break t;p=0;do S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S));while(S&&p<s)if(512&r.flags&&4&r.wrap&&(r.check=Y(r.check,n,p,a)),s-=p,a+=p,S)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;c<16;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(4&r.wrap&&d!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}d=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;c<32;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}e.adler=r.check=tD(d),d=0,c=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,tk;e.adler=r.check=1,r.mode=16191;case 16191:if(t===tw||t===tb)break t;case 16192:if(r.last){d>>>=7&c,c-=7&c,r.mode=16206;break}for(;c<3;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}switch(r.last=1&d,c-=1,3&(d>>>=1)){case 0:r.mode=16193;break;case 1:if(tO(r),r.mode=16199,t===tb){d>>>=2,c-=2;break t}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&d,d=0,c=0,r.mode=16194,t===tb)break t;case 16194:r.mode=16195;case 16195:if(p=r.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break t;i.set(n.subarray(a,a+p),o),s-=p,a+=p,l-=p,o+=p,r.length-=p;break}r.mode=16191;break;case 16196:for(;c<14;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(r.nlen=(31&d)+257,c-=5,r.ndist=(31&(d>>>=5))+1,c-=5,r.ncode=(15&(d>>>=5))+4,d>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.lens[D[r.have++]]=7&d,d>>>=3,c-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},k=tv(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,k){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;m=(C=r.lencode[d&(1<<r.lenbits)-1])>>>24,v=C>>>16&255,y=65535&C,!(m<=c);){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(y<16)d>>>=m,c-=m,r.lens[r.have++]=y;else{if(16===y){for(_=m+2;c<_;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(d>>>=m,c-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}S=r.lens[r.have-1],p=3+(3&d),d>>>=2,c-=2}else if(17===y){for(_=m+3;c<_;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}d>>>=m,c-=m,S=0,p=3+(7&d),d>>>=3,c-=3}else{for(_=m+7;c<_;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}d>>>=m,c-=m,S=0,p=11+(127&d),d>>>=7,c-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;p--;)r.lens[r.have++]=S}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,I={bits:r.lenbits},k=tv(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,k){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},k=tv(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,k){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===tb)break t;case 16199:r.mode=16200;case 16200:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,tf(e,f),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,d=r.hold,c=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;m=(C=r.lencode[d&(1<<r.lenbits)-1])>>>24,v=C>>>16&255,y=65535&C,!(m<=c);){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(v&&(240&v)==0){for(w=m,b=v,x=y;m=(C=r.lencode[x+((d&(1<<w+b)-1)>>w)])>>>24,v=C>>>16&255,y=65535&C,!(w+m<=c);){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}d>>>=w,c-=w,r.back+=w}if(d>>>=m,c-=m,r.back+=m,r.length=y,0===v){r.mode=16205;break}if(32&v){r.back=-1,r.mode=16191;break}if(64&v){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(_=r.extra;c<_;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;m=(C=r.distcode[d&(1<<r.distbits)-1])>>>24,v=C>>>16&255,y=65535&C,!(m<=c);){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if((240&v)==0){for(w=m,b=v,x=y;m=(C=r.distcode[x+((d&(1<<w+b)-1)>>w)])>>>24,v=C>>>16&255,y=65535&C,!(w+m<=c);){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}d>>>=w,c-=w,r.back+=w}if(d>>>=m,c-=m,r.back+=m,64&v){e.msg="invalid distance code",r.mode=16209;break}r.offset=y,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(_=r.extra;c<_;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===l)break t;if(p=f-l,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}p>r.wnext?(p-=r.wnext,h=r.wsize-p):h=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,h=o-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do i[o++]=g[h++];while(--p)0===r.length&&(r.mode=16200);break;case 16205:if(0===l)break t;i[o++]=r.length,l--,r.mode=16200;break;case 16206:if(r.wrap){for(;c<32;){if(0===s)break t;s--,d|=n[a++]<<c,c+=8}if(f-=l,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?Y(r.check,i,f,o-f):K(r.check,i,f,o-f)),f=l,4&r.wrap&&(r.flags?d:tD(d))!==r.check){e.msg="incorrect data check",r.mode=16209;break}d=0,c=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break t;s--,d+=n[a++]<<c,c+=8}if(4&r.wrap&&d!==(0|r.total)){e.msg="incorrect length check",r.mode=16209;break}d=0,c=0}r.mode=16208;case 16208:k=tS;break t;case 16209:k=t_;break t;case 16210:return tC;default:return tI}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=d,r.bits=c,(r.wsize||f!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==ty))&&tT(e,e.output,e.next_out,f-e.avail_out),u-=e.avail_in,f-=e.avail_out,e.total_in+=u,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?Y(r.check,i,f,e.next_out-f):K(r.check,i,f,e.next_out-f)),e.data_type=r.bits+64*!!r.last+128*(16191===r.mode)+256*(16199===r.mode||16194===r.mode),(0===u&&0===f||t===ty)&&k===tx&&(k=ec),k},tz=function(e){if(tA(e))return tI;var t=e.state;return t.window&&(t.window=null),e.state=null,tx},tV=function(e,t){if(tA(e))return tI;var r=e.state;return(2&r.wrap)==0?tI:(r.head=t,t.done=!1,tx)},tN=function(e,t){var r,n=t.length;return tA(e)||0!==(r=e.state).wrap&&16190!==r.mode?tI:16190===r.mode&&K(1,t,n,0)!==r.check?t_:tT(e,t,n,n)?(r.mode=16210,tC):(r.havedict=1,tx)},tG=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},tj=Object.prototype.toString,tW=ei,tH=ea,tX=eo,tK=es,tZ=el,tY=ed;function tq(e){this.options=e5({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ti,this.strm.avail_out=0;var r=tL(this.strm,t.windowBits);if(r!==tW||(this.header=new tG,tV(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=tt(t.dictionary):"[object ArrayBuffer]"===tj.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=tN(this.strm,t.dictionary))!==tW))throw Error(q[r])}function t$(e,t){var r=new tq(t);if(r.push(e),r.err)throw r.msg||q[r.err];return r.result}tq.prototype.push=function(e,t){var r,n,i,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?et:$,"[object ArrayBuffer]"===tj.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),(r=tR(a,n))===tX&&s&&((r=tN(a,s))===tW?r=tR(a,n):r===tZ&&(r=tX));a.avail_in>0&&r===tH&&a.state.wrap>0&&0!==e[a.next_in];)tP(a),r=tR(a,n);switch(r){case tK:case tZ:case tX:case tY:return this.onEnd(r),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||r===tH))if("string"===this.options.to){var l=tn(a.output,a.next_out),d=a.next_out-l,c=tr(a.output,l);a.next_out=d,a.avail_out=o-d,d&&a.output.set(a.output.subarray(l,l+d),0),this.onData(c)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==tW||0!==i){if(r===tH)return r=tz(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},tq.prototype.onData=function(e){this.chunks.push(e)},tq.prototype.onEnd=function(e){e===tW&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e8(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tJ=tu,tQ=t$}),r("cAUqy",function(e,r){"use strict";var n=e.exports&&e.exports.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hasMultiEffects=e.exports.readVectorMask=e.exports.booleanOperations=e.exports.readBezierKnot=e.exports.infoHandlersMap=e.exports.infoHandlers=void 0;var i=t("jWkTT"),a=t("26rz6"),o=t("jE67M"),s=t("5OPaf"),l=t("kCSTH"),d=t("klnll"),c=t("2TM27"),u=t("6rQPt"),f=t("duoIX"),p="abcdefghijklmnopqrstuvwxyz";function h(t,r,n,i){var a={key:t,has:r,read:n,write:i};e.exports.infoHandlers.push(a),e.exports.infoHandlersMap[a.key]=a}function g(t,r){e.exports.infoHandlersMap[t]=e.exports.infoHandlersMap[r]}function m(e){return function(t){return void 0!==t[e]}}function v(e){if((0,s.readUint32)(e))throw Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return(0,s.readUint32)(e)}function y(e,t){(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,t)}function w(e,t,r){var n=(0,s.readFixedPointPath32)(e)*r,i=(0,s.readFixedPointPath32)(e)*t,a=(0,s.readFixedPointPath32)(e)*r,o=(0,s.readFixedPointPath32)(e)*t,l=(0,s.readFixedPointPath32)(e)*r;return[i,n,o,a,(0,s.readFixedPointPath32)(e)*t,l]}function b(t,r,n,i,a){for(var o=t.offset+a,l=r.paths,d=void 0;o-t.offset>=26;){var c=(0,s.readUint16)(t);switch(c){case 0:case 3:(0,s.readUint16)(t);var u=(0,s.readInt16)(t),f=(0,s.readUint16)(t);(0,s.skipBytes)(t,18),d={open:3===c,knots:[],fillRule:2===f?"non-zero":"even-odd"},-1!==u&&(d.operation=e.exports.booleanOperations[u]),l.push(d);break;case 1:case 2:case 4:case 5:d.knots.push({linked:1===c||4===c,points:w(t,n,i)});break;case 6:(0,s.skipBytes)(t,24);break;case 7:var p=(0,s.readFixedPointPath32)(t),h=(0,s.readFixedPointPath32)(t),g=(0,s.readFixedPointPath32)(t),m=(0,s.readFixedPointPath32)(t),v=(0,s.readFixedPointPath32)(t);(0,s.skipBytes)(t,4),r.clipboard={top:p,left:h,bottom:g,right:m,resolution:v};break;case 8:r.fillStartsWithAllPixels=!!(0,s.readUint16)(t),(0,s.skipBytes)(t,22);break;default:throw Error("Invalid vmsk section")}}return l}e.exports.infoHandlers=[],e.exports.infoHandlersMap={},h("TySh",m("text"),function(e,t,r){if(1!==(0,s.readInt16)(e))throw Error("Invalid TySh version");for(var i=[],a=0;a<6;a++)i.push((0,s.readFloat64)(e));if(50!==(0,s.readInt16)(e))throw Error("Invalid TySh text version");var o=(0,d.readVersionAndDescriptor)(e);if(1!==(0,s.readInt16)(e))throw Error("Invalid TySh warp version");var l=(0,d.readVersionAndDescriptor)(e);if(t.text={transform:i,left:(0,s.readFloat32)(e),top:(0,s.readFloat32)(e),right:(0,s.readFloat32)(e),bottom:(0,s.readFloat32)(e),text:o["Txt "].replace(/\r/g,"\n"),index:o.TextIndex||0,gridding:d.textGridding.decode(o.textGridding),antiAlias:d.Annt.decode(o.AntA),orientation:d.Ornt.decode(o.Ornt),warp:{style:d.warpStyle.decode(l.warpStyle),value:l.warpValue||0,perspective:l.warpPerspective||0,perspectiveOther:l.warpPerspectiveOther||0,rotate:d.Ornt.decode(l.warpRotate)}},o.bounds&&(t.text.bounds=(0,d.descBoundsToBounds)(o.bounds)),o.boundingBox&&(t.text.boundingBox=(0,d.descBoundsToBounds)(o.boundingBox)),o.EngineData){var f=(0,c.parseEngineData)(o.EngineData),p=(0,u.decodeEngineData)(f);t.text=n(n({},t.text),p)}(0,s.skipBytes)(e,r())},function(e,t){var r=t.text,i=r.warp||{},a=r.transform||[1,0,0,1,0,0],o=n(n(n({"Txt ":(r.text||"").replace(/\r?\n/g,"\r"),textGridding:d.textGridding.encode(r.gridding),Ornt:d.Ornt.encode(r.orientation),AntA:d.Annt.encode(r.antiAlias)},r.bounds?{bounds:(0,d.boundsToDescBounds)(r.bounds)}:{}),r.boundingBox?{boundingBox:(0,d.boundsToDescBounds)(r.boundingBox)}:{}),{TextIndex:r.index||0,EngineData:(0,c.serializeEngineData)((0,u.encodeEngineData)(r))});(0,l.writeInt16)(e,1);for(var s=0;s<6;s++)(0,l.writeFloat64)(e,a[s]);(0,l.writeInt16)(e,50),(0,d.writeVersionAndDescriptor)(e,"","TxLr",o,"text"),(0,l.writeInt16)(e,1),(0,d.writeVersionAndDescriptor)(e,"","warp",I(i)),(0,l.writeFloat32)(e,r.left),(0,l.writeFloat32)(e,r.top),(0,l.writeFloat32)(e,r.right),(0,l.writeFloat32)(e,r.bottom)}),h("SoCo",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"color"===e.vectorFill.type},function(e,t){var r=(0,d.readVersionAndDescriptor)(e);t.vectorFill=(0,d.parseVectorContent)(r)},function(e,t){var r=(0,d.serializeVectorContent)(t.vectorFill).descriptor;(0,d.writeVersionAndDescriptor)(e,"","null",r)}),h("GdFl",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&("solid"===e.vectorFill.type||"noise"===e.vectorFill.type)},function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);t.vectorFill=(0,d.parseVectorContent)(n),(0,s.skipBytes)(e,r())},function(e,t){var r=(0,d.serializeVectorContent)(t.vectorFill).descriptor;(0,d.writeVersionAndDescriptor)(e,"","null",r)}),h("PtFl",function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"pattern"===e.vectorFill.type},function(e,t){var r=(0,d.readVersionAndDescriptor)(e);t.vectorFill=(0,d.parseVectorContent)(r)},function(e,t){var r=(0,d.serializeVectorContent)(t.vectorFill).descriptor;(0,d.writeVersionAndDescriptor)(e,"","null",r)}),h("vscg",function(e){return void 0!==e.vectorFill&&void 0!==e.vectorStroke},function(e,t,r){(0,s.readSignature)(e);var n=(0,d.readVersionAndDescriptor)(e);t.vectorFill=(0,d.parseVectorContent)(n),(0,s.skipBytes)(e,r())},function(e,t){var r=(0,d.serializeVectorContent)(t.vectorFill),n=r.descriptor,i=r.key;(0,l.writeSignature)(e,i),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),e.exports.readBezierKnot=w,e.exports.booleanOperations=["exclude","combine","subtract","intersect"],e.exports.readVectorMask=b,h("vmsk",m("vectorMask"),function(e,t,r,n){var i=n.width,a=n.height;if(3!==(0,s.readUint32)(e))throw Error("Invalid vmsk version");t.vectorMask={paths:[]};var o=t.vectorMask,l=(0,s.readUint32)(e);o.invert=(1&l)!=0,o.notLink=(2&l)!=0,o.disable=(4&l)!=0,b(e,o,i,a,r()),(0,s.skipBytes)(e,r())},function(t,r,n){var i=n.width,a=n.height,o=r.vectorMask,s=!!o.invert|2*!!o.notLink|4*!!o.disable;(0,l.writeUint32)(t,3),(0,l.writeUint32)(t,s),(0,l.writeUint16)(t,6),(0,l.writeZeros)(t,24);var d=o.clipboard;d&&((0,l.writeUint16)(t,7),(0,l.writeFixedPointPath32)(t,d.top),(0,l.writeFixedPointPath32)(t,d.left),(0,l.writeFixedPointPath32)(t,d.bottom),(0,l.writeFixedPointPath32)(t,d.right),(0,l.writeFixedPointPath32)(t,d.resolution),(0,l.writeZeros)(t,4)),void 0!==o.fillStartsWithAllPixels&&((0,l.writeUint16)(t,8),(0,l.writeUint16)(t,+!!o.fillStartsWithAllPixels),(0,l.writeZeros)(t,22));for(var c=0,u=o.paths;c<u.length;c++){var f=u[c];(0,l.writeUint16)(t,3*!!f.open),(0,l.writeUint16)(t,f.knots.length),(0,l.writeUint16)(t,f.operation?e.exports.booleanOperations.indexOf(f.operation):-1),(0,l.writeUint16)(t,"non-zero"===f.fillRule?2:1),(0,l.writeZeros)(t,18);for(var p=f.open?4:1,h=f.open?5:2,g=0,m=f.knots;g<m.length;g++){var v=m[g],y=v.linked,w=v.points;(0,l.writeUint16)(t,y?p:h),(0,l.writeFixedPointPath32)(t,w[1]/a),(0,l.writeFixedPointPath32)(t,w[0]/i),(0,l.writeFixedPointPath32)(t,w[3]/a),(0,l.writeFixedPointPath32)(t,w[2]/i),(0,l.writeFixedPointPath32)(t,w[5]/a),(0,l.writeFixedPointPath32)(t,w[4]/i)}}}),g("vsms","vmsk"),h("vowv",m("vowv"),function(e,t){t.vowv=(0,s.readUint32)(e)},function(e,t){(0,l.writeUint32)(e,t.vowv)}),h("vogk",m("vectorOrigination"),function(e,t,r){if(1!==(0,s.readInt32)(e))throw Error("Invalid vogk version");var n=(0,d.readVersionAndDescriptor)(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=n.keyDescriptorList;i<a.length;i++){var o=a[i],l={};null!=o.keyShapeInvalidated&&(l.keyShapeInvalidated=o.keyShapeInvalidated),null!=o.keyOriginType&&(l.keyOriginType=o.keyOriginType),null!=o.keyOriginResolution&&(l.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(l.keyOriginShapeBoundingBox={top:(0,d.parseUnitsOrNumber)(o.keyOriginShapeBBox["Top "]),left:(0,d.parseUnitsOrNumber)(o.keyOriginShapeBBox.Left),bottom:(0,d.parseUnitsOrNumber)(o.keyOriginShapeBBox.Btom),right:(0,d.parseUnitsOrNumber)(o.keyOriginShapeBBox.Rght)});var c=o.keyOriginRRectRadii;c&&(l.keyOriginRRectRadii={topRight:(0,d.parseUnits)(c.topRight),topLeft:(0,d.parseUnits)(c.topLeft),bottomLeft:(0,d.parseUnits)(c.bottomLeft),bottomRight:(0,d.parseUnits)(c.bottomRight)});var u=o.keyOriginBoxCorners;u&&(l.keyOriginBoxCorners=[{x:u.rectangleCornerA.Hrzn,y:u.rectangleCornerA.Vrtc},{x:u.rectangleCornerB.Hrzn,y:u.rectangleCornerB.Vrtc},{x:u.rectangleCornerC.Hrzn,y:u.rectangleCornerC.Vrtc},{x:u.rectangleCornerD.Hrzn,y:u.rectangleCornerD.Vrtc}]);var f=o.Trnf;f&&(l.transform=[f.xx,f.xy,f.xy,f.yy,f.tx,f.ty]),t.vectorOrigination.keyDescriptorList.push(l)}(0,s.skipBytes)(e,r())},function(e,t){for(var r=t.vectorOrigination,n={keyDescriptorList:[]},i=0;i<r.keyDescriptorList.length;i++){var a=r.keyDescriptorList[i];n.keyDescriptorList.push({});var o=n.keyDescriptorList[n.keyDescriptorList.length-1];null!=a.keyOriginType&&(o.keyOriginType=a.keyOriginType),null!=a.keyOriginResolution&&(o.keyOriginResolution=a.keyOriginResolution);var s=a.keyOriginRRectRadii;s&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:(0,d.unitsValue)(s.topRight,"topRight"),topLeft:(0,d.unitsValue)(s.topLeft,"topLeft"),bottomLeft:(0,d.unitsValue)(s.bottomLeft,"bottomLeft"),bottomRight:(0,d.unitsValue)(s.bottomRight,"bottomRight")});var c=a.keyOriginShapeBoundingBox;c&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":(0,d.unitsValue)(c.top,"top"),Left:(0,d.unitsValue)(c.left,"left"),Btom:(0,d.unitsValue)(c.bottom,"bottom"),Rght:(0,d.unitsValue)(c.right,"right")});var u=a.keyOriginBoxCorners;u&&4===u.length&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:u[0].x,Vrtc:u[0].y},rectangleCornerB:{Hrzn:u[1].x,Vrtc:u[1].y},rectangleCornerC:{Hrzn:u[2].x,Vrtc:u[2].y},rectangleCornerD:{Hrzn:u[3].x,Vrtc:u[3].y}});var f=a.transform;f&&6===f.length&&(o.Trnf={xx:f[0],xy:f[1],yx:f[2],yy:f[3],tx:f[4],ty:f[5]}),null!=a.keyShapeInvalidated&&(o.keyShapeInvalidated=a.keyShapeInvalidated),o.keyOriginIndex=i}(0,l.writeInt32)(e,1),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),h("lmfx",function(e){return void 0!==e.effects&&Q(e.effects)},function(e,t,r){if(0!==(0,s.readUint32)(e))throw Error("Invalid lmfx version");var n=(0,d.readVersionAndDescriptor)(e);t.effects=(0,d.parseEffects)(n,!!e.logMissingFeatures),(0,s.skipBytes)(e,r())},function(e,t,r,n){var i=(0,d.serializeEffects)(t.effects,!!n.logMissingFeatures,!0);(0,l.writeUint32)(e,0),(0,d.writeVersionAndDescriptor)(e,"","null",i)}),h("lrFX",m("effects"),function(e,t,r){t.effects||(t.effects=(0,a.readEffects)(e)),(0,s.skipBytes)(e,r())},function(e,t){(0,a.writeEffects)(e,t.effects)}),h("luni",m("name"),function(e,t,r){if(r()>4){var n=(0,s.readUint32)(e);r()>=2*n?t.name=(0,s.readUnicodeStringWithLength)(e,n):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");(0,s.skipBytes)(e,r())},function(e,t){(0,l.writeUnicodeString)(e,t.name)}),h("lnsr",m("nameSource"),function(e,t){return t.nameSource=(0,s.readSignature)(e)},function(e,t){return(0,l.writeSignature)(e,t.nameSource)}),h("lyid",m("id"),function(e,t){t.id=(0,s.readUint32)(e)},function(e,t,r,n){for(var i=t.id;n.layerIds.has(i);)i+=100;(0,l.writeUint32)(e,i),n.layerIds.add(i),n.layerToId.set(t,i)}),h("lsct",m("sectionDivider"),function(e,t,r){t.sectionDivider={type:(0,s.readUint32)(e)},r()&&((0,s.checkSignature)(e,"8BIM"),t.sectionDivider.key=(0,s.readSignature)(e)),r()&&(t.sectionDivider.subType=(0,s.readUint32)(e))},function(e,t){(0,l.writeUint32)(e,t.sectionDivider.type),t.sectionDivider.key&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,t.sectionDivider.key),void 0!==t.sectionDivider.subType&&(0,l.writeUint32)(e,t.sectionDivider.subType))}),g("lsdk","lsct"),h("clbl",m("blendClippendElements"),function(e,t){t.blendClippendElements=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,+!!t.blendClippendElements),(0,l.writeZeros)(e,3)}),h("infx",m("blendInteriorElements"),function(e,t){t.blendInteriorElements=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,+!!t.blendInteriorElements),(0,l.writeZeros)(e,3)}),h("knko",m("knockout"),function(e,t){t.knockout=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,+!!t.knockout),(0,l.writeZeros)(e,3)}),h("lmgm",m("layerMaskAsGlobalMask"),function(e,t){t.layerMaskAsGlobalMask=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,+!!t.layerMaskAsGlobalMask),(0,l.writeZeros)(e,3)}),h("lspf",m("protected"),function(e,t){var r=(0,s.readUint32)(e);t.protected={transparency:(1&r)!=0,composite:(2&r)!=0,position:(4&r)!=0},8&r&&(t.protected.artboards=!0)},function(e,t){var r=!!t.protected.transparency|2*!!t.protected.composite|4*!!t.protected.position|8*!!t.protected.artboards;(0,l.writeUint32)(e,r)}),h("lclr",m("layerColor"),function(e,t){var r=(0,s.readUint16)(e);(0,s.skipBytes)(e,6),t.layerColor=o.layerColors[r]},function(e,t){var r=o.layerColors.indexOf(t.layerColor);(0,l.writeUint16)(e,-1===r?0:r),(0,l.writeZeros)(e,6)}),h("shmd",function(e){return void 0!==e.timestamp||void 0!==e.animationFrames||void 0!==e.animationFrameFlags||void 0!==e.timeline||void 0!==e.comps},function(e,t,r){for(var n=(0,s.readUint32)(e),i=0;i<n;i++)!function(r){(0,s.checkSignature)(e,"8BIM");var n=(0,s.readSignature)(e);(0,s.readUint8)(e),(0,s.skipBytes)(e,3),(0,s.readSection)(e,1,function(r){if("cust"===n){var i=(0,d.readVersionAndDescriptor)(e);void 0!==i.layerTime&&(t.timestamp=i.layerTime)}else if("mlst"===n){var i=(0,d.readVersionAndDescriptor)(e);t.animationFrames=[];for(var a=0;a<i.LaSt.length;a++){var o=i.LaSt[a],l={frames:o.FrLs};void 0!==o.enab&&(l.enable=o.enab),o.Ofst&&(l.offset=(0,d.horzVrtcToXY)(o.Ofst)),o.FXRf&&(l.referencePoint=(0,d.horzVrtcToXY)(o.FXRf)),o.Lefx&&(l.effects=(0,d.parseEffects)(o.Lefx,!!e.logMissingFeatures)),o.blendOptions&&o.blendOptions.Opct&&(l.opacity=(0,d.parsePercent)(o.blendOptions.Opct)),t.animationFrames.push(l)}}else if("mdyn"===n){(0,s.readUint16)(e);var c=(0,s.readUint8)(e),u=(0,s.readUint8)(e);t.animationFrameFlags={propagateFrameOne:!c,unifyLayerPosition:(1&u)!=0,unifyLayerStyle:(2&u)!=0,unifyLayerVisibility:(4&u)!=0}}else if("tmln"===n){var i=(0,d.readVersionAndDescriptor)(e),f=i.timeScope,p={start:(0,d.frac)(f.Strt),duration:(0,d.frac)(f.duration),inTime:(0,d.frac)(f.inTime),outTime:(0,d.frac)(f.outTime),autoScope:i.autoScope,audioLevel:i.audioLevel};i.trackList&&(p.tracks=(0,d.parseTrackList)(i.trackList,!!e.logMissingFeatures)),t.timeline=p}else if("cmls"===n){var i=(0,d.readVersionAndDescriptor)(e);t.comps={settings:[]},i.origFXRefPoint&&(t.comps.originalEffectsReferencePoint={x:i.origFXRefPoint.Hrzn,y:i.origFXRefPoint.Vrtc});for(var h=0,g=i.layerSettings;h<g.length;h++){var m=g[h];t.comps.settings.push({compList:m.compList});var v=t.comps.settings[t.comps.settings.length-1];"enab"in m&&(v.enabled=m.enab),m.Ofst&&(v.offset={x:m.Ofst.Hrzn,y:m.Ofst.Vrtc}),m.FXRefPoint&&(v.effectsReferencePoint={x:m.FXRefPoint.Hrzn,y:m.FXRefPoint.Vrtc})}}else if("extn"===n){var i=(0,d.readVersionAndDescriptor)(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',n)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',n);(0,s.skipBytes)(e,r())})}(0);(0,s.skipBytes)(e,r())},function(e,t,r,n){var i=t.animationFrames,a=t.animationFrameFlags,o=t.timestamp,s=t.timeline,c=t.comps,u=0;i&&u++,a&&u++,s&&u++,void 0!==o&&u++,c&&u++,(0,l.writeUint32)(e,u),i&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"mlst"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,function(){for(var r,n={LaID:null!=(r=t.id)?r:0,LaSt:[]},a=0;a<i.length;a++){var o=i[a],s={};void 0!==o.enable&&(s.enab=o.enable),s.FrLs=o.frames,o.offset&&(s.Ofst=(0,d.xyToHorzVrtc)(o.offset)),o.referencePoint&&(s.FXRf=(0,d.xyToHorzVrtc)(o.referencePoint)),o.effects&&(s.Lefx=(0,d.serializeEffects)(o.effects,!1,!1)),void 0!==o.opacity&&(s.blendOptions={Opct:(0,d.unitsPercent)(o.opacity)}),n.LaSt.push(s)}(0,d.writeVersionAndDescriptor)(e,"","null",n)},!0)),a&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"mdyn"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,function(){(0,l.writeUint16)(e,0),(0,l.writeUint8)(e,15*!a.propagateFrameOne),(0,l.writeUint8)(e,!!a.unifyLayerPosition|2*!!a.unifyLayerStyle|4*!!a.unifyLayerVisibility)})),s&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"tmln"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,function(){var r={Vrsn:1,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},autoScope:s.autoScope,audioLevel:s.audioLevel};s.tracks&&(r.trackList=(0,d.serializeTrackList)(s.tracks));var i=n.layerToId.get(t)||t.id;if(!i)throw Error("You need to provide layer.id value whan writing document with animations");r.LyrI=i,(0,d.writeVersionAndDescriptor)(e,"","null",r,"anim")},!0)),void 0!==o&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"cust"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,function(){(0,d.writeVersionAndDescriptor)(e,"","metadata",{layerTime:o})},!0)),c&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"cmls"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,function(){var r=n.layerToId.get(t)||t.id;if(!r)throw Error("You need to provide layer.id value whan writing document with layer comps");var i={};c.originalEffectsReferencePoint&&(i.origFXRefPoint={Hrzn:c.originalEffectsReferencePoint.x,Vrtc:c.originalEffectsReferencePoint.y}),i.LyrI=r,i.layerSettings=[];for(var a=0,o=c.settings;a<o.length;a++){var s=o[a],l={};void 0!==s.enabled&&(l.enab=s.enabled),s.offset&&(l.Ofst={Hrzn:s.offset.x,Vrtc:s.offset.y}),s.effectsReferencePoint&&(l.FXRefPoint={Hrzn:s.effectsReferencePoint.x,Vrtc:s.effectsReferencePoint.y}),l.compList=s.compList,i.layerSettings.push(l)}(0,d.writeVersionAndDescriptor)(e,"","null",i)},!0))}),h("vstk",m("vectorStroke"),function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);t.vectorStroke={strokeEnabled:n.strokeEnabled,fillEnabled:n.fillEnabled,lineWidth:(0,d.parseUnits)(n.strokeStyleLineWidth),lineDashOffset:(0,d.parseUnits)(n.strokeStyleLineDashOffset),miterLimit:n.strokeStyleMiterLimit,lineCapType:d.strokeStyleLineCapType.decode(n.strokeStyleLineCapType),lineJoinType:d.strokeStyleLineJoinType.decode(n.strokeStyleLineJoinType),lineAlignment:d.strokeStyleLineAlignment.decode(n.strokeStyleLineAlignment),scaleLock:n.strokeStyleScaleLock,strokeAdjust:n.strokeStyleStrokeAdjust,lineDashSet:n.strokeStyleLineDashSet.map(d.parseUnits),blendMode:d.BlnM.decode(n.strokeStyleBlendMode),opacity:(0,d.parsePercent)(n.strokeStyleOpacity),content:(0,d.parseVectorContent)(n.strokeStyleContent),resolution:n.strokeStyleResolution},(0,s.skipBytes)(e,r())},function(e,t){var r,n,i,a=t.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:null!=(r=a.miterLimit)?r:100,strokeStyleLineCapType:d.strokeStyleLineCapType.encode(a.lineCapType),strokeStyleLineJoinType:d.strokeStyleLineJoinType.encode(a.lineJoinType),strokeStyleLineAlignment:d.strokeStyleLineAlignment.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:d.BlnM.encode(a.blendMode),strokeStyleOpacity:(0,d.unitsPercent)(null!=(n=a.opacity)?n:1),strokeStyleContent:(0,d.serializeVectorContent)(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:null!=(i=a.resolution)?i:72};(0,d.writeVersionAndDescriptor)(e,"","strokeStyle",o)}),h("artb",m("artboard"),function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e),i=n.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:n.guideIndeces,presetName:n.artboardPresetName,color:(0,d.parseColor)(n["Clr "]),backgroundType:n.artboardBackgroundType},(0,s.skipBytes)(e,r())},function(e,t){var r,n=t.artboard,i=n.rect,a={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:n.guideIndices||[],artboardPresetName:n.presetName||"","Clr ":(0,d.serializeColor)(n.color),artboardBackgroundType:null!=(r=n.backgroundType)?r:1};(0,d.writeVersionAndDescriptor)(e,"","artboard",a)}),h("sn2P",m("usingAlignedRendering"),function(e,t){return t.usingAlignedRendering=!!(0,s.readUint32)(e)},function(e,t){return(0,l.writeUint32)(e,+!!t.usingAlignedRendering)});var x=["unknown","vector","raster","image stack"];function S(e){var t,r,i,a,o,s,l=n(n({style:d.warpStyle.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:d.Ornt.decode(e.warpRotate),bounds:e.bounds&&{top:(0,d.parseUnitsOrNumber)(e.bounds["Top "]),left:(0,d.parseUnitsOrNumber)(e.bounds.Left),bottom:(0,d.parseUnitsOrNumber)(e.bounds.Btom),right:(0,d.parseUnitsOrNumber)(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(null!=e.deformNumRows||null!=e.deformNumCols)&&(l.deformNumRows=e.deformNumRows,l.deformNumCols=e.deformNumCols);var c=e.customEnvelopeWarp;if(c){l.customEnvelopeWarp={meshPoints:[]};for(var u=(null==(t=c.meshPoints.find(function(e){return"Hrzn"===e.type}))?void 0:t.values)||[],f=(null==(r=c.meshPoints.find(function(e){return"Vrtc"===e.type}))?void 0:r.values)||[],p=0;p<u.length;p++)l.customEnvelopeWarp.meshPoints.push({x:u[p],y:f[p]});(c.quiltSliceX||c.quiltSliceY)&&(l.customEnvelopeWarp.quiltSliceX=(null==(a=null==(i=c.quiltSliceX)?void 0:i[0])?void 0:a.values)||[],l.customEnvelopeWarp.quiltSliceY=(null==(s=null==(o=c.quiltSliceY)?void 0:o[0])?void 0:s.values)||[])}return l}function k(e){var t,r;return null!=e.deformNumCols||null!=e.deformNumRows||(null==(t=e.customEnvelopeWarp)?void 0:t.quiltSliceX)||(null==(r=e.customEnvelopeWarp)?void 0:r.quiltSliceY)}function I(e){var t=e.bounds,r=n(n({warpStyle:d.warpStyle.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:d.Ornt.encode(e.rotate),bounds:{"Top ":(0,d.unitsValue)(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:(0,d.unitsValue)(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:(0,d.unitsValue)(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:(0,d.unitsValue)(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),i=k(e);if(i){var a=r;a.deformNumRows=e.deformNumRows||0,a.deformNumCols=e.deformNumCols||0}var o=e.customEnvelopeWarp;if(o){var s=o.meshPoints||[];if(i){var a=r;a.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:o.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:o.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:s.map(function(e){return e.x})},{type:"Vrtc",values:s.map(function(e){return e.y})}]}}else r.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:s.map(function(e){return e.x})},{type:"Vrtc",values:s.map(function(e){return e.y})}]}}return r}function _(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function C(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}function F(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t}function D(e){return C(new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4))}function U(e){return{x:(0,d.parseUnits)(e.Hrzn),y:(0,d.parseUnits)(e.Vrtc)}}function A(e){return{_name:"",_classID:"Pnt ",Hrzn:(0,d.unitsValue)(e.x,"x"),Vrtc:(0,d.unitsValue)(e.y,"y")}}function E(e){return(0,d.unitsValue)(e.radius,"radius")}function P(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw Error("You must provide width and height of the linked image in placedLayer");var t=e.width,r=e.height,n=t/3,i=2*t/3,a=r/3,o=2*r/3;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:r,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:0,y:0},{x:n,y:0},{x:i,y:0},{x:t,y:0},{x:0,y:a},{x:n,y:a},{x:i,y:a},{x:t,y:a},{x:0,y:o},{x:n,y:o},{x:i,y:o},{x:t,y:o},{x:0,y:r},{x:n,y:r},{x:i,y:r},{x:t,y:r}]}}}function M(e){return{top:(0,s.readInt32)(e),left:(0,s.readInt32)(e),bottom:(0,s.readInt32)(e),right:(0,s.readInt32)(e)}}function B(e,t){(0,l.writeInt32)(e,t.top),(0,l.writeInt32)(e,t.left),(0,l.writeInt32)(e,t.bottom),(0,l.writeInt32)(e,t.right)}function O(e){h(e,function(t){return!!t.linkedFiles&&!!t.linkedFiles.length&&("lnkE"!==e||!!t.linkedFiles.some(function(e){return e.linkedFile}))},function(t,r,n,i){for(r.linkedFiles=r.linkedFiles||[];n()>8;){var a=v(t),o=t.offset,l=(0,s.readSignature)(t),c=(0,s.readInt32)(t),u=(0,s.readPascalString)(t,1),f=(0,s.readUnicodeString)(t),p=(0,s.readSignature)(t).trim(),h=(0,s.readSignature)(t).trim(),g=v(t),m=(0,s.readUint8)(t)?(0,d.readVersionAndDescriptor)(t):void 0,y="liFE"===l?(0,d.readVersionAndDescriptor)(t):void 0,w={id:u,name:f};if(p&&(w.type=p),h&&(w.creator=h),m&&(w.descriptor={compInfo:{compID:m.compInfo.compID,originalCompID:m.compInfo.originalCompID}}),"liFE"===l&&c>3){var b=(0,s.readInt32)(t),x=(0,s.readUint8)(t),S=(0,s.readUint8)(t),k=(0,s.readUint8)(t),I=(0,s.readUint8)(t),_=(0,s.readFloat64)(t),C=Math.floor(_),F=(_-C)*1e3;w.time=new Date(Date.UTC(b,x,S,k,I,C,F)).toISOString()}var D="liFE"===l?v(t):0;for("liFA"===l&&(0,s.skipBytes)(t,8),"liFD"===l&&(w.data=(0,s.readBytes)(t,g)),c>=5&&(w.childDocumentID=(0,s.readUnicodeString)(t)),c>=6&&(w.assetModTime=(0,s.readFloat64)(t)),c>=7&&(w.assetLockedState=(0,s.readUint8)(t)),"liFE"===l&&2===c&&(w.data=(0,s.readBytes)(t,D)),t.skipLinkedFilesData&&(w.data=void 0),"lnkE"===e&&(w.linkedFile={fileSize:D,name:(null==y?void 0:y["Nm  "])||"",fullPath:(null==y?void 0:y.fullPath)||"",originalPath:(null==y?void 0:y.originalPath)||"",relativePath:(null==y?void 0:y.relPath)||""}),r.linkedFiles.push(w);a%4;)a++;t.offset=o+a}(0,s.skipBytes)(t,n())},function(t,r){for(var n,i,a,o,s,c,u,f,p,h=0,g=r.linkedFiles;h<g.length;h++){var m=g[h];if("lnkE"===e==!!m.linkedFile){var v=2;null!=m.assetLockedState?v=7:null!=m.assetModTime?v=6:null!=m.childDocumentID?v=5:"lnkE"==e&&(v=3),y(t,0);var w=t.offset;if((0,l.writeSignature)(t,"lnkE"===e?"liFE":m.data?"liFD":"liFA"),(0,l.writeInt32)(t,v),!m.id||"string"!=typeof m.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(m.id))throw Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,l.writePascalString)(t,m.id,1),(0,l.writeUnicodeStringWithPadding)(t,m.name||""),(0,l.writeSignature)(t,m.type?"".concat(m.type,"    ").substring(0,4):"    "),(0,l.writeSignature)(t,m.creator?"".concat(m.creator,"    ").substring(0,4):"\0\0\0\0"),y(t,m.data?m.data.byteLength:0),m.descriptor&&m.descriptor.compInfo){var b={compInfo:{compID:m.descriptor.compInfo.compID,originalCompID:m.descriptor.compInfo.originalCompID}};(0,l.writeUint8)(t,1),(0,d.writeVersionAndDescriptor)(t,"","null",b)}else(0,l.writeUint8)(t,0);if("lnkE"===e){var b={descVersion:2,"Nm  ":null!=(i=null==(n=m.linkedFile)?void 0:n.name)?i:"",fullPath:null!=(o=null==(a=m.linkedFile)?void 0:a.fullPath)?o:"",originalPath:null!=(c=null==(s=m.linkedFile)?void 0:s.originalPath)?c:"",relPath:null!=(f=null==(u=m.linkedFile)?void 0:u.relativePath)?f:""};(0,d.writeVersionAndDescriptor)(t,"","ExternalFileLink",b);var x=m.time?new Date(m.time):new Date;(0,l.writeInt32)(t,x.getUTCFullYear()),(0,l.writeUint8)(t,x.getUTCMonth()),(0,l.writeUint8)(t,x.getUTCDate()),(0,l.writeUint8)(t,x.getUTCHours()),(0,l.writeUint8)(t,x.getUTCMinutes()),(0,l.writeFloat64)(t,x.getUTCSeconds()+x.getUTCMilliseconds()/1e3)}m.data?(0,l.writeBytes)(t,m.data):y(t,(null==(p=m.linkedFile)?void 0:p.fileSize)||0),v>=5&&(0,l.writeUnicodeStringWithPadding)(t,m.childDocumentID||""),v>=6&&(0,l.writeFloat64)(t,m.assetModTime||0),v>=7&&(0,l.writeUint8)(t,m.assetLockedState||0);var S=t.offset-w;for(t.view.setUint32(w-4,S,!1);S%4;)S++,(0,l.writeUint8)(t,0)}}})}function T(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}function L(e){return{shadowInput:(0,s.readInt16)(e),highlightInput:(0,s.readInt16)(e),shadowOutput:(0,s.readInt16)(e),highlightOutput:(0,s.readInt16)(e),midtoneInput:(0,s.readInt16)(e)/100}}function R(e,t){(0,l.writeInt16)(e,t.shadowInput),(0,l.writeInt16)(e,t.highlightInput),(0,l.writeInt16)(e,t.shadowOutput),(0,l.writeInt16)(e,t.highlightOutput),(0,l.writeInt16)(e,Math.round(100*t.midtoneInput))}function z(e){for(var t=(0,s.readUint16)(e),r=[],n=0;n<t;n++){var i=(0,s.readInt16)(e),a=(0,s.readInt16)(e);r.push({input:a,output:i})}return r}function V(e,t){(0,l.writeUint16)(e,t.length);for(var r=0;r<t.length;r++){var n=t[r];(0,l.writeUint16)(e,n.output),(0,l.writeUint16)(e,n.input)}}function N(e){return{a:(0,s.readInt16)(e),b:(0,s.readInt16)(e),c:(0,s.readInt16)(e),d:(0,s.readInt16)(e),hue:(0,s.readInt16)(e),saturation:(0,s.readInt16)(e),lightness:(0,s.readInt16)(e)}}function G(e,t){var r=t||{};(0,l.writeInt16)(e,r.a||0),(0,l.writeInt16)(e,r.b||0),(0,l.writeInt16)(e,r.c||0),(0,l.writeInt16)(e,r.d||0),(0,l.writeInt16)(e,r.hue||0),(0,l.writeInt16)(e,r.saturation||0),(0,l.writeInt16)(e,r.lightness||0)}function j(e){return{cyanRed:(0,s.readInt16)(e),magentaGreen:(0,s.readInt16)(e),yellowBlue:(0,s.readInt16)(e)}}function W(e,t){(0,l.writeInt16)(e,t.cyanRed||0),(0,l.writeInt16)(e,t.magentaGreen||0),(0,l.writeInt16)(e,t.yellowBlue||0)}function H(e){var t=(0,s.readInt16)(e),r=(0,s.readInt16)(e),n=(0,s.readInt16)(e);return(0,s.skipBytes)(e,2),{red:t,green:r,blue:n,constant:(0,s.readInt16)(e)}}function X(e,t){var r=t||{};(0,l.writeInt16)(e,r.red),(0,l.writeInt16)(e,r.green),(0,l.writeInt16)(e,r.blue),(0,l.writeZeros)(e,2),(0,l.writeInt16)(e,r.constant)}h("PlLd",m("placedLayer"),function(e,t,r){if("plcL"!==(0,s.readSignature)(e))throw Error("Invalid PlLd signature");if(3!==(0,s.readInt32)(e))throw Error("Invalid PlLd version");var n=(0,s.readPascalString)(e,1),i=(0,s.readInt32)(e),a=(0,s.readInt32)(e);(0,s.readInt32)(e);var o=(0,s.readInt32)(e);if(!x[o])throw Error("Invalid PlLd type");for(var l=[],c=0;c<8;c++)l.push((0,s.readFloat64)(e));var u=(0,s.readInt32)(e);if(0!==u)throw Error("Invalid Warp version ".concat(u));var f=(0,d.readVersionAndDescriptor)(e);t.placedLayer=t.placedLayer||{id:n,type:x[o],pageNumber:i,totalPages:a,transform:l,warp:S(f)},(0,s.skipBytes)(e,r())},function(e,t){var r=t.placedLayer;if((0,l.writeSignature)(e,"plcL"),(0,l.writeInt32)(e,3),!r.id||"string"!=typeof r.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(r.id))throw Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,l.writePascalString)(e,r.id,1),(0,l.writeInt32)(e,1),(0,l.writeInt32)(e,1),(0,l.writeInt32)(e,16),-1===x.indexOf(r.type))throw Error("Invalid placedLayer type");(0,l.writeInt32)(e,x.indexOf(r.type));for(var n=0;n<8;n++)(0,l.writeFloat64)(e,r.transform[n]);(0,l.writeInt32)(e,0);var i=P(r),a=k(i)?"quiltWarp":"warp";(0,d.writeVersionAndDescriptor)(e,"",a,I(i),a)}),h("SoLd",m("placedLayer"),function(e,t,r){if("soLD"!==(0,s.readSignature)(e))throw Error("Invalid SoLd type");var i,a=(0,s.readInt32)(e);if(4!==a&&5!==a)throw Error("Invalid SoLd version");var o=(0,d.readVersionAndDescriptor)(e,!0);t.placedLayer={id:o.Idnt,placed:o.placed,type:x[o.Type],pageNumber:o.PgNm,totalPages:o.totalPages,frameStep:(0,d.frac)(o.frameStep),duration:(0,d.frac)(o.duration),frameCount:o.frameCount,transform:o.Trnf,width:o["Sz  "].Wdth,height:o["Sz  "].Hght,resolution:(0,d.parseUnits)(o.Rslt),warp:S(o.quiltWarp||o.warp)},o.nonAffineTransform&&o.nonAffineTransform.some(function(e,t){return e!==o.Trnf[t]})&&(t.placedLayer.nonAffineTransform=o.nonAffineTransform),o.Crop&&(t.placedLayer.crop=o.Crop),o.comp&&(t.placedLayer.comp=o.comp),o.compInfo&&(t.placedLayer.compInfo={compID:o.compInfo.compID,originalCompID:o.compInfo.originalCompID}),o.filterFX&&(t.placedLayer.filter=(i=o.filterFX,{enabled:i.enab,validAtPosition:i.validAtPosition,maskEnabled:i.filterMaskEnable,maskLinked:i.filterMaskLinked,maskExtendWithWhite:i.filterMaskExtendWithWhite,list:i.filterFXList.map(function(t){return function(e,t){var r={name:e["Nm  "],opacity:(0,d.parsePercent)(e.blendOptions.Opct),blendMode:d.BlnM.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:(0,d.parseColor)(e.FrgC),backgroundColor:(0,d.parseColor)(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return n(n({},r),{type:"box blur",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"GsnB":return n(n({},r),{type:"gaussian blur",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"MtnB":return n(n({},r),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:(0,d.parseUnits)(e.Fltr.Dstn)}});case"RdlB":return n(n({},r),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:d.BlrM.decode(e.Fltr.BlrM),quality:d.BlrQ.decode(e.Fltr.BlrQ)}});case"shapeBlur":return n(n({},r),{type:"shape blur",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return n(n({},r),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:d.SmBQ.decode(e.Fltr.SmBQ),mode:d.SmBM.decode(e.Fltr.SmBM)}});case"surfaceBlur":return n(n({},r),{type:"surface blur",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return n(n({},r),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:d.DspM.decode(e.Fltr.DspM),undefinedAreas:d.UndA.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return n(n({},r),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return n(n({},r),{type:"polar coordinates",filter:{conversion:d.Cnvr.decode(e.Fltr.Cnvr)}});case"Rple":return n(n({},r),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:d.RplS.decode(e.Fltr.RplS)}});case"Shr ":return n(n({},r),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(e){return{x:e.Hrzn,y:e.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:d.UndA.decode(e.Fltr.UndA)}});case"Sphr":return n(n({},r),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:d.SphM.decode(e.Fltr.SphM)}});case"Twrl":return n(n({},r),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return n(n({},r),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:d.Wvtp.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:d.UndA.decode(e.Fltr.UndA)}});case"ZgZg":return n(n({},r),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:d.ZZTy.decode(e.Fltr.ZZTy)}});case"AdNs":return n(n({},r),{type:"add noise",filter:{amount:(0,d.parsePercent)(e.Fltr.Nose),distribution:d.Dstr.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return n(n({},r),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return n(n({},r),{type:"median",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"denoise":return n(n({},r),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:(0,d.parsePercent)(e.Fltr.ClNs),sharpenDetails:(0,d.parsePercent)(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(e){return n({channels:e.Chnl.map(d.Chnl.decode),amount:e.Amnt},e.EdgF?{preserveDetails:e.EdgF}:{})})}});case"ClrH":return n(n({},r),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return n(n({},r),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return n(n({},r),{type:"mezzotint",filter:{type:d.MztT.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return n(n({},r),{type:"mosaic",filter:{cellSize:(0,d.parseUnits)(e.Fltr.ClSz)}});case"Pntl":return n(n({},r),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return n(n({},r),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return n(n({},r),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return n(n({},r),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return n(n({},r),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:d.Lns.decode(e.Fltr["Lns "])}});case"smartSharpen":return n(n({},r),{type:"smart sharpen",filter:{amount:(0,d.parsePercent)(e.Fltr.Amnt),radius:(0,d.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:d.blurType.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:(0,d.parsePercent)(e.Fltr.sdwM.Amnt),tonalWidth:(0,d.parsePercent)(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:(0,d.parsePercent)(e.Fltr.hglM.Amnt),tonalWidth:(0,d.parsePercent)(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return n(n({},r),{type:"unsharp mask",filter:{amount:(0,d.parsePercent)(e.Fltr.Amnt),radius:(0,d.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return n(n({},r),{type:"diffuse",filter:{mode:d.DfsM.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return n(n({},r),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return n(n({},r),{type:"extrude",filter:{type:d.ExtT.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:d.ExtR.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return n(n({},r),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:d.FlCl.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return n(n({},r),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:d.CntE.decode(e.Fltr["Edg "])}});case"Wnd ":return n(n({},r),{type:"wind",filter:{method:d.WndM.decode(e.Fltr.WndM),direction:d.Drct.decode(e.Fltr.Drct)}});case"Dntr":return n(n({},r),{type:"de-interlace",filter:{eliminate:d.IntE.decode(e.Fltr.IntE),newFieldsBy:d.IntC.decode(e.Fltr.IntC)}});case"Cstm":return n(n({},r),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return n(n({},r),{type:"high pass",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"Mxm ":return n(n({},r),{type:"maximum",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"Mnm ":return n(n({},r),{type:"minimum",filter:{radius:(0,d.parseUnits)(e.Fltr["Rds "])}});case"Ofst":return n(n({},r),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:d.FlMd.decode(e.Fltr["Fl  "])}});case"rigidTransform":return n(n({},r),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(e){var t;return{rigidType:e.rigidType,originalVertexArray:D(e.originalVertexArray),deformedVertexArray:D(e.deformedVertexArray),indexArray:Array.from(new Uint32Array((t=e.indexArray).buffer.slice(t.byteOffset),0,t.byteLength/4)),pinOffsets:C(e.pinOffsets),posFinalPins:C(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,selectedPin:e.selectedPin,pinPosition:C(e.PinP),pinRotation:e.PnRt,pinOverlay:e.PnOv,pinDepth:e.PnDp,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{pathComponents:e.meshBoundaryPath.pathComponents.map(function(e){return{shapeOperation:e.shapeOperation.split(".")[1],paths:e.SbpL.map(function(e){return{closed:e.Clsp,points:e["Pts "].map(function(e){return{anchor:U(e.Anch),forward:U(e["Fwd "]),backward:U(e["Bwd "]),smooth:e.Smoo}})}})}})}}})}});case"PbPl":for(var i=[],a=e.Fltr,o=0;o<p.length&&a["PN".concat(p[o],"a")];o++)for(var s=0;s<p.length&&a["PN".concat(p[o]).concat(p[s])];s++)i.push({name:a["PN".concat(p[o]).concat(p[s])],value:a["PF".concat(p[o]).concat(p[s])]});return n(n({},r),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:i}});case"HsbP":return n(n({},r),{type:"hsb/hsl",filter:{inputMode:d.ClrS.decode(e.Fltr.Inpt),rowOrder:d.ClrS.decode(e.Fltr.Otpt)}});case"oilPaint":return n(n({},r),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return n(n({},r),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return n(n({},r),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(U),warpedVertices:e.Fltr.warpedVertices.map(U),quads:e.Fltr.quads.map(function(e){return e.indices})}});case"Crvs":return n(n({},r),{type:"curves",filter:n({presetKind:d.presetKindType.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(e){var t=e.Chnl.map(d.Chnl.decode);if(e["Crv "])return{channels:t,curve:e["Crv "].map(function(e){var t={x:e.Hrzn,y:e.Vrtc};return e.Cnty&&(t.curved=!0),t})};if(e.Mpng)return{channels:t,values:e.Mpng};throw Error("Unknown curve adjustment")})}:{})});case"BrgC":return n(n({},r),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(t.throwForMissingFeatures)throw Error("Unknown filter classId: ".concat(e.Fltr._classID));return}switch(e.filterID){case 0x41767267:return n(n({},r),{type:"average"});case 0x426c7220:return n(n({},r),{type:"blur"});case 0x426c724d:return n(n({},r),{type:"blur more"});case 0x44737063:return n(n({},r),{type:"despeckle"});case 0x46637420:return n(n({},r),{type:"facet"});case 0x4672676d:return n(n({},r),{type:"fragment"});case 0x53687270:return n(n({},r),{type:"sharpen"});case 0x53687245:return n(n({},r),{type:"sharpen edges"});case 0x5368724d:return n(n({},r),{type:"sharpen more"});case 0x466e6445:return n(n({},r),{type:"find edges"});case 0x536c727a:return n(n({},r),{type:"solarize"});case 0x4e545343:return n(n({},r),{type:"ntsc colors"});case 0x496e7672:return n(n({},r),{type:"invert"});default:if(t.throwForMissingFeatures)throw Error("Unknown filterID: ".concat(e.filterID))}}(t,e)}).filter(function(e){return!!e})})),(0,s.skipBytes)(e,r())},function(e,t){(0,l.writeSignature)(e,"soLD"),(0,l.writeInt32)(e,4);var r,i,a=t.placedLayer;if(!a.id||"string"!=typeof a.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(a.id))throw Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var o=n(n({Idnt:a.id,placed:null!=(r=a.placed)?r:a.id,PgNm:a.pageNumber||1,totalPages:a.totalPages||1},a.crop?{Crop:a.crop}:{}),{frameStep:a.frameStep||{numerator:0,denominator:600},duration:a.duration||{numerator:0,denominator:600},frameCount:a.frameCount||0,Annt:16,Type:x.indexOf(a.type),Trnf:a.transform,nonAffineTransform:null!=(i=a.nonAffineTransform)?i:a.transform,warp:I(P(a)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:a.width||0,Hght:a.height||0},Rslt:a.resolution?(0,d.unitsValue)(a.resolution,"resolution"):{units:"Density",value:72}});if(a.filter&&(o.filterFX={_name:"",_classID:"filterFXStyle",enab:a.filter.enabled,validAtPosition:a.filter.validAtPosition,filterMaskEnable:a.filter.maskEnabled,filterMaskLinked:a.filter.maskLinked,filterMaskExtendWithWhite:a.filter.maskExtendWithWhite,filterFXList:a.filter.list.map(function(e){return function(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:(0,d.unitsPercentF)(e.opacity),"Md  ":d.BlnM.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:(0,d.serializeColor)(e.foregroundColor),BckC:(0,d.serializeColor)(e.backgroundColor)};switch(e.type){case"average":return n(n({},t),{filterID:0x41767267});case"blur":return n(n({},t),{filterID:0x426c7220});case"blur more":return n(n({},t),{filterID:0x426c724d});case"box blur":return n(n({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":E(e.filter)},filterID:697});case"gaussian blur":return n(n({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":E(e.filter)},filterID:0x47736e42});case"motion blur":return n(n({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:(0,d.unitsValue)(e.filter.distance,"distance")},filterID:0x4d746e42});case"radial blur":return n(n({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:d.BlrM.encode(e.filter.method),BlrQ:d.BlrQ.encode(e.filter.quality)},filterID:0x52646c42});case"shape blur":return n(n({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":E(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return n(n({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:d.SmBQ.encode(e.filter.quality),SmBM:d.SmBM.encode(e.filter.mode)},filterID:0x536d7242});case"surface blur":return n(n({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":E(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return n(n({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:d.DspM.encode(e.filter.displacementMap),UndA:d.UndA.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:0x4473706c});case"pinch":return n(n({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:0x506e6368});case"polar coordinates":return n(n({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:d.Cnvr.encode(e.filter.conversion)},filterID:0x506c7220});case"ripple":return n(n({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:d.RplS.encode(e.filter.size)},filterID:0x52706c65});case"shear":return n(n({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(e){return{_name:"",_classID:"Pnt ",Hrzn:e.x,Vrtc:e.y}}),UndA:d.UndA.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:0x53687220});case"spherize":return n(n({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:d.SphM.encode(e.filter.mode)},filterID:0x53706872});case"twirl":return n(n({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:0x5477726c});case"wave":return n(n({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:d.Wvtp.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:d.UndA.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:0x57617665});case"zigzag":return n(n({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:d.ZZTy.encode(e.filter.style)},filterID:0x5a675a67});case"add noise":return n(n({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:d.Dstr.encode(e.filter.distribution),Nose:(0,d.unitsPercentF)(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:0x41644e73});case"despeckle":return n(n({},t),{filterID:0x44737063});case"dust and scratches":return n(n({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:0x44737453});case"median":return n(n({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":E(e.filter)},filterID:0x4d646e20});case"reduce noise":return n(n({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:(0,d.unitsPercentF)(e.filter.reduceColorNoise),Shrp:(0,d.unitsPercentF)(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(e){return n({_name:"",_classID:"channelDenoiseParams",Chnl:e.channels.map(function(e){return d.Chnl.encode(e)}),Amnt:e.amount},e.preserveDetails?{EdgF:e.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return n(n({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:0x436c7248});case"crystallize":return n(n({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:0x43727374});case"facet":return n(n({},t),{filterID:0x46637420});case"fragment":return n(n({},t),{filterID:0x4672676d});case"mezzotint":return n(n({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:d.MztT.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:0x4d7a746e});case"mosaic":return n(n({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:(0,d.unitsValue)(e.filter.cellSize,"cellSize")},filterID:0x4d736320});case"pointillize":return n(n({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:0x506e746c});case"clouds":return n(n({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:0x436c6473});case"difference clouds":return n(n({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:0x44667243});case"fibers":return n(n({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:0x46627273});case"lens flare":return n(n({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":d.Lns.encode(e.filter.lensType)},filterID:0x4c6e7346});case"sharpen":return n(n({},t),{filterID:0x53687270});case"sharpen edges":return n(n({},t),{filterID:0x53687245});case"sharpen more":return n(n({},t),{filterID:0x5368724d});case"smart sharpen":return n(n({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:(0,d.unitsPercentF)(e.filter.amount),"Rds ":E(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:d.blurType.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,d.unitsPercentF)(e.filter.shadow.fadeAmount),Wdth:(0,d.unitsPercentF)(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,d.unitsPercentF)(e.filter.highlight.fadeAmount),Wdth:(0,d.unitsPercentF)(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return n(n({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:(0,d.unitsPercentF)(e.filter.amount),"Rds ":E(e.filter),Thsh:e.filter.threshold},filterID:0x556e734d});case"diffuse":return n(n({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":d.DfsM.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:0x44667320});case"emboss":return n(n({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:0x456d6273});case"extrude":return n(n({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:d.ExtT.encode(e.filter.type),ExtR:d.ExtR.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:0x45787472});case"find edges":return n(n({},t),{filterID:0x466e6445});case"solarize":return n(n({},t),{filterID:0x536c727a});case"tiles":return n(n({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:d.FlCl.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:0x546c7320});case"trace contour":return n(n({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":d.CntE.encode(e.filter.edge)},filterID:0x54726343});case"wind":return n(n({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:d.WndM.encode(e.filter.method),Drct:d.Drct.encode(e.filter.direction)},filterID:0x576e6420});case"de-interlace":return n(n({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:d.IntE.encode(e.filter.eliminate),IntC:d.IntC.encode(e.filter.newFieldsBy)},filterID:0x446e7472});case"ntsc colors":return n(n({},t),{filterID:0x4e545343});case"invert":return n(n({},t),{filterID:0x496e7672});case"custom":return n(n({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:0x4373746d});case"high pass":return n(n({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":E(e.filter)},filterID:0x48676850});case"maximum":return n(n({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":E(e.filter)},filterID:0x4d786d20});case"minimum":return n(n({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":E(e.filter)},filterID:0x4d6e6d20});case"offset":return n(n({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":d.FlMd.encode(e.filter.undefinedAreas)},filterID:0x4f667374});case"puppet":return n(n({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(e){return{_name:"",_classID:"puppetShape",rigidType:e.rigidType,VrsM:1,VrsN:0,originalVertexArray:_(new Float32Array(F(e.originalVertexArray))),deformedVertexArray:_(new Float32Array(F(e.deformedVertexArray))),indexArray:_(new Uint32Array(e.indexArray)),pinOffsets:F(e.pinOffsets),posFinalPins:F(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,PinP:F(e.pinPosition),PnRt:e.pinRotation,PnOv:e.pinOverlay,PnDp:e.pinDepth,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:e.meshBoundaryPath.pathComponents.map(function(e){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(e.shapeOperation),SbpL:e.paths.map(function(e){return{_name:"",_classID:"Sbpl",Clsp:e.closed,"Pts ":e.points.map(function(e){return{_name:"",_classID:"Pthp",Anch:A(e.anchor),"Fwd ":A(e.forward),"Bwd ":A(e.backward),Smoo:e.smooth}})}})}})},selectedPin:e.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":for(var r={},i=0;i<e.filter.parameters.length;i++){var a=e.filter.parameters[i],o=a.name,s=a.value,l="".concat(p[Math.floor(i/p.length)]).concat(p[i%p.length]);r["PN".concat(l)]=o,r["PT".concat(l)]=0,r["PF".concat(l)]=s}return n(n({},t),{Fltr:n({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},r),filterID:0x5062506c});case"oil paint":return n(n({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return n(n({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:0x4c714679});case"perspective warp":return n(n({},t),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(A),warpedVertices:e.filter.warpedVertices.map(A),quads:e.filter.quads.map(function(e){return{indices:e}})},filterID:442});case"curves":return n(n({},t),{Fltr:n({_name:"Curves",_classID:"Crvs",presetKind:d.presetKindType.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(e){return"curve"in e?{_name:"",_classID:"CrvA",Chnl:e.channels.map(d.Chnl.encode),"Crv ":e.curve.map(function(e){return n({_name:"",_classID:"Pnt ",Hrzn:e.x,Vrtc:e.y},e.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:e.channels.map(d.Chnl.encode),Mpng:e.values}})}:{}),filterID:0x43727673});case"brightness/contrast":return n(n({},t),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:0x42726743});default:throw Error("Unknow filter type: ".concat(e.type))}}(e)})}),a.warp&&k(a.warp)){var s=I(a.warp);o.quiltWarp=s,o.warp={warpStyle:"warpStyle.warpNone",warpValue:s.warpValue,warpPerspective:s.warpPerspective,warpPerspectiveOther:s.warpPerspectiveOther,warpRotate:s.warpRotate,bounds:s.bounds,uOrder:s.uOrder,vOrder:s.vOrder}}else delete o.quiltWarp;a.comp&&(o.comp=a.comp),a.compInfo&&(o.compInfo=a.compInfo),(0,d.writeVersionAndDescriptor)(e,"","null",o,o.quiltWarp?"quiltWarp":"warp")}),g("SoLE","SoLd"),h("fxrp",m("referencePoint"),function(e,t){t.referencePoint={x:(0,s.readFloat64)(e),y:(0,s.readFloat64)(e)}},function(e,t){(0,l.writeFloat64)(e,t.referencePoint.x),(0,l.writeFloat64)(e,t.referencePoint.y)}),h("Lr16",function(){return!1},function(e,t,r,n,i){(0,s.readLayerInfo)(e,n,i)},function(e,t){}),h("Lr32",function(){return!1},function(e,t,r,n,i){(0,s.readLayerInfo)(e,n,i)},function(e,t){}),h("LMsk",m("userMask"),function(e,t){if(t.userMask={colorSpace:(0,s.readColor)(e),opacity:(0,s.readUint16)(e)/255},128!==(0,s.readUint8)(e))throw Error("Invalid flag value");(0,s.skipBytes)(e,1)},function(e,t){var r=t.userMask;(0,l.writeColor)(e,r.colorSpace),(0,l.writeUint16)(e,255*(0,o.clamp)(r.opacity,0,1)),(0,l.writeUint8)(e,128),(0,l.writeZeros)(e,1)}),o.MOCK_HANDLERS?h("Patt",function(e){return void 0!==e._Patt},function(e,t,r){t._Patt=(0,s.readBytes)(e,r())},function(e,t){return!1}):h("Patt",function(e){return!e},function(e,t,r){r()&&(0,s.skipBytes)(e,r())},function(e,t){}),o.MOCK_HANDLERS&&h("CAI ",function(e){return void 0!==e._CAI_},function(e,t,r){t._CAI_=(0,s.readBytes)(e,r())},function(e,t){(0,l.writeBytes)(e,t._CAI_)}),o.MOCK_HANDLERS&&h("OCIO",function(e){return void 0!==e._OCIO},function(e,t,r){t._OCIO=(0,s.readBytes)(e,r())},function(e,t){(0,l.writeBytes)(e,t._OCIO)}),o.MOCK_HANDLERS&&h("GenI",function(e){return void 0!==e._GenI},function(e,t,r){t._GenI=(0,s.readBytes)(e,r())},function(e,t){(0,l.writeBytes)(e,t._GenI)}),h("Anno",function(e){return void 0!==e.annotations},function(e,t,r){var n=(0,s.readUint16)(e),i=(0,s.readUint16)(e);if(2!==n||1!==i)throw Error("Invalid Anno version");for(var a=(0,s.readUint32)(e),o=[],l=0;l<a;l++){(0,s.readUint32)(e);var d=(0,s.readSignature)(e),c=!!(0,s.readUint8)(e);(0,s.readUint8)(e),(0,s.readUint16)(e);var u=M(e),f=M(e),p=(0,s.readColor)(e),h=(0,s.readPascalString)(e,2),g=(0,s.readPascalString)(e,2),m=(0,s.readPascalString)(e,2);(0,s.readUint32)(e),(0,s.readSignature)(e);var v=(0,s.readUint32)(e),y=void 0;if("txtA"===d)v>=2&&65279===(0,s.readUint16)(e)?y=(0,s.readUnicodeStringWithLength)(e,(v-2)/2):(e.offset-=2,y=(0,s.readAsciiString)(e,v)),y=y.replace(/\r/g,"\n");else if("sndA"===d)y=(0,s.readBytes)(e,v);else throw Error("Unknown annotation type");o.push({type:"txtA"===d?"text":"sound",open:c,iconLocation:u,popupLocation:f,color:p,author:h,name:g,date:m,data:y})}t.annotations=o,(0,s.skipBytes)(e,r())},function(e,t){var r=t.annotations;(0,l.writeUint16)(e,2),(0,l.writeUint16)(e,1),(0,l.writeUint32)(e,r.length);for(var n=0;n<r.length;n++){var i=r[n],a="sound"===i.type;if(a&&!(i.data instanceof Uint8Array))throw Error("Sound annotation data should be Uint8Array");if(!a&&"string"!=typeof i.data)throw Error("Text annotation data should be string");var o=e.offset;(0,l.writeUint32)(e,0),(0,l.writeSignature)(e,a?"sndA":"txtA"),(0,l.writeUint8)(e,+!!i.open),(0,l.writeUint8)(e,28),(0,l.writeUint16)(e,1),B(e,i.iconLocation),B(e,i.popupLocation),(0,l.writeColor)(e,i.color),(0,l.writePascalString)(e,i.author||"",2),(0,l.writePascalString)(e,i.name||"",2),(0,l.writePascalString)(e,i.date||"",2);var s=e.offset;(0,l.writeUint32)(e,0),(0,l.writeSignature)(e,a?"sndM":"txtC"),(0,l.writeUint32)(e,0);var d=e.offset;if(a)(0,l.writeBytes)(e,i.data);else{(0,l.writeUint16)(e,65279);for(var c=i.data.replace(/\n/g,"\r"),u=0;u<c.length;u++)(0,l.writeUint16)(e,c.charCodeAt(u))}e.view.setUint32(o,e.offset-o,!1),e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(d-4,e.offset-d,!1)}}),O("lnk2"),O("lnkE"),g("lnkD","lnk2"),g("lnk3","lnk2"),h("pths",m("pathList"),function(e,t){(0,d.readVersionAndDescriptor)(e,!0),t.pathList=[]},function(e,t){(0,d.writeVersionAndDescriptor)(e,"","pathsDataClass",{pathList:[]})}),h("lyvr",m("version"),function(e,t){return t.version=(0,s.readUint32)(e)},function(e,t){return(0,l.writeUint32)(e,t.version)}),h("lfxs",function(){return!1},function(e,t,r){if(0!==(0,s.readUint32)(e))throw Error("Invalid lfxs version");var n=(0,d.readVersionAndDescriptor)(e);t.effects=(0,d.parseEffects)(n,!!e.logMissingFeatures),(0,s.skipBytes)(e,r())},function(e,t,r,n){var i=(0,d.serializeEffects)(t.effects,!!n.logMissingFeatures,!0);(0,l.writeUint32)(e,0),(0,d.writeVersionAndDescriptor)(e,"","null",i)}),h("brit",T("brightness/contrast"),function(e,t,r){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:(0,s.readInt16)(e),contrast:(0,s.readInt16)(e),meanValue:(0,s.readInt16)(e),labColorOnly:!!(0,s.readUint8)(e),useLegacy:!0}),(0,s.skipBytes)(e,r())},function(e,t){var r,n=t.adjustment;(0,l.writeInt16)(e,n.brightness||0),(0,l.writeInt16)(e,n.contrast||0),(0,l.writeInt16)(e,null!=(r=n.meanValue)?r:127),(0,l.writeUint8)(e,+!!n.labColorOnly),(0,l.writeZeros)(e,1)}),h("levl",T("levels"),function(e,t,r){if(2!==(0,s.readUint16)(e))throw Error("Invalid levl version");t.adjustment=n(n({},t.adjustment),{type:"levels",rgb:L(e),red:L(e),green:L(e),blue:L(e)}),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment,n={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};(0,l.writeUint16)(e,2),R(e,r.rgb||n),R(e,r.red||n),R(e,r.blue||n),R(e,r.green||n);for(var i=0;i<59;i++)R(e,n)}),h("curv",T("curves"),function(e,t,r){if((0,s.readUint8)(e),1!==(0,s.readUint16)(e))throw Error("Invalid curv version");(0,s.readUint16)(e);var i=(0,s.readUint16)(e),a={type:"curves"};1&i&&(a.rgb=z(e)),2&i&&(a.red=z(e)),4&i&&(a.green=z(e)),8&i&&(a.blue=z(e)),t.adjustment=n(n({},t.adjustment),a),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment,n=r.rgb,i=r.red,a=r.green,o=r.blue,s=0,d=0;n&&n.length&&(s|=1,d++),i&&i.length&&(s|=2,d++),a&&a.length&&(s|=4,d++),o&&o.length&&(s|=8,d++),(0,l.writeUint8)(e,0),(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,0),(0,l.writeUint16)(e,s),n&&n.length&&V(e,n),i&&i.length&&V(e,i),a&&a.length&&V(e,a),o&&o.length&&V(e,o),(0,l.writeSignature)(e,"Crv "),(0,l.writeUint16)(e,4),(0,l.writeUint16)(e,0),(0,l.writeUint16)(e,d),n&&n.length&&((0,l.writeUint16)(e,0),V(e,n)),i&&i.length&&((0,l.writeUint16)(e,1),V(e,i)),a&&a.length&&((0,l.writeUint16)(e,2),V(e,a)),o&&o.length&&((0,l.writeUint16)(e,3),V(e,o)),(0,l.writeZeros)(e,2)}),h("expA",T("exposure"),function(e,t,r){if(1!==(0,s.readUint16)(e))throw Error("Invalid expA version");t.adjustment=n(n({},t.adjustment),{type:"exposure",exposure:(0,s.readFloat32)(e),offset:(0,s.readFloat32)(e),gamma:(0,s.readFloat32)(e)}),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeFloat32)(e,r.exposure),(0,l.writeFloat32)(e,r.offset),(0,l.writeFloat32)(e,r.gamma),(0,l.writeZeros)(e,2)}),h("vibA",T("vibrance"),function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);t.adjustment={type:"vibrance"},void 0!==n.vibrance&&(t.adjustment.vibrance=n.vibrance),void 0!==n.Strt&&(t.adjustment.saturation=n.Strt),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment,n={};void 0!==r.vibrance&&(n.vibrance=r.vibrance),void 0!==r.saturation&&(n.Strt=r.saturation),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),h("hue2",T("hue/saturation"),function(e,t,r){if(2!==(0,s.readUint16)(e))throw Error("Invalid hue2 version");t.adjustment=n(n({},t.adjustment),{type:"hue/saturation",master:N(e),reds:N(e),yellows:N(e),greens:N(e),cyans:N(e),blues:N(e),magentas:N(e)}),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,2),G(e,r.master),G(e,r.reds),G(e,r.yellows),G(e,r.greens),G(e,r.cyans),G(e,r.blues),G(e,r.magentas)}),h("blnc",T("color balance"),function(e,t,r){t.adjustment={type:"color balance",shadows:j(e),midtones:j(e),highlights:j(e),preserveLuminosity:!!(0,s.readUint8)(e)},(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment;W(e,r.shadows||{}),W(e,r.midtones||{}),W(e,r.highlights||{}),(0,l.writeUint8)(e,+!!r.preserveLuminosity),(0,l.writeZeros)(e,1)}),h("blwh",T("black & white"),function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);t.adjustment={type:"black & white",reds:n["Rd  "],yellows:n.Yllw,greens:n["Grn "],cyans:n["Cyn "],blues:n["Bl  "],magentas:n.Mgnt,useTint:!!n.useTint,presetKind:n.bwPresetKind,presetFileName:n.blackAndWhitePresetFileName},void 0!==n.tintColor&&(t.adjustment.tintColor=(0,d.parseColor)(n.tintColor)),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment,n={"Rd  ":r.reds||0,Yllw:r.yellows||0,"Grn ":r.greens||0,"Cyn ":r.cyans||0,"Bl  ":r.blues||0,Mgnt:r.magentas||0,useTint:!!r.useTint,tintColor:(0,d.serializeColor)(r.tintColor),bwPresetKind:r.presetKind||0,blackAndWhitePresetFileName:r.presetFileName||""};(0,d.writeVersionAndDescriptor)(e,"","null",n)}),h("phfl",T("photo filter"),function(e,t,r){var n=(0,s.readUint16)(e);if(2!==n&&3!==n)throw Error("Invalid phfl version");t.adjustment={type:"photo filter",color:2===n?(0,s.readColor)(e):{l:(0,s.readInt32)(e)/100,a:(0,s.readInt32)(e)/100,b:(0,s.readInt32)(e)/100},density:(0,s.readUint32)(e)/100,preserveLuminosity:!!(0,s.readUint8)(e)},(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,2),(0,l.writeColor)(e,r.color||{l:0,a:0,b:0}),(0,l.writeUint32)(e,100*(r.density||0)),(0,l.writeUint8)(e,+!!r.preserveLuminosity),(0,l.writeZeros)(e,3)}),h("mixr",T("channel mixer"),function(e,t,r){if(1!==(0,s.readUint16)(e))throw Error("Invalid mixr version");var i=t.adjustment=n(n({},t.adjustment),{type:"channel mixer",monochrome:!!(0,s.readUint16)(e)});i.monochrome||(i.red=H(e),i.green=H(e),i.blue=H(e)),i.gray=H(e),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,+!!r.monochrome),r.monochrome?(X(e,r.gray),(0,l.writeZeros)(e,30)):(X(e,r.red),X(e,r.green),X(e,r.blue),X(e,r.gray))});var K=(0,o.createEnum)("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),Z=(0,o.createEnum)("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Y=(0,o.createEnum)("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});h("clrL",T("color lookup"),function(e,t,r){if(1!==(0,s.readUint16)(e))throw Error("Invalid clrL version");var n=(0,d.readVersionAndDescriptor)(e);t.adjustment={type:"color lookup"};var i=t.adjustment;void 0!==n.lookupType&&(i.lookupType=K.decode(n.lookupType)),void 0!==n["Nm  "]&&(i.name=n["Nm  "]),void 0!==n.Dthr&&(i.dither=n.Dthr),void 0!==n.profile&&(i.profile=n.profile),void 0!==n.LUTFormat&&(i.lutFormat=Z.decode(n.LUTFormat)),void 0!==n.dataOrder&&(i.dataOrder=Y.decode(n.dataOrder)),void 0!==n.tableOrder&&(i.tableOrder=Y.decode(n.tableOrder)),void 0!==n.LUT3DFileData&&(i.lut3DFileData=n.LUT3DFileData),void 0!==n.LUT3DFileName&&(i.lut3DFileName=n.LUT3DFileName),(0,s.skipBytes)(e,r())},function(e,t){var r=t.adjustment,n={};void 0!==r.lookupType&&(n.lookupType=K.encode(r.lookupType)),void 0!==r.name&&(n["Nm  "]=r.name),void 0!==r.dither&&(n.Dthr=r.dither),void 0!==r.profile&&(n.profile=r.profile),void 0!==r.lutFormat&&(n.LUTFormat=Z.encode(r.lutFormat)),void 0!==r.dataOrder&&(n.dataOrder=Y.encode(r.dataOrder)),void 0!==r.tableOrder&&(n.tableOrder=Y.encode(r.tableOrder)),void 0!==r.lut3DFileData&&(n.LUT3DFileData=r.lut3DFileData),void 0!==r.lut3DFileName&&(n.LUT3DFileName=r.lut3DFileName),(0,l.writeUint16)(e,1),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),h("nvrt",T("invert"),function(e,t,r){t.adjustment={type:"invert"},(0,s.skipBytes)(e,r())},function(){}),h("post",T("posterize"),function(e,t,r){t.adjustment={type:"posterize",levels:(0,s.readUint16)(e)},(0,s.skipBytes)(e,r())},function(e,t){var r,n=t.adjustment;(0,l.writeUint16)(e,null!=(r=n.levels)?r:4),(0,l.writeZeros)(e,2)}),h("thrs",T("threshold"),function(e,t,r){t.adjustment={type:"threshold",level:(0,s.readUint16)(e)},(0,s.skipBytes)(e,r())},function(e,t){var r,n=t.adjustment;(0,l.writeUint16)(e,null!=(r=n.level)?r:128),(0,l.writeZeros)(e,2)});var q=["","","","rgb","hsb","","lab"];function $(e){return{c:(0,s.readInt16)(e),m:(0,s.readInt16)(e),y:(0,s.readInt16)(e),k:(0,s.readInt16)(e)}}function J(e,t){var r=t||{};(0,l.writeInt16)(e,r.c),(0,l.writeInt16)(e,r.m),(0,l.writeInt16)(e,r.y),(0,l.writeInt16)(e,r.k)}function Q(e){return Object.keys(e).map(function(t){return e[t]}).some(function(e){return Array.isArray(e)&&e.length>1})}h("grdm",T("gradient map"),function(e,t,r){var n=(0,s.readUint16)(e);if(1!==n&&3!==n)throw Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!(0,s.readUint8)(e),i.dither=!!(0,s.readUint8)(e);var a=!!(0,s.readUint8)(e);if(e.offset--,a){var o=(0,s.readSignature)(e);i.method=d.gradientInterpolationMethodType.decode(o)}i.name=(0,s.readUnicodeString)(e),i.colorStops=[],i.opacityStops=[];for(var l=(0,s.readUint16)(e),c=0;c<l;c++)i.colorStops.push({location:(0,s.readUint32)(e),midpoint:(0,s.readUint32)(e)/100,color:(0,s.readColor)(e)}),(0,s.skipBytes)(e,2);for(var u=(0,s.readUint16)(e),c=0;c<u;c++)i.opacityStops.push({location:(0,s.readUint32)(e),midpoint:(0,s.readUint32)(e)/100,opacity:(0,s.readUint16)(e)/255});if(2!==(0,s.readUint16)(e))throw Error("Invalid grdm expansion count");var f=(0,s.readUint16)(e);if(i.smoothness=f/4096,32!==(0,s.readUint16)(e))throw Error("Invalid grdm length");i.gradientType=(0,s.readUint16)(e)?"noise":"solid",i.randomSeed=(0,s.readUint32)(e),i.addTransparency=!!(0,s.readUint16)(e),i.restrictColors=!!(0,s.readUint16)(e),i.roughness=(0,s.readUint32)(e)/4096,i.colorModel=q[(0,s.readUint16)(e)]||"rgb",i.min=[(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768],i.max=[(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768],(0,s.skipBytes)(e,r());for(var p=0,h=i.colorStops;p<h.length;p++){var g=h[p];g.location/=f}for(var m=0,v=i.opacityStops;m<v.length;m++){var g=v[m];g.location/=f}t.adjustment=i},function(e,t){var r,n,i,a=t.adjustment;(0,l.writeUint16)(e,void 0!==a.method?3:1),(0,l.writeUint8)(e,+!!a.reverse),(0,l.writeUint8)(e,+!!a.dither),void 0!==a.method&&(0,l.writeSignature)(e,d.gradientInterpolationMethodType.encode(a.method)),(0,l.writeUnicodeStringWithPadding)(e,a.name||""),(0,l.writeUint16)(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round((null!=(r=a.smoothness)?r:1)*4096),s=0,c=a.colorStops||[];s<c.length;s++){var u=c[s];(0,l.writeUint32)(e,Math.round(u.location*o)),(0,l.writeUint32)(e,Math.round(100*u.midpoint)),(0,l.writeColor)(e,u.color),(0,l.writeZeros)(e,2)}(0,l.writeUint16)(e,a.opacityStops&&a.opacityStops.length||0);for(var f=0,p=a.opacityStops||[];f<p.length;f++){var u=p[f];(0,l.writeUint32)(e,Math.round(u.location*o)),(0,l.writeUint32)(e,Math.round(100*u.midpoint)),(0,l.writeUint16)(e,Math.round(255*u.opacity))}(0,l.writeUint16)(e,2),(0,l.writeUint16)(e,o),(0,l.writeUint16)(e,32),(0,l.writeUint16)(e,+("noise"===a.gradientType)),(0,l.writeUint32)(e,a.randomSeed||0),(0,l.writeUint16)(e,+!!a.addTransparency),(0,l.writeUint16)(e,+!!a.restrictColors),(0,l.writeUint32)(e,Math.round((null!=(n=a.roughness)?n:1)*4096));var h=q.indexOf(null!=(i=a.colorModel)?i:"rgb");(0,l.writeUint16)(e,-1===h?3:h);for(var g=0;g<4;g++)(0,l.writeUint16)(e,Math.round(32768*(a.min&&a.min[g]||0)));for(var g=0;g<4;g++)(0,l.writeUint16)(e,Math.round(32768*(a.max&&a.max[g]||0)));(0,l.writeZeros)(e,4)}),h("selc",T("selective color"),function(e,t){if(1!==(0,s.readUint16)(e))throw Error("Invalid selc version");var r=(0,s.readUint16)(e)?"absolute":"relative";(0,s.skipBytes)(e,8),t.adjustment={type:"selective color",mode:r,reds:$(e),yellows:$(e),greens:$(e),cyans:$(e),blues:$(e),magentas:$(e),whites:$(e),neutrals:$(e),blacks:$(e)}},function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,+("absolute"===r.mode)),(0,l.writeZeros)(e,8),J(e,r.reds),J(e,r.yellows),J(e,r.greens),J(e,r.cyans),J(e,r.blues),J(e,r.magentas),J(e,r.whites),J(e,r.neutrals),J(e,r.blacks)}),h("CgEd",function(e){var t=e.adjustment;return!!t&&("brightness/contrast"===t.type&&!t.useLegacy||("levels"===t.type||"curves"===t.type||"exposure"===t.type||"channel mixer"===t.type||"hue/saturation"===t.type)&&void 0!==t.presetFileName)},function(e,t,r){var i=(0,d.readVersionAndDescriptor)(e);if(1!==i.Vrsn)throw Error("Invalid CgEd version");"presetFileName"in i?t.adjustment=n(n({},t.adjustment),{presetKind:i.presetKind,presetFileName:i.presetFileName}):"curvesPresetFileName"in i?t.adjustment=n(n({},t.adjustment),{presetKind:i.curvesPresetKind,presetFileName:i.curvesPresetFileName}):"mixerPresetFileName"in i?t.adjustment=n(n({},t.adjustment),{presetKind:i.mixerPresetKind,presetFileName:i.mixerPresetFileName}):t.adjustment={type:"brightness/contrast",brightness:i.Brgh,contrast:i.Cntr,meanValue:i.means,useLegacy:!!i.useLegacy,labColorOnly:!!i["Lab "],auto:!!i.Auto},(0,s.skipBytes)(e,r())},function(e,t){var r,n,i,a,o=t.adjustment;if("levels"===o.type||"exposure"===o.type||"hue/saturation"===o.type){var s={Vrsn:1,presetKind:null!=(r=o.presetKind)?r:1,presetFileName:o.presetFileName||""};(0,d.writeVersionAndDescriptor)(e,"","null",s)}else if("curves"===o.type){var s={Vrsn:1,curvesPresetKind:null!=(n=o.presetKind)?n:1,curvesPresetFileName:o.presetFileName||""};(0,d.writeVersionAndDescriptor)(e,"","null",s)}else if("channel mixer"===o.type){var s={Vrsn:1,mixerPresetKind:null!=(i=o.presetKind)?i:1,mixerPresetFileName:o.presetFileName||""};(0,d.writeVersionAndDescriptor)(e,"","null",s)}else if("brightness/contrast"===o.type){var s={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:null!=(a=o.meanValue)?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto};(0,d.writeVersionAndDescriptor)(e,"","null",s)}else throw Error("Unhandled CgEd case")}),h("Txt2",m("engineData"),function(e,t,r,n){var a,o=(0,s.readBytes)(e,r());t.engineData=(0,i.fromByteArray)(o);var l=(a=[],!function e(t){var r;if(t.children)for(var n=0,i=t.children;n<i.length;n++){var o=i[n];(null==(r=o.text)?void 0:r.index)!==void 0&&(a[o.text.index]=o),e(o)}}(n),a),d=(0,c.parseEngineData)(o),u=(0,f.decodeEngineData2)(d).ResourceDict.TextFrameSet;if(u)for(var p=0;p<u.length;p++){var h=l[p];u[p].path&&(null==h?void 0:h.text)&&(h.text.textPath=u[p].path)}},function(e,t){var r=(0,i.toByteArray)(t.engineData);(0,l.writeBytes)(e,r)}),h("FEid",m("filterEffectsMasks"),function(e,t,r){var n=(0,s.readInt32)(e);if(n<1||n>3)throw Error("Invalid filterEffects version ".concat(n));for(t.filterEffectsMasks=[];r()>8;){if((0,s.readUint32)(e))throw Error("filterEffects: 64 bit length is not supported");var i=(0,s.readUint32)(e),a=e.offset+i,o=(0,s.readPascalString)(e,1),l=(0,s.readInt32)(e);if(1!==l)throw Error("Invalid filterEffect version ".concat(l));if((0,s.readUint32)(e))throw Error("filterEffect: 64 bit length is not supported");(0,s.readUint32)(e);for(var d=(0,s.readInt32)(e),c=(0,s.readInt32)(e),u=(0,s.readInt32)(e),f=(0,s.readInt32)(e),p=(0,s.readInt32)(e),h=(0,s.readInt32)(e),g=[],m=0;m<h+2;m++)if((0,s.readInt32)(e)){if((0,s.readUint32)(e))throw Error("filterEffect: 64 bit length is not supported");var v=(0,s.readUint32)(e);if(!v)throw Error("filterEffect: Empty channel");var y=(0,s.readUint16)(e),w=(0,s.readBytes)(e,v-2);g.push({compressionMode:y,data:w})}else g.push(void 0);if(t.filterEffectsMasks.push({id:o,top:d,left:c,bottom:u,right:f,depth:p,channels:g}),e.offset<a&&(0,s.readUint8)(e)){var b=(0,s.readInt32)(e),x=(0,s.readInt32)(e),S=(0,s.readInt32)(e),k=(0,s.readInt32)(e);if((0,s.readUint32)(e))throw Error("filterEffect: 64 bit length is not supported");var I=(0,s.readUint32)(e),y=(0,s.readUint16)(e),w=(0,s.readBytes)(e,I-2);t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={top:b,left:x,bottom:S,right:k,compressionMode:y,data:w}}e.offset=a;for(var _=i;_%4;)e.offset++,_++}},function(e,t){var r;(0,l.writeInt32)(e,3);for(var n=0,i=t.filterEffectsMasks;n<i.length;n++){var a=i[n];(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,0);var o=e.offset;(0,l.writePascalString)(e,a.id,1),(0,l.writeInt32)(e,1),(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,0);var s=e.offset;(0,l.writeInt32)(e,a.top),(0,l.writeInt32)(e,a.left),(0,l.writeInt32)(e,a.bottom),(0,l.writeInt32)(e,a.right),(0,l.writeInt32)(e,a.depth);var d=Math.max(0,a.channels.length-2);(0,l.writeInt32)(e,d);for(var c=0;c<d+2;c++){var u=a.channels[c];(0,l.writeInt32)(e,+!!u),u&&((0,l.writeUint32)(e,0),(0,l.writeUint32)(e,u.data.length+2),(0,l.writeUint16)(e,u.compressionMode),(0,l.writeBytes)(e,u.data))}e.view.setUint32(s-4,e.offset-s,!1);var f=null==(r=t.filterEffectsMasks[t.filterEffectsMasks.length-1])?void 0:r.extra;f&&((0,l.writeUint8)(e,1),(0,l.writeInt32)(e,f.top),(0,l.writeInt32)(e,f.left),(0,l.writeInt32)(e,f.bottom),(0,l.writeInt32)(e,f.right),(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,f.data.byteLength+2),(0,l.writeUint16)(e,f.compressionMode),(0,l.writeBytes)(e,f.data));var p=e.offset-o;for(e.view.setUint32(o-4,p,!1);p%4;)(0,l.writeZeros)(e,1),p++}}),g("FXid","FEid"),h("FMsk",m("filterMask"),function(e,t){t.filterMask={colorSpace:(0,s.readColor)(e),opacity:(0,s.readUint16)(e)/255}},function(e,t){var r;(0,l.writeColor)(e,t.filterMask.colorSpace),(0,l.writeUint16)(e,255*(0,o.clamp)(null!=(r=t.filterMask.opacity)?r:1,0,1))}),h("artd",function(e){return void 0!==e.artboards},function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);t.artboards={count:n["Cnt "],autoExpandOffset:{horizontal:n.autoExpandOffset.Hrzn,vertical:n.autoExpandOffset.Vrtc},origin:{horizontal:n.origin.Hrzn,vertical:n.origin.Vrtc},autoExpandEnabled:n.autoExpandEnabled,autoNestEnabled:n.autoNestEnabled,autoPositionEnabled:n.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!n.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:(0,d.parseColor)(n.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:n.docDefaultNewArtboardBackgroundType},(0,s.skipBytes)(e,r())},function(e,t){var r,n,i,a,o,s=t.artboards,l={"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:null==(r=s.autoExpandEnabled)||r,autoNestEnabled:null==(n=s.autoNestEnabled)||n,autoPositionEnabled:null==(i=s.autoPositionEnabled)||i,shrinkwrapOnSaveEnabled:null==(a=s.shrinkwrapOnSaveEnabled)||a,docDefaultNewArtboardBackgroundColor:(0,d.serializeColor)(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:null!=(o=s.docDefaultNewArtboardBackgroundType)?o:1};(0,d.writeVersionAndDescriptor)(e,"","null",l,"artd")}),e.exports.hasMultiEffects=Q,h("lfx2",function(e){return void 0!==e.effects&&!Q(e.effects)},function(e,t,r){if(0!==(0,s.readUint32)(e))throw Error("Invalid lfx2 version");var n=(0,d.readVersionAndDescriptor)(e);t.effects=(0,d.parseEffects)(n,!!e.logMissingFeatures),(0,s.skipBytes)(e,r())},function(e,t,r,n){var i=(0,d.serializeEffects)(t.effects,!!n.logMissingFeatures,!0);(0,l.writeUint32)(e,0),(0,d.writeVersionAndDescriptor)(e,"","null",i)}),h("cinf",m("compositorUsed"),function(e,t,r){var n=(0,d.readVersionAndDescriptor)(e);function i(e){return e.split(".")[1]}t.compositorUsed={description:n.description,reason:n.reason,engine:i(n.Engn)},n.Vrsn&&(t.compositorUsed.version=n.Vrsn),n.psVersion&&(t.compositorUsed.photoshopVersion=n.psVersion),n.enableCompCore&&(t.compositorUsed.enableCompCore=i(n.enableCompCore)),n.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(t.compositorUsed.enableCompCoreThreads=i(n.enableCompCoreThreads)),n.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(n.compCoreSupport)),n.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(n.compCoreGPUSupport)),(0,s.skipBytes)(e,r())},function(e,t){var r=t.compositorUsed,n={Vrsn:r.version||{major:1,minor:0,fix:0}};r.photoshopVersion&&(n.psVersion=r.photoshopVersion),n.description=r.description,n.reason=r.reason,n.Engn="Engn.".concat(r.engine),r.enableCompCore&&(n.enableCompCore="enable.".concat(r.enableCompCore)),r.enableCompCoreGPU&&(n.enableCompCoreGPU="enable.".concat(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(n.enableCompCoreThreads="enable.".concat(r.enableCompCoreThreads)),r.compCoreSupport&&(n.compCoreSupport="reason.".concat(r.compCoreSupport)),r.compCoreGPUSupport&&(n.compCoreGPUSupport="reason.".concat(r.compCoreGPUSupport)),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),h("extn",function(e){return void 0!==e._extn},function(e,t){var r=(0,d.readVersionAndDescriptor)(e);o.MOCK_HANDLERS&&(t._extn=r)},function(e,t){o.MOCK_HANDLERS&&(0,d.writeVersionAndDescriptor)(e,"","null",t._extn)}),h("iOpa",m("fillOpacity"),function(e,t){t.fillOpacity=(0,s.readUint8)(e)/255,(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,255*t.fillOpacity),(0,l.writeZeros)(e,3)}),h("brst",m("channelBlendingRestrictions"),function(e,t,r){for(t.channelBlendingRestrictions=[];r()>4;)t.channelBlendingRestrictions.push((0,s.readInt32)(e))},function(e,t){for(var r=0,n=t.channelBlendingRestrictions;r<n.length;r++){var i=n[r];(0,l.writeInt32)(e,i)}}),h("tsly",m("transparencyShapesLayer"),function(e,t){t.transparencyShapesLayer=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)},function(e,t){(0,l.writeUint8)(e,+!!t.transparencyShapesLayer),(0,l.writeZeros)(e,3)})}),r("26rz6",function(e,r){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.writeEffects=e.exports.readEffects=void 0;var n=t("jE67M"),i=t("5OPaf"),a=t("kCSTH"),o=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function s(e){return(0,i.checkSignature)(e,"8BIM"),n.toBlendMode[(0,i.readSignature)(e)]||"normal"}function l(e,t){(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,n.fromBlendMode[t]||"norm")}function d(e){return(0,i.readUint8)(e)/255}function c(e,t){(0,a.writeUint8)(e,0|Math.round(255*t))}function u(e,t){var r;(0,a.writeUint32)(e,51),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,t.size&&t.size.value||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeFixedPoint32)(e,t.angle||0),(0,a.writeFixedPoint32)(e,t.distance&&t.distance.value||0),(0,a.writeColor)(e,t.color),l(e,t.blendMode),(0,a.writeUint8)(e,+!!t.enabled),(0,a.writeUint8)(e,+!!t.useGlobalLight),c(e,null!=(r=t.opacity)?r:1),(0,a.writeColor)(e,t.color)}e.exports.readEffects=function(e){var t=(0,i.readUint16)(e);if(0!==t)throw Error("Invalid effects layer version: ".concat(t));for(var r=(0,i.readUint16)(e),n={},a=0;a<r;a++){(0,i.checkSignature)(e,"8BIM");var l=(0,i.readSignature)(e);switch(l){case"cmnS":var c=(0,i.readUint32)(e),u=(0,i.readUint32)(e),f=!!(0,i.readUint8)(e);if((0,i.skipBytes)(e,2),7!==c||0!==u||!f)throw Error("Invalid effects common state");break;case"dsdw":case"isdw":var p=(0,i.readUint32)(e),h=(0,i.readUint32)(e);if(41!==p&&51!==p)throw Error("Invalid shadow size: ".concat(p));if(0!==h&&2!==h)throw Error("Invalid shadow version: ".concat(h));var c=(0,i.readFixedPoint32)(e);(0,i.readFixedPoint32)(e);var g=(0,i.readFixedPoint32)(e),m=(0,i.readFixedPoint32)(e),v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),b=!!(0,i.readUint8)(e),x=d(e);p>=51&&(0,i.readColor)(e);var S={size:{units:"Pixels",value:c},distance:{units:"Pixels",value:m},angle:g,color:v,blendMode:y,enabled:w,useGlobalLight:b,opacity:x};"dsdw"===l?n.dropShadow=[S]:n.innerShadow=[S];break;case"oglw":var p=(0,i.readUint32)(e),k=(0,i.readUint32)(e);if(32!==p&&42!==p)throw Error("Invalid outer glow size: ".concat(p));if(0!==k&&2!==k)throw Error("Invalid outer glow version: ".concat(k));var c=(0,i.readFixedPoint32)(e);(0,i.readFixedPoint32)(e);var v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),x=d(e);p>=42&&(0,i.readColor)(e),n.outerGlow={size:{units:"Pixels",value:c},color:v,blendMode:y,enabled:w,opacity:x};break;case"iglw":var p=(0,i.readUint32)(e),I=(0,i.readUint32)(e);if(32!==p&&43!==p)throw Error("Invalid inner glow size: ".concat(p));if(0!==I&&2!==I)throw Error("Invalid inner glow version: ".concat(I));var c=(0,i.readFixedPoint32)(e);(0,i.readFixedPoint32)(e);var v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),x=d(e);p>=43&&((0,i.readUint8)(e),(0,i.readColor)(e)),n.innerGlow={size:{units:"Pixels",value:c},color:v,blendMode:y,enabled:w,opacity:x};break;case"bevl":var p=(0,i.readUint32)(e),_=(0,i.readUint32)(e);if(58!==p&&78!==p)throw Error("Invalid bevel size: ".concat(p));if(0!==_&&2!==_)throw Error("Invalid bevel version: ".concat(_));var g=(0,i.readFixedPoint32)(e),C=(0,i.readFixedPoint32)(e),c=(0,i.readFixedPoint32)(e),F=s(e),D=s(e),U=(0,i.readColor)(e),A=(0,i.readColor)(e),E=o[(0,i.readUint8)(e)]||"inner bevel",P=d(e),M=d(e),w=!!(0,i.readUint8)(e),b=!!(0,i.readUint8)(e),B=(0,i.readUint8)(e)?"down":"up";p>=78&&((0,i.readColor)(e),(0,i.readColor)(e)),n.bevel={size:{units:"Pixels",value:c},angle:g,strength:C,highlightBlendMode:F,shadowBlendMode:D,highlightColor:U,shadowColor:A,style:E,highlightOpacity:P,shadowOpacity:M,enabled:w,useGlobalLight:b,direction:B};break;case"sofi":var c=(0,i.readUint32)(e),O=(0,i.readUint32)(e);if(34!==c)throw Error("Invalid effects solid fill info size: ".concat(c));if(2!==O)throw Error("Invalid effects solid fill info version: ".concat(O));var y=s(e),v=(0,i.readColor)(e),x=d(e),w=!!(0,i.readUint8)(e);(0,i.readColor)(e),n.solidFill=[{blendMode:y,color:v,opacity:x,enabled:w}];break;default:throw Error("Invalid effect type: '".concat(l,"'"))}}return n},e.exports.writeEffects=function(e,t){var r,n,i,s,d,f,p=null==(r=t.dropShadow)?void 0:r[0],h=null==(n=t.innerShadow)?void 0:n[0],g=t.outerGlow,m=t.innerGlow,v=t.bevel,y=null==(i=t.solidFill)?void 0:i[0],w=1;if(p&&w++,h&&w++,g&&w++,m&&w++,v&&w++,y&&w++,(0,a.writeUint16)(e,0),(0,a.writeUint16)(e,w),(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"cmnS"),(0,a.writeUint32)(e,7),(0,a.writeUint32)(e,0),(0,a.writeUint8)(e,1),(0,a.writeZeros)(e,2),p&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"dsdw"),u(e,p)),h&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"isdw"),u(e,h)),g&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"oglw"),(0,a.writeUint32)(e,42),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,(null==(s=g.size)?void 0:s.value)||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeColor)(e,g.color),l(e,g.blendMode),(0,a.writeUint8)(e,+!!g.enabled),c(e,g.opacity||0),(0,a.writeColor)(e,g.color)),m&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"iglw"),(0,a.writeUint32)(e,43),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,(null==(d=m.size)?void 0:d.value)||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeColor)(e,m.color),l(e,m.blendMode),(0,a.writeUint8)(e,+!!m.enabled),c(e,m.opacity||0),(0,a.writeUint8)(e,0),(0,a.writeColor)(e,m.color)),v){(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"bevl"),(0,a.writeUint32)(e,78),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,v.angle||0),(0,a.writeFixedPoint32)(e,v.strength||0),(0,a.writeFixedPoint32)(e,(null==(f=v.size)?void 0:f.value)||0),l(e,v.highlightBlendMode),l(e,v.shadowBlendMode),(0,a.writeColor)(e,v.highlightColor),(0,a.writeColor)(e,v.shadowColor);var b=o.indexOf(v.style);(0,a.writeUint8)(e,b<=0?1:b),c(e,v.highlightOpacity||0),c(e,v.shadowOpacity||0),(0,a.writeUint8)(e,+!!v.enabled),(0,a.writeUint8)(e,+!!v.useGlobalLight),(0,a.writeUint8)(e,+("down"===v.direction)),(0,a.writeColor)(e,v.highlightColor),(0,a.writeColor)(e,v.shadowColor)}y&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"sofi"),(0,a.writeUint32)(e,34),(0,a.writeUint32)(e,2),l(e,y.blendMode),(0,a.writeColor)(e,y.color),c(e,y.opacity||0),(0,a.writeUint8)(e,+!!y.enabled),(0,a.writeColor)(e,y.color))}}),r("5OPaf",function(e,r){"use strict";var n=e.exports&&e.exports.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.readPattern=e.exports.readColor=e.exports.readSection=e.exports.readDataRLE=e.exports.readDataZip=e.exports.createImageDataBitDepth=e.exports.readAdditionalLayerInfo=e.exports.readGlobalLayerMaskInfo=e.exports.readData=e.exports.readLayerInfo=e.exports.readPsd=e.exports.checkSignature=e.exports.skipBytes=e.exports.readAsciiString=e.exports.readUnicodeStringWithLengthLE=e.exports.readUnicodeStringWithLength=e.exports.readUnicodeString=e.exports.readPascalString=e.exports.validSignatureAt=e.exports.readSignature=e.exports.readBytes=e.exports.readFixedPointPath32=e.exports.readFixedPoint32=e.exports.readFloat64=e.exports.readFloat32=e.exports.readUint32=e.exports.readInt32LE=e.exports.readInt32=e.exports.readUint16LE=e.exports.readUint16=e.exports.readInt16=e.exports.peekUint8=e.exports.readUint8=e.exports.warnOrThrow=e.exports.createReader=e.exports.supportedColorModes=void 0;var i=t("1eu3Z"),a=t("jE67M"),o=t("cAUqy"),s=t("aqyg9");e.exports.supportedColorModes=[0,1,3,2];var l=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function d(e){for(var t=e.width*e.height*4,r=0;r<t;r+=4)e.data[r+1]=e.data[r],e.data[r+2]=e.data[r]}function c(e,t){if(e.strict)throw Error(t);e.debug&&e.log(t)}function u(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function f(e){return e.view.getUint8(e.offset)}function p(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function h(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function g(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function m(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function v(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function y(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function w(e,t){var r=e.view.byteOffset+e.offset;if(e.offset+=t,!(r+t>e.view.buffer.byteLength))return new Uint8Array(e.view.buffer,r,t);if(c(e,"Reading bytes exceeding buffer length"),t>0x6400000)throw Error("Reading past end of file");var n=new Uint8Array(t),i=Math.min(t,e.view.byteLength-r);return i>0&&n.set(new Uint8Array(e.view.buffer,r,i)),n}function b(e){return F(e,4)}function x(e,t){var r=String.fromCharCode(e.view.getUint8(t))+String.fromCharCode(e.view.getUint8(t+1))+String.fromCharCode(e.view.getUint8(t+2))+String.fromCharCode(e.view.getUint8(t+3));return"8BIM"==r||"8B64"==r}function S(e,t){for(var r=u(e),n=r?F(e,r):"";++r%t;)e.offset++;return n}function k(e){var t=v(e);return I(e,t)}function I(e,t){for(var r="";t--;){var n=h(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r}function _(e,t){e.offset+=t}function C(e,t,r){var n=e.offset,i=b(e);if(i!==t&&i!==r)throw Error("Invalid signature: '".concat(i,"' at 0x").concat(n.toString(16)))}function F(e,t){for(var r=w(e,t),n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}function D(e){return"8BIM"===e||"MeSa"===e||"AgHg"===e||"PHUT"===e||"DCSR"===e}function U(e,t,r){var n,i,o=r.layersGroup,s=void 0===o?[]:o,l=r.layerGroupsEnabledId,c=void 0===l?[]:l,f=p(e);f<0&&(e.globalAlpha=!0,f=-f);for(var g=[],w=[],k=0;k<f;k++){var I=function(e,t,r){var n={};n.top=m(e),n.left=m(e),n.bottom=m(e),n.right=m(e);for(var i=h(e),o=[],s=0;s<i;s++){var l=p(e),d=v(e);if(e.large){if(0!==d)throw Error("Sizes larger than 4GB are not supported");d=v(e)}o.push({id:l,length:d})}C(e,"8BIM");var c=b(e);if(!a.toBlendMode[c])throw Error("Invalid blend mode: '".concat(c,"'"));n.blendMode=a.toBlendMode[c],n.opacity=u(e)/255,n.clipping=1===u(e);var f=u(e);return n.transparencyProtected=(1&f)!=0,n.hidden=(2&f)!=0,32&f&&(n.effectsOpen=!0),_(e,1),H(e,1,function(i){!function(e,t){H(e,1,function(r){if(r()){var n={};t.mask=n,n.top=m(e),n.left=m(e),n.bottom=m(e),n.right=m(e),n.defaultColor=u(e);var i=u(e);if(n.positionRelativeToLayer=(1&i)!=0,n.disabled=(2&i)!=0,n.fromVectorData=(8&i)!=0,r()>=18){var a={};t.realMask=a;var o=u(e);a.positionRelativeToLayer=(1&o)!=0,a.disabled=(2&o)!=0,a.fromVectorData=(8&o)!=0,a.defaultColor=u(e),a.top=m(e),a.left=m(e),a.bottom=m(e),a.right=m(e)}if(16&i){var s=u(e);1&s&&(n.userMaskDensity=u(e)/255),2&s&&(n.userMaskFeather=y(e)),4&s&&(n.vectorMaskDensity=u(e)/255),8&s&&(n.vectorMaskFeather=y(e))}_(e,r())}})}(e,n);var a=function(e){return H(e,1,function(t){for(var r=A(e),n=A(e),i=[];t()>0;){var a=A(e),o=A(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:r,compositeGraphBlendDestinationRange:n,ranges:i}})}(e);for(a&&(n.blendingRanges=a),n.name=S(e,1);i()>4&&!x(e,e.offset);)e.offset++;for(;i()>=12;)T(e,n,t,r);_(e,i())}),{layer:n,channels:o}}(e,t,r),F=I.layer,D=I.channels;void 0!==s[k]&&(F.linkGroup=s[k]),void 0!==c[k]&&(F.linkGroupEnabled=!!c[k]),g.push(F),w.push(D)}if(!e.skipLayerImageData)for(var k=0;k<f;k++)!function(e,t,r,n){var i,o,s,l,c,u=(r.right||0)-(r.left||0),f=(r.bottom||0)-(r.top||0),p=4===t.colorMode;if(u&&f)if(p){if(8!==t.bitsPerChannel)throw Error("bitsPerChannel Not supproted");c={width:u,height:f,data:new Uint8ClampedArray(u*f*5)};for(var g=4;g<c.data.byteLength;g+=5)c.data[g]=255}else c=L(u,f,null!=(i=t.bitsPerChannel)?i:8),(0,a.resetImageData)(c);a.RAW_IMAGE_DATA&&(r.imageDataRaw=[],r.imageDataRawCompression=[]);for(var m=0;m<n.length;m++){var v=n[m];if(0!==v.length){if(v.length<2)throw Error("Invalid channel length");var y=e.offset,w=h(e);if(w>3&&(e.offset-=1,w=h(e)),w>3&&(e.offset-=3,w=h(e)),w>3)throw Error("Invalid compression: ".concat(w));if(-2===v.id||-3===v.id){var b=-2===v.id?r.mask:r.realMask;if(!b)throw Error("Missing layer ".concat(-2===v.id?"mask":"real mask"," data"));var x=(b.right||0)-(b.left||0),S=(b.bottom||0)-(b.top||0);if(x<0||S<0||x>3e4||S>3e4)throw Error("Invalid mask size");if(x&&S){var k=L(x,S,null!=(o=t.bitsPerChannel)?o:8);(0,a.resetImageData)(k);var I=e.offset;E(e,v.length,k,w,x,S,null!=(s=t.bitsPerChannel)?s:8,0,e.large,4),a.RAW_IMAGE_DATA&&(-2===v.id?(r.maskDataRawCompression=w,r.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+I,e.offset-I)):(r.realMaskDataRawCompression=w,r.realMaskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+I,e.offset-I))),d(k),e.useImageData?b.imageData=k:b.canvas=(0,a.imageDataToCanvas)(k)}}else{var _=(0,a.offsetForChannel)(v.id,p),C=c;if(_<0&&(C=void 0,e.throwForMissingFeatures))throw Error("Channel not supported: ".concat(v.id));E(e,v.length,C,w,u,f,null!=(l=t.bitsPerChannel)?l:8,_,e.large,p?5:4),a.RAW_IMAGE_DATA&&(r.imageDataRawCompression[v.id]=w,r.imageDataRaw[v.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+y+2,v.length-2)),e.offset=y+v.length,C&&1===t.colorMode&&d(C)}}}if(c){if(p){var F=c;c=(0,a.createImageData)(F.width,F.height),R(F,c,!1)}e.useImageData?r.imageData=c:r.canvas=(0,a.imageDataToCanvas)(c)}}(e,t,g[k],w[k]);t.children||(t.children=[]);for(var U=[t],k=g.length-1;k>=0;k--){var P=g[k],M=P.sectionDivider?P.sectionDivider.type:0;1===M||2===M?(P.opened=1===M,P.children=[],(null==(n=P.sectionDivider)?void 0:n.key)&&(P.blendMode=null!=(i=a.toBlendMode[P.sectionDivider.key])?i:P.blendMode),U[U.length-1].children.unshift(P),U.push(P)):3===M?U.pop():U[U.length-1].children.unshift(P)}}function A(e){return[u(e),u(e),u(e),u(e)]}function E(e,t,r,n,i,a,o,s,l,d){if(0===n)N(e,r,i,a,o,d,s);else if(1===n)W(e,r,i,a,o,d,[s],l);else if(2===n)j(e,t,r,i,a,o,d,s,!1);else if(3===n)j(e,t,r,i,a,o,d,s,!0);else throw Error("Invalid Compression type: ".concat(n))}function P(e){return H(e,1,function(t){if(t()){var r=h(e),n=h(e),i=h(e),a=h(e),o=h(e),s=h(e)/255,l=u(e);return _(e,t()),{overlayColorSpace:r,colorSpace1:n,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:s,kind:l}}})}e.exports.createReader=function(e,t,r){return{view:new DataView(e,t,r),offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}},e.exports.warnOrThrow=c,e.exports.readUint8=u,e.exports.peekUint8=f,e.exports.readInt16=p,e.exports.readUint16=h,e.exports.readUint16LE=g,e.exports.readInt32=m,e.exports.readInt32LE=function(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)},e.exports.readUint32=v,e.exports.readFloat32=function(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)},e.exports.readFloat64=y,e.exports.readFixedPoint32=function(e){return m(e)/65536},e.exports.readFixedPointPath32=function(e){return m(e)/0x1000000},e.exports.readBytes=w,e.exports.readSignature=b,e.exports.validSignatureAt=x,e.exports.readPascalString=S,e.exports.readUnicodeString=k,e.exports.readUnicodeStringWithLength=I,e.exports.readUnicodeStringWithLengthLE=function(e,t){for(var r="";t--;){var n=g(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r},e.exports.readAsciiString=function(e,t){for(var r="";t--;)r+=String.fromCharCode(u(e));return r},e.exports.skipBytes=_,e.exports.checkSignature=C,e.exports.readPsd=function(t,r){void 0===r&&(r={}),C(t,"8BPS");var i,o=h(t);if(1!==o&&2!==o)throw Error("Invalid PSD file version: ".concat(o));_(t,6);var c=h(t),p=v(t),g=v(t),m=h(t),y=h(t),b=1===o?3e4:3e5;if(g>b||p>b)throw Error("Invalid size: ".concat(g,"x").concat(p));if(c>16)throw Error("Invalid channel count: ".concat(c));if(![1,8,16,32].includes(m))throw Error("Invalid bitsPerChannel: ".concat(m));if(-1===e.exports.supportedColorModes.indexOf(y))throw Error("Color mode not supported: ".concat(null!=(i=l[y])?i:y));var x={width:g,height:p,channels:c,bitsPerChannel:m,colorMode:y};Object.assign(t,r),t.large=2===o,t.globalAlpha=!1,H(t,1,function(e){if(e()){if(2===y){if(768!=e())throw Error("Invalid color palette size");x.palette=[];for(var r=0;r<256;r++)x.palette.push({r:u(t),g:0,b:0});for(var r=0;r<256;r++)x.palette[r].g=u(t);for(var r=0;r<256;r++)x.palette[r].b=u(t)}_(t,e())}});var k={};H(t,1,function(e){for(;e()>0;)!function(){B(t,D);var e=h(t);S(t,2),H(t,2,function(r){var n=s.resourceHandlersMap[e],i=1036===e&&!!t.skipThumbnail;if(n&&!i)try{n.read(t,k,r)}catch(e){if(t.throwForMissingFeatures)throw e;_(t,r())}else _(t,r())})}()}),k.layersGroup,k.layerGroupsEnabledId;var I=n(k,["layersGroup","layerGroupsEnabledId"]);Object.keys(I)&&(x.imageResources=I),H(t,1,function(e){if(H(t,2,function(e){U(t,x,k),_(t,e())},void 0,t.large),e()>0){var r=P(t);r&&(x.globalLayerMaskInfo=r)}else _(t,e());for(;e()>0;){for(;e()&&0===f(t);)_(t,1);e()>=12?T(t,x,x,k):_(t,e())}},void 0,t.large);var F=x.children&&x.children.length;return t.skipCompositeImageData&&(t.skipLayerImageData||F)||function(t,r){var n,i=h(t),o=null!=(n=r.bitsPerChannel)?n:8;if(-1===e.exports.supportedColorModes.indexOf(r.colorMode))throw Error("Color mode not supported: ".concat(r.colorMode));if(0!==i&&1!==i)throw Error("Compression type not supported: ".concat(i));var s=L(r.width,r.height,o);switch((0,a.resetImageData)(s),r.colorMode){case 0:if(1!==o)throw Error("Invalid bitsPerChannel for bitmap color mode");var l=void 0;if(0===i)l=w(t,Math.ceil(r.width/8)*r.height);else if(1===i)W(t,{data:l=new Uint8Array(r.width*r.height),width:r.width,height:r.height},r.width,r.height,8,1,[0],t.large);else throw Error("Bitmap compression not supported: ".concat(i));(0,a.decodeBitmap)(l,s.data,r.width,r.height);break;case 3:case 1:var c=1===r.colorMode?[0]:[0,1,2];if(r.channels&&r.channels>3)for(var u=3;u<r.channels;u++)c.push(u);else t.globalAlpha&&c.push(3);if(0===i)for(var u=0;u<c.length;u++)N(t,s,r.width,r.height,o,4,c[u]);else if(1===i){var f=t.offset;W(t,s,r.width,r.height,o,4,c,t.large),a.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(t.view.buffer,t.view.byteOffset+f,t.offset-f))}1===r.colorMode&&d(s);break;case 2:if(8!==o)throw Error("bitsPerChannel Not supproted");if(1!==r.channels)throw Error("Invalid channel count");if(!r.palette)throw Error("Missing color palette");if(0===i)throw Error("Not implemented");if(1===i){var p={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height)};W(t,p,r.width,r.height,o,1,[0],t.large),function(e,t,r){for(var n=e.width*e.height,i=e.data,a=t.data,o=0,s=0;o<n;o++,s+=4){var l=r[i[o]];a[s+0]=l.r,a[s+1]=l.g,a[s+2]=l.b,a[s+3]=255}}(p,s,r.palette)}else throw Error("Not implemented");break;case 4:if(8!==o)throw Error("bitsPerChannel Not supproted");if(4!==r.channels)throw Error("Invalid channel count");var c=[0,1,2,3];if(t.globalAlpha&&c.push(4),0===i)throw Error("Not implemented");if(1===i){var g={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height*5)},f=t.offset;W(t,g,r.width,r.height,o,5,c,t.large),R(g,s,!0),a.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(t.view.buffer,t.view.byteOffset+f,t.offset-f))}else throw Error("Not implemented");break;default:throw Error("Color mode not supported: ".concat(r.colorMode))}if(t.globalAlpha){if(8!==r.bitsPerChannel)throw Error("bitsPerChannel Not supproted");for(var m=s.data,v=s.width*s.height*4,u=0;u<v;u+=4){var y=m[u+3];if(0!=y&&255!=y){var b=1/(y/255),x=255*(1-b);m[u+0]=m[u+0]*b+x,m[u+1]=m[u+1]*b+x,m[u+2]=m[u+2]*b+x}}}t.useImageData?r.imageData=s:r.canvas=(0,a.imageDataToCanvas)(s)}(t,x),x},e.exports.readLayerInfo=U,e.exports.readData=E,e.exports.readGlobalLayerMaskInfo=P;var M=[0,1,-1,2,-2,3,-3,4,-4];function B(e,t){for(var r=e.offset,n="",i=0;i<M.length;i++){var a=M[i];try{e.offset=r+a,n=b(e)}catch(e){}if(t(n))break}if(!t(n))throw Error("Invalid signature: '".concat(n,"' at 0x").concat(r.toString(16)));return n}function O(e){return"8BIM"===e||"8B64"===e}function T(e,t,r,n){var i=B(e,O),s=b(e),l="8B64"===i||e.large&&-1!==a.largeAdditionalInfoKeys.indexOf(s);H(e,2,function(i){var a=o.infoHandlersMap[s];if(a)try{a.read(e,t,i,r,n)}catch(t){if(e.throwForMissingFeatures)throw t}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(s)),_(e,i());i()&&(e.logMissingFeatures&&e.log("Unread ".concat(i()," bytes left for additional info: ").concat(s)),_(e,i()))},!1,l)}function L(e,t,r,n){if(void 0===n&&(n=4),1===r||8===r)if(4===n)return(0,a.createImageData)(e,t);else return{width:e,height:t,data:new Uint8ClampedArray(e*t*n)};if(16===r)return{width:e,height:t,data:new Uint16Array(e*t*n)};if(32===r)return{width:e,height:t,data:new Float32Array(e*t*n)};throw Error("Invalid bitDepth (".concat(r,")"))}function R(e,t,r){for(var n=t.width*t.height*4,i=e.data,a=t.data,o=0,s=0;s<n;o+=5,s+=4){var l=i[o],d=i[o+1],c=i[o+2],u=i[o+3];a[s]=(l*u|0)/255|0,a[s+1]=(d*u|0)/255|0,a[s+2]=(c*u|0)/255|0,a[s+3]=r?255-i[o+4]:i[o+4]}}function z(e,t){if(8===t)return e;if(16===t)if(!(e.byteOffset%2))return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else{var r=new Uint16Array(e.byteLength/2);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength).set(e),r}if(32===t)if(!(e.byteOffset%4))return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else{var r=new Float32Array(e.byteLength/4);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength).set(e),r}throw Error("Invalid bitDepth (".concat(t,")"))}function V(e,t,r,n){var i=e.data;if(i.byteLength/i.length!=t.byteLength/t.length)throw Error("Invalid array types");for(var a=e.width*e.height,o=e.data,s=0,l=0|r;s<a;s++,l=l+n|0)o[l]=t[s]}function N(e,t,r,n,i,a,o){var s=w(e,r*n*Math.floor(i/8));if(32==i)for(var l=0;l<s.byteLength;l+=4){var d=s[l+0],c=s[l+1],u=s[l+2],f=s[l+3];s[l+0]=f,s[l+1]=u,s[l+2]=c,s[l+3]=d}var p=z(s,i);t&&o<a&&V(t,p,o,a)}function G(e,t,r,n){for(var i=0;i<r;i++)for(var a=i*t,o=1,s=a+1;o<t;o++,s++)e[s]=(e[s-1]+e[s])%n}function j(e,t,r,n,a,o,s,l,d){var c=w(e,t),u=(0,i.inflate)(c);if(r&&l<s){var f=z(u,o);if(8===o)d&&G(u,n,a,256),V(r,u,l,s);else if(16===o)d&&G(f,n,a,65536),V(r,f,l,s);else if(32===o){d&&G(u,4*n,a,256);for(var p=l,h=new Uint32Array(r.data.buffer,r.data.byteOffset,r.data.length),g=0;g<a;g++)for(var m=4*n*g,v=0;v<n;v++,m++,p+=s){var y=m+n,b=y+n,x=b+n;h[p]=(u[m]<<24|u[y]<<16|u[b]<<8|u[x])>>>0}}else throw Error("Invalid bitDepth")}}function W(e,t,r,n,i,a,o,s){var l,d=t&&t.data;if(s){l=new Uint32Array(o.length*n);for(var c=0,u=0;c<o.length;c++)for(var f=0;f<n;f++,u++)l[u]=v(e)}else{l=new Uint16Array(o.length*n);for(var c=0,u=0;c<o.length;c++)for(var f=0;f<n;f++,u++)l[u]=h(e)}if(1!==i&&8!==i)throw Error("Invalid bit depth (".concat(i,")"));for(var p=a-1|0,g=0,u=0;g<o.length;g++){var m=0|o[g],y=g>p||m>p;if(!d||y)for(var f=0;f<n;f++,u++)_(e,l[u]);else for(var f=0,b=0|m;f<n;f++,u++)for(var x=l[u],S=w(e,x),k=0,I=0;k<x;k++){var C=S[k];if(C>128){var F=S[++k];C=256-C|0;for(var D=0;D<=C&&I<r;D=D+1|0,I=I+1|0)d[b]=F,b=b+a|0}else if(C<128)for(var D=0;D<=C&&I<r;D=D+1|0,I=I+1|0)d[b]=S[++k],b=b+a|0}}}function H(e,t,r,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var a=v(e);if(i){if(0!==a)throw Error("Sizes larger than 4GB are not supported");a=v(e)}if(!(a<=0)||!n){var o=e.offset+a;if(o>e.view.byteLength)throw Error("Section exceeds file size");var s=r(function(){return o-e.offset});for(e.offset!==o&&(e.offset>o?c(e,"Exceeded section limits"):c(e,"Unread section data"));a%t;)a++,o++;return e.offset=o,s}}e.exports.readAdditionalLayerInfo=T,e.exports.createImageDataBitDepth=L,e.exports.readDataZip=j,e.exports.readDataRLE=W,e.exports.readSection=H,e.exports.readColor=function(e){switch(h(e)){case 0:var t=h(e)/257,r=h(e)/257,n=h(e)/257;return _(e,2),{r:t,g:r,b:n};case 1:var i=h(e)/65535,a=h(e)/65535,n=h(e)/65535;return _(e,2),{h:i,s:a,b:n};case 2:var o=h(e)/257,s=h(e)/257,l=h(e)/257,d=h(e)/257;return{c:o,m:s,y:l,k:d};case 7:var c=p(e)/1e4,u=p(e),f=p(e),n=f<0?f/12800:f/12700;return _(e,2),{l:c,a:u<0?u/12800:u/12700,b:n};case 8:var d=255*h(e)/1e4;return _(e,6),{k:d};default:throw Error("Invalid color space")}},e.exports.readPattern=function(e){v(e);var t=v(e);if(1!==t)throw Error("Invalid pattern version: ".concat(t));var r=v(e),n=p(e),i=p(e);if(3!==r&&1!==r&&2!==r)throw Error("Unsupported pattern color mode: ".concat(r));var a=k(e),o=S(e,1),s=[];if(2===r){for(var l=0;l<256;l++)s.push({r:u(e),g:u(e),b:u(e)});_(e,4)}var d=v(e);if(3!==d)throw Error("Invalid pattern VMAL version: ".concat(d));v(e);for(var c=v(e),f=v(e),g=v(e),m=v(e),y=v(e),b=m-f,x=g-c,I=new Uint8Array(b*x*4),l=3;l<I.byteLength;l+=4)I[l]=255;for(var l=0,C=0;l<y+2;l++)if(v(e)){var F=v(e),D=v(e),U=v(e),A=v(e),E=v(e),P=v(e),M=h(e),B=u(e),O=w(e,F-23);if(8!==D||8!==M)throw Error("16bit pixel depth not supported for patterns");var T=P-A,L=E-U,R=A-f,z=U-c;if(0===B){if(3===r&&C<3)for(var V=0;V<L;V++)for(var N=0;N<T;N++){var G=N+V*T,j=(R+N+(V+z)*b)*4;I[j+C]=O[G]}if(1===r&&C<1)for(var W=0;W<L;W++)for(var H=0;H<T;H++){var G=H+W*T,j=(R+H+(W+z)*b)*4,X=O[G];I[j+0]=X,I[j+1]=X,I[j+2]=X}if(2===r)throw Error("Indexed pattern color mode not implemented")}else if(1===B)e.log("Unsupported pattern compression"),a+=" (failed to decode)";else throw Error("Invalid pattern compression mode");C++}return{id:o,name:a,x:n,y:i,bounds:{x:f,y:c,w:b,h:x},data:I}}}),r("aqyg9",function(e,r){"use strict";var n=e.exports&&e.exports.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.resourceHandlersMap=e.exports.resourceHandlers=void 0;var i=t("jWkTT"),a=t("5OPaf"),o=t("kCSTH"),s=t("jE67M"),l=t("5wpNI"),d=t("klnll");function c(t,r,n,i){var a={key:t,has:r,read:n,write:i};e.exports.resourceHandlers.push(a),e.exports.resourceHandlersMap[a.key]=a}e.exports.resourceHandlers=[],e.exports.resourceHandlersMap={};var u=[void 0,"PPI","PPCM"],f=[void 0,"Inches","Centimeters","Points","Picas","Columns"],p="0123456789abcdef";function h(e){return e<=57?e-48:e-87}function g(e,t){var r=(0,a.readBytes)(e,t);return(0,l.decodeString)(r)}function m(e,t){var r=(0,l.encodeString)(t);(0,o.writeBytes)(e,r)}s.MOCK_HANDLERS&&c(1028,function(e){return void 0!==e._ir1028},function(e,t,r){t._ir1028=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1028)}),c(1061,function(e){return void 0!==e.captionDigest},function(e,t){for(var r="",n=0;n<16;n++){var i=(0,a.readUint8)(e);r+=p[i>>4],r+=p[15&i]}t.captionDigest=r},function(e,t){for(var r,n,i=0;i<16;i++)(0,o.writeUint8)(e,(r=t.captionDigest,n=2*i,h(r.charCodeAt(n))<<4|h(r.charCodeAt(n+1))))}),c(1060,function(e){return void 0!==e.xmpMetadata},function(e,t,r){t.xmpMetadata=g(e,r())},function(e,t){m(e,t.xmpMetadata)});var v=(0,s.createEnum)("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});c(1082,function(e){return void 0!==e.printInformation},function(e,t){var r,n,i=(0,d.readVersionAndDescriptor)(e);t.printInformation={printerName:i.printerName||"",renderingIntent:v.decode(null!=(r=i.Inte)?r:"Inte.Img ")};var a=t.printInformation;void 0!==i.PstS&&(a.printerManagesColors=i.PstS),void 0!==i["Nm  "]&&(a.printerProfile=i["Nm  "]),void 0!==i.MpBl&&(a.blackPointCompensation=i.MpBl),void 0!==i.printSixteenBit&&(a.printSixteenBit=i.printSixteenBit),void 0!==i.hardProof&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:v.decode(null!=(n=i.printProofSetup.Inte)?n:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,t){var r,n,i=t.printInformation,a={};i.printerManagesColors?a.PstS=!0:(void 0!==i.hardProof&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=null!=(r=i.printerProfile)?r:"CIE RGB"),a.Inte=v.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:v.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:(null==(n=i.proofSetup)?void 0:n.builtin)?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},(0,d.writeVersionAndDescriptor)(e,"","printOutput",a)}),s.MOCK_HANDLERS&&c(1083,function(e){return void 0!==e._ir1083},function(e,t,r){t._ir1083=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1083)}),c(1005,function(e){return void 0!==e.resolutionInfo},function(e,t){var r=(0,a.readFixedPoint32)(e),n=(0,a.readUint16)(e),i=(0,a.readUint16)(e),o=(0,a.readFixedPoint32)(e),s=(0,a.readUint16)(e),l=(0,a.readUint16)(e);t.resolutionInfo={horizontalResolution:r,horizontalResolutionUnit:u[n]||"PPI",widthUnit:f[i]||"Inches",verticalResolution:o,verticalResolutionUnit:u[s]||"PPI",heightUnit:f[l]||"Inches"}},function(e,t){var r=t.resolutionInfo;(0,o.writeFixedPoint32)(e,r.horizontalResolution||0),(0,o.writeUint16)(e,Math.max(1,u.indexOf(r.horizontalResolutionUnit))),(0,o.writeUint16)(e,Math.max(1,f.indexOf(r.widthUnit))),(0,o.writeFixedPoint32)(e,r.verticalResolution||0),(0,o.writeUint16)(e,Math.max(1,u.indexOf(r.verticalResolutionUnit))),(0,o.writeUint16)(e,Math.max(1,f.indexOf(r.heightUnit)))});var y=["centered","size to fit","user defined"];c(1062,function(e){return void 0!==e.printScale},function(e,t){t.printScale={style:y[(0,a.readInt16)(e)],x:(0,a.readFloat32)(e),y:(0,a.readFloat32)(e),scale:(0,a.readFloat32)(e)}},function(e,t){var r=t.printScale,n=r.style,i=r.x,a=r.y,s=r.scale;(0,o.writeInt16)(e,Math.max(0,y.indexOf(n))),(0,o.writeFloat32)(e,i||0),(0,o.writeFloat32)(e,a||0),(0,o.writeFloat32)(e,s||0)}),c(1006,function(e){return void 0!==e.alphaChannelNames},function(e,t,r){if(t.alphaChannelNames)(0,a.skipBytes)(e,r());else for(t.alphaChannelNames=[];r()>0;){var n=function(e){for(var t=(0,a.readUint8)(e),r=(0,a.readBytes)(e,t),n=!1,i=0;i<r.byteLength;i++)if(128&r[i]){n=!0;break}return n?new TextDecoder("gbk").decode(r):(0,l.decodeString)(r)}(e);t.alphaChannelNames.push(n)}},function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++)!function(e,t){for(var r="",n=0,i=t.codePointAt(n++);void 0!==i;i=t.codePointAt(n++))r+=i>127?"?":String.fromCodePoint(i);var a=(0,l.encodeString)(r);(0,o.writeUint8)(e,a.byteLength),(0,o.writeBytes)(e,a)}(e,n[r])}),c(1045,function(e){return void 0!==e.alphaChannelNames},function(e,t,r){for(t.alphaChannelNames=[];r()>0;)t.alphaChannelNames.push((0,a.readUnicodeString)(e))},function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){var i=n[r];(0,o.writeUnicodeStringWithPadding)(e,i)}}),s.MOCK_HANDLERS&&c(1077,function(e){return void 0!==e._ir1077},function(e,t,r){t._ir1077=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1077)}),c(1053,function(e){return void 0!==e.alphaIdentifiers},function(e,t,r){for(t.alphaIdentifiers=[];r()>=4;)t.alphaIdentifiers.push((0,a.readUint32)(e))},function(e,t){for(var r=0,n=t.alphaIdentifiers;r<n.length;r++){var i=n[r];(0,o.writeUint32)(e,i)}}),c(1010,function(e){return void 0!==e.backgroundColor},function(e,t){return t.backgroundColor=(0,a.readColor)(e)},function(e,t){return(0,o.writeColor)(e,t.backgroundColor)}),c(1037,function(e){return void 0!==e.globalAngle},function(e,t){return t.globalAngle=(0,a.readInt32)(e)},function(e,t){return(0,o.writeInt32)(e,t.globalAngle)}),c(1049,function(e){return void 0!==e.globalAltitude},function(e,t){return t.globalAltitude=(0,a.readUint32)(e)},function(e,t){return(0,o.writeUint32)(e,t.globalAltitude)}),c(1011,function(e){return void 0!==e.printFlags},function(e,t){t.printFlags={labels:!!(0,a.readUint8)(e),cropMarks:!!(0,a.readUint8)(e),colorBars:!!(0,a.readUint8)(e),registrationMarks:!!(0,a.readUint8)(e),negative:!!(0,a.readUint8)(e),flip:!!(0,a.readUint8)(e),interpolate:!!(0,a.readUint8)(e),caption:!!(0,a.readUint8)(e),printFlags:!!(0,a.readUint8)(e)}},function(e,t){var r=t.printFlags;(0,o.writeUint8)(e,+!!r.labels),(0,o.writeUint8)(e,+!!r.cropMarks),(0,o.writeUint8)(e,+!!r.colorBars),(0,o.writeUint8)(e,+!!r.registrationMarks),(0,o.writeUint8)(e,+!!r.negative),(0,o.writeUint8)(e,+!!r.flip),(0,o.writeUint8)(e,+!!r.interpolate),(0,o.writeUint8)(e,+!!r.caption),(0,o.writeUint8)(e,+!!r.printFlags)}),s.MOCK_HANDLERS&&c(1e4,function(e){return void 0!==e._ir10000},function(e,t,r){t._ir10000=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir10000)}),s.MOCK_HANDLERS&&c(1013,function(e){return void 0!==e._ir1013},function(e,t,r){t._ir1013=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1013)}),s.MOCK_HANDLERS&&c(1016,function(e){return void 0!==e._ir1016},function(e,t,r){t._ir1016=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1016)}),c(1080,function(e){return void 0!==e.countInformation},function(e,t){t.countInformation=(0,d.readVersionAndDescriptor)(e).countGroupList.map(function(e){return{color:{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]},name:e["Nm  "],size:e["Rds "],fontSize:e.fontSize,visible:e.Vsbl,points:e.countObjectList.map(function(e){return{x:e["X   "],y:e["Y   "]}})}})},function(e,t){var r={Vrsn:1,countGroupList:t.countInformation.map(function(e){return{"Rd  ":e.color.r,"Grn ":e.color.g,"Bl  ":e.color.b,"Nm  ":e.name,"Rds ":e.size,fontSize:e.fontSize,Vsbl:e.visible,countObjectList:e.points.map(function(e){return{"X   ":e.x,"Y   ":e.y}})}})};(0,d.writeVersionAndDescriptor)(e,"","Cnt ",r)}),c(1024,function(e){return void 0!==e.layerState},function(e,t){return t.layerState=(0,a.readUint16)(e)},function(e,t){return(0,o.writeUint16)(e,t.layerState)}),c(1026,function(e){return void 0!==e.layersGroup},function(e,t,r){for(t.layersGroup=[];r()>0;)t.layersGroup.push((0,a.readUint16)(e))},function(e,t){for(var r=0,n=t.layersGroup;r<n.length;r++){var i=n[r];(0,o.writeUint16)(e,i)}}),c(1072,function(e){return void 0!==e.layerGroupsEnabledId},function(e,t,r){for(t.layerGroupsEnabledId=[];r()>0;)t.layerGroupsEnabledId.push((0,a.readUint8)(e))},function(e,t){for(var r=0,n=t.layerGroupsEnabledId;r<n.length;r++){var i=n[r];(0,o.writeUint8)(e,i)}}),c(1069,function(e){return void 0!==e.layerSelectionIds},function(e,t){var r=(0,a.readUint16)(e);for(t.layerSelectionIds=[];r--;)t.layerSelectionIds.push((0,a.readUint32)(e))},function(e,t){(0,o.writeUint16)(e,t.layerSelectionIds.length);for(var r=0,n=t.layerSelectionIds;r<n.length;r++){var i=n[r];(0,o.writeUint32)(e,i)}}),c(1032,function(e){return void 0!==e.gridAndGuidesInformation},function(e,t){var r=(0,a.readUint32)(e),n=(0,a.readUint32)(e),i=(0,a.readUint32)(e),o=(0,a.readUint32)(e);if(1!==r)throw Error("Invalid 1032 resource version: ".concat(r));t.gridAndGuidesInformation={grid:{horizontal:n,vertical:i},guides:[]};for(var s=0;s<o;s++)t.gridAndGuidesInformation.guides.push({location:(0,a.readUint32)(e)/32,direction:(0,a.readUint8)(e)?"horizontal":"vertical"})},function(e,t){var r=t.gridAndGuidesInformation,n=r.grid||{horizontal:576,vertical:576},i=r.guides||[];(0,o.writeUint32)(e,1),(0,o.writeUint32)(e,n.horizontal),(0,o.writeUint32)(e,n.vertical),(0,o.writeUint32)(e,i.length);for(var a=0;a<i.length;a++){var s=i[a];(0,o.writeUint32)(e,32*s.location),(0,o.writeUint8)(e,+("horizontal"===s.direction))}}),c(1065,function(e){return void 0!==e.layerComps},function(e,t){var r=(0,d.readVersionAndDescriptor)(e,!0);t.layerComps={list:[]};for(var n=0,i=r.list;n<i.length;n++){var a=i[n];t.layerComps.list.push({id:a.compID,name:a["Nm  "],capturedInfo:a.capturedInfo}),"comment"in a&&(t.layerComps.list[t.layerComps.list.length-1].comment=a.comment)}"lastAppliedComp"in r&&(t.layerComps.lastApplied=r.lastAppliedComp)},function(e,t){for(var r=t.layerComps,n={list:[]},i=0,a=r.list;i<a.length;i++){var o=a[i],s={};s._classID="Comp",s["Nm  "]=o.name,"comment"in o&&(s.comment=o.comment),s.compID=o.id,s.capturedInfo=o.capturedInfo,n.list.push(s)}"lastApplied"in r&&(n.lastAppliedComp=r.lastApplied),(0,d.writeVersionAndDescriptor)(e,"","CompList",n)}),s.MOCK_HANDLERS&&c(1092,function(e){return void 0!==e._ir1092},function(e,t,r){t._ir1092=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1092)});var w=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];function b(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function x(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function S(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}c(1078,function(e){return void 0!==e.onionSkins},function(e,t){var r=(0,d.readVersionAndDescriptor)(e);t.onionSkins={enabled:r.enab,framesBefore:r.numBefore,framesAfter:r.numAfter,frameSpacing:r.Spcn,minOpacity:r.minOpacity/100,maxOpacity:r.maxOpacity/100,blendMode:w[r.BlnM]||"normal"}},function(e,t){var r=t.onionSkins,n={Vrsn:1,enab:r.enabled,numBefore:r.framesBefore,numAfter:r.framesAfter,Spcn:r.frameSpacing,minOpacity:100*r.minOpacity|0,maxOpacity:100*r.maxOpacity|0,BlnM:Math.max(0,w.indexOf(r.blendMode))};(0,d.writeVersionAndDescriptor)(e,"","null",n)}),c(1075,function(e){return void 0!==e.timelineInformation},function(e,t){var r,n,i=(0,d.readVersionAndDescriptor)(e);t.timelineInformation={enabled:i.enab,frameStep:(0,d.frac)(i.frameStep),frameRate:i.frameRate,time:(0,d.frac)(i.time),duration:(0,d.frac)(i.duration),workInTime:(0,d.frac)(i.workInTime),workOutTime:(0,d.frac)(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:(0,d.parseTrackList)(i.globalTrackList,!!e.logMissingFeatures)},(null==(n=null==(r=i.audioClipGroupList)?void 0:r.audioClipGroupList)?void 0:n.length)&&(t.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(e){return{id:e.groupID,muted:e.muted,audioClips:e.audioClipList.map(function(e){var t=e.clipID,r=e.timeScope,n=e.muted,i=e.audioLevel,a=e.frameReader;return{id:t,start:(0,d.frac)(r.Strt),duration:(0,d.frac)(r.duration),inTime:(0,d.frac)(r.inTime),outTime:(0,d.frac)(r.outTime),muted:n,audioLevel:i,frameReader:{type:a.frameReaderType,mediaDescriptor:a.mediaDescriptor,link:{name:a["Lnk "]["Nm  "],fullPath:a["Lnk "].fullPath,relativePath:a["Lnk "].relPath}}}})}}))},function(e,t){var r,n=t.timelineInformation,i={Vrsn:1,enab:n.enabled,frameStep:n.frameStep,frameRate:n.frameRate,time:n.time,duration:n.duration,workInTime:n.workInTime,workOutTime:n.workOutTime,LCnt:n.repeats,globalTrackList:(0,d.serializeTrackList)(n.globalTracks),audioClipGroupList:{audioClipGroupList:null==(r=n.audioClipGroups)?void 0:r.map(function(e){return{groupID:e.id,muted:e.muted,audioClipList:e.audioClips.map(function(e){return{clipID:e.id,timeScope:{Vrsn:1,Strt:e.start,duration:e.duration,inTime:e.inTime,outTime:e.outTime},frameReader:{frameReaderType:e.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":e.frameReader.link.name,fullPath:e.frameReader.link.fullPath,relPath:e.frameReader.link.relativePath},mediaDescriptor:e.frameReader.mediaDescriptor},muted:e.muted,audioLevel:e.audioLevel}})}})},hasMotion:n.hasMotion};(0,d.writeVersionAndDescriptor)(e,"","null",i,"anim")}),c(1076,function(e){return void 0!==e.sheetDisclosure},function(e,t){var r=(0,d.readVersionAndDescriptor)(e);t.sheetDisclosure={},r.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=r.sheetTimelineOptions.map(function(e){return{sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}}))},function(e,t){var r=t.sheetDisclosure,n={Vrsn:1};r.sheetTimelineOptions&&(n.sheetTimelineOptions=r.sheetTimelineOptions.map(function(e){return{Vrsn:2,sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}})),(0,d.writeVersionAndDescriptor)(e,"","null",n)}),c(1054,function(e){return void 0!==e.urlsList},function(e,t){var r=(0,a.readUint32)(e);t.urlsList=[];for(var n=0;n<r;n++){if("slic"!==(0,a.readSignature)(e)&&e.throwForMissingFeatures)throw Error("Unknown long");var i=(0,a.readUint32)(e),o=(0,a.readUnicodeString)(e);t.urlsList.push({id:i,url:o,ref:"slice"})}},function(e,t){var r=t.urlsList;(0,o.writeUint32)(e,r.length);for(var n=0;n<r.length;n++)(0,o.writeSignature)(e,"slic"),(0,o.writeUint32)(e,r[n].id),(0,o.writeUnicodeString)(e,r[n].url)});var k=["autoGenerated","layer","userGenerated"],I=["noImage","image"],_=["default"];c(1050,function(e){return e.slices?e.slices.length:0},function(e,t){var r=(0,a.readUint32)(e);if(6===r){t.slices||(t.slices=[]);var i=(0,a.readInt32)(e),o=(0,a.readInt32)(e),s=(0,a.readInt32)(e),l=(0,a.readInt32)(e),c=(0,a.readUnicodeString)(e),u=(0,a.readUint32)(e);t.slices.push({bounds:{top:i,left:o,bottom:s,right:l},groupName:c,slices:[]});for(var f=t.slices[t.slices.length-1].slices,p=0;p<u;p++){var h=(0,a.readUint32)(e),g=(0,a.readUint32)(e),m=S(k,(0,a.readUint32)(e)),v="layer"==m?(0,a.readUint32)(e):0,y=(0,a.readUnicodeString)(e),w=S(I,(0,a.readUint32)(e)),b=(0,a.readInt32)(e),C=(0,a.readInt32)(e),F=(0,a.readInt32)(e),D=(0,a.readInt32)(e),U=(0,a.readUnicodeString)(e),A=(0,a.readUnicodeString)(e),E=(0,a.readUnicodeString)(e),P=(0,a.readUnicodeString)(e),M=!!(0,a.readUint8)(e),B=(0,a.readUnicodeString)(e),O=S(_,(0,a.readUint32)(e)),T=S(_,(0,a.readUint32)(e)),L=(0,a.readUint8)(e),R=(0,a.readUint8)(e),z=(0,a.readUint8)(e),V=(0,a.readUint8)(e),N=L+R+z+V===0?"none":0===L?"matte":"color";f.push({id:h,groupId:g,origin:m,associatedLayerId:v,name:y,target:A,message:E,altTag:P,cellTextIsHTML:M,cellText:B,horizontalAlignment:O,verticalAlignment:T,type:w,url:U,bounds:{top:C,left:b,bottom:D,right:F},backgroundColorType:N,backgroundColor:{r:R,g:z,b:V,a:L}})}var G=(0,d.readVersionAndDescriptor)(e);G.slices.forEach(function(e){var t=f.find(function(t){return e.sliceID==t.id});t&&(t.topOutset=e.topOutset,t.leftOutset=e.leftOutset,t.bottomOutset=e.bottomOutset,t.rightOutset=e.rightOutset)})}else if(7===r||8===r){var G=(0,d.readVersionAndDescriptor)(e);t.slices||(t.slices=[]),t.slices.push({groupName:G.baseName,bounds:x(G.bounds),slices:G.slices.map(function(e){return n(n({},e["Nm  "]?{name:e["Nm  "]}:{}),{id:e.sliceID,groupId:e.groupID,associatedLayerId:0,origin:d.ESliceOrigin.decode(e.origin),type:d.ESliceType.decode(e.Type),bounds:x(e.bounds),url:e.url,target:e.null,message:e.Msge,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horizontalAlignment:d.ESliceHorzAlign.decode(e.horzAlign),verticalAlignment:d.ESliceVertAlign.decode(e.vertAlign),backgroundColorType:d.ESliceBGColorType.decode(e.bgColorType),backgroundColor:e.bgColor?{r:e.bgColor["Rd  "],g:e.bgColor["Grn "],b:e.bgColor["Bl  "],a:e.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:e.topOutset||0,leftOutset:e.leftOutset||0,bottomOutset:e.bottomOutset||0,rightOutset:e.rightOutset||0})})})}else throw Error("Invalid slices version (".concat(r,")"))},function(e,t,r){var i=t.slices[r],a=i.bounds,s=i.groupName,l=i.slices;(0,o.writeUint32)(e,6),(0,o.writeInt32)(e,a.top),(0,o.writeInt32)(e,a.left),(0,o.writeInt32)(e,a.bottom),(0,o.writeInt32)(e,a.right),(0,o.writeUnicodeString)(e,s),(0,o.writeUint32)(e,l.length);for(var c=0;c<l.length;c++){var u=l[c],f=u.backgroundColor,p=f.a,h=f.r,g=f.g,m=f.b;"none"===u.backgroundColorType?p=h=g=m=0:"matte"===u.backgroundColorType&&(p=0,h=g=m=255),(0,o.writeUint32)(e,u.id),(0,o.writeUint32)(e,u.groupId),(0,o.writeUint32)(e,k.indexOf(u.origin)),"layer"===u.origin&&(0,o.writeUint32)(e,u.associatedLayerId),(0,o.writeUnicodeString)(e,u.name||""),(0,o.writeUint32)(e,I.indexOf(u.type)),(0,o.writeInt32)(e,u.bounds.left),(0,o.writeInt32)(e,u.bounds.top),(0,o.writeInt32)(e,u.bounds.right),(0,o.writeInt32)(e,u.bounds.bottom),(0,o.writeUnicodeString)(e,u.url),(0,o.writeUnicodeString)(e,u.target),(0,o.writeUnicodeString)(e,u.message),(0,o.writeUnicodeString)(e,u.altTag),(0,o.writeUint8)(e,+!!u.cellTextIsHTML),(0,o.writeUnicodeString)(e,u.cellText),(0,o.writeUint32)(e,_.indexOf(u.horizontalAlignment)),(0,o.writeUint32)(e,_.indexOf(u.verticalAlignment)),(0,o.writeUint8)(e,p),(0,o.writeUint8)(e,h),(0,o.writeUint8)(e,g),(0,o.writeUint8)(e,m)}var v={bounds:b(a),slices:[]};l.forEach(function(e){var t=n(n({sliceID:e.id,groupID:e.groupId,origin:d.ESliceOrigin.encode(e.origin),Type:d.ESliceType.encode(e.type),bounds:b(e.bounds)},e.name?{"Nm  ":e.name}:{}),{url:e.url,null:e.target,Msge:e.message,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horzAlign:d.ESliceHorzAlign.encode(e.horizontalAlignment),vertAlign:d.ESliceVertAlign.encode(e.verticalAlignment),bgColorType:d.ESliceBGColorType.encode(e.backgroundColorType)});if("color"===e.backgroundColorType){var r=e.backgroundColor;t.bgColor={"Rd  ":r.r,"Grn ":r.g,"Bl  ":r.b,alpha:r.a}}t.topOutset=e.topOutset||0,t.leftOutset=e.leftOutset||0,t.bottomOutset=e.bottomOutset||0,t.rightOutset=e.rightOutset||0,v.slices.push(t)}),(0,d.writeVersionAndDescriptor)(e,"","null",v,"slices")}),c(1064,function(e){return void 0!==e.pixelAspectRatio},function(e,t){if((0,a.readUint32)(e)>2)throw Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:(0,a.readFloat64)(e)}},function(e,t){(0,o.writeUint32)(e,2),(0,o.writeFloat64)(e,t.pixelAspectRatio.aspect)}),c(1041,function(e){return void 0!==e.iccUntaggedProfile},function(e,t){t.iccUntaggedProfile=!!(0,a.readUint8)(e)},function(e,t){(0,o.writeUint8)(e,+!!t.iccUntaggedProfile)}),s.MOCK_HANDLERS&&c(1039,function(e){return void 0!==e._ir1039},function(e,t,r){t._ir1039=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1039)}),c(1044,function(e){return void 0!==e.idsSeedNumber},function(e,t){return t.idsSeedNumber=(0,a.readUint32)(e)},function(e,t){return(0,o.writeUint32)(e,t.idsSeedNumber)}),c(1036,function(e){return void 0!==e.thumbnail||void 0!==e.thumbnailRaw},function(e,t,r){var n=(0,a.readUint32)(e),i=(0,a.readUint32)(e),o=(0,a.readUint32)(e);(0,a.readUint32)(e),(0,a.readUint32)(e),(0,a.readUint32)(e);var l=(0,a.readUint16)(e),d=(0,a.readUint16)(e);if(1!==n||24!==l||1!==d){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(n,", bitsPerPixel: ").concat(l,", planes: ").concat(d,")")),(0,a.skipBytes)(e,r());return}var c=r(),u=(0,a.readBytes)(e,c);e.useRawThumbnail?t.thumbnailRaw={width:i,height:o,data:u}:u.byteLength&&(t.thumbnail=(0,s.createCanvasFromData)(u))},function(e,t){var r,n=0,a=0,s=new Uint8Array(0);if(t.thumbnailRaw)n=t.thumbnailRaw.width,a=t.thumbnailRaw.height,s=t.thumbnailRaw.data;else try{var l=null==(r=t.thumbnail.toDataURL("image/jpeg",1))?void 0:r.substring(23);l&&(s=(0,i.toByteArray)(l),n=t.thumbnail.width,a=t.thumbnail.height)}catch(e){}var d=4*Math.floor((24*n+31)/32),c=d*a*1,u=s.length;(0,o.writeUint32)(e,1),(0,o.writeUint32)(e,n),(0,o.writeUint32)(e,a),(0,o.writeUint32)(e,d),(0,o.writeUint32)(e,c),(0,o.writeUint32)(e,u),(0,o.writeUint16)(e,24),(0,o.writeUint16)(e,1),(0,o.writeBytes)(e,s)}),c(1057,function(e){return void 0!==e.versionInfo},function(e,t,r){if(1!==(0,a.readUint32)(e))throw Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!(0,a.readUint8)(e),writerName:(0,a.readUnicodeString)(e),readerName:(0,a.readUnicodeString)(e),fileVersion:(0,a.readUint32)(e)},(0,a.skipBytes)(e,r())},function(e,t){var r=t.versionInfo;(0,o.writeUint32)(e,1),(0,o.writeUint8)(e,+!!r.hasRealMergedData),(0,o.writeUnicodeString)(e,r.writerName),(0,o.writeUnicodeString)(e,r.readerName),(0,o.writeUint32)(e,r.fileVersion)}),s.MOCK_HANDLERS&&c(1058,function(e){return void 0!==e._ir1058},function(e,t,r){t._ir1058=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1058)}),c(7e3,function(e){return void 0!==e.imageReadyVariables},function(e,t,r){t.imageReadyVariables=g(e,r())},function(e,t){m(e,t.imageReadyVariables)}),c(7001,function(e){return void 0!==e.imageReadyDataSets},function(e,t,r){t.imageReadyDataSets=g(e,r())},function(e,t){m(e,t.imageReadyDataSets)}),c(1088,function(e){return void 0!==e.pathSelectionState},function(e,t,r){t.pathSelectionState=(0,d.readVersionAndDescriptor)(e).null},function(e,t){var r={null:t.pathSelectionState};(0,d.writeVersionAndDescriptor)(e,"","null",r)}),s.MOCK_HANDLERS&&c(1025,function(e){return void 0!==e._ir1025},function(e,t,r){t._ir1025=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir1025)});var C=(0,s.createEnum)("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});c(4e3,function(e){return void 0!==e.animations},function(e,t,r){var n=(0,a.readSignature)(e);if("mani"===n)(0,a.checkSignature)(e,"IRFR"),(0,a.readSection)(e,1,function(r){for(;r()>0;)!function(){(0,a.checkSignature)(e,"8BIM");var r=(0,a.readSignature)(e);(0,a.readSection)(e,1,function(n){if("AnDs"===r){var i=(0,d.readVersionAndDescriptor)(e);t.animations={frames:i.FrIn.map(function(e){return{id:e.FrID,delay:(e.FrDl||0)/100,dispose:e.FrDs?C.decode(e.FrDs):"auto"}}),animations:i.FSts.map(function(e){return{id:e.FsID,frames:e.FsFr,repeats:e.LCnt,activeFrame:e.AFrm||0}})}}else if("Roll"===r){var o=(0,a.readBytes)(e,n());e.logDevFeatures&&e.log("#4000 Roll",o)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",r)})}()});else if("mopt"===n){var i=(0,a.readBytes)(e,r());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",n)},function(e,t){t.animations&&((0,o.writeSignature)(e,"mani"),(0,o.writeSignature)(e,"IRFR"),(0,o.writeSection)(e,1,function(){(0,o.writeSignature)(e,"8BIM"),(0,o.writeSignature)(e,"AnDs"),(0,o.writeSection)(e,1,function(){for(var r={FrIn:[],FSts:[]},n=0;n<t.animations.frames.length;n++){var i=t.animations.frames[n],a={FrID:i.id};i.delay&&(a.FrDl=100*i.delay|0),a.FrDs=C.encode(i.dispose),r.FrIn.push(a)}for(var n=0;n<t.animations.animations.length;n++){var o=t.animations.animations[n],s={FsID:o.id,AFrm:0|o.activeFrame,FsFr:o.frames,LCnt:0|o.repeats};r.FSts.push(s)}(0,d.writeVersionAndDescriptor)(e,"","null",r)})}))}),s.MOCK_HANDLERS&&c(4001,function(e){return void 0!==e._ir4001},function(e,t,r){if(s.MOCK_HANDLERS){t._ir4001=(0,a.readBytes)(e,r());return}var n=(0,a.readSignature)(e);if("mfri"===n){if(2!==(0,a.readUint32)(e))throw Error("Invalid mfri version");var i=(0,a.readUint32)(e),o=(0,a.readBytes)(e,i);e.logDevFeatures&&e.log("mfri",o)}else if("mset"===n){var l=(0,d.readVersionAndDescriptor)(e);e.logDevFeatures&&e.log("mset",l)}else e.logMissingFeatures&&e.log("Unhandled key in #4001",n)},function(e,t){(0,o.writeBytes)(e,t._ir4001)}),s.MOCK_HANDLERS&&c(4002,function(e){return void 0!==e._ir4002},function(e,t,r){t._ir4002=(0,a.readBytes)(e,r())},function(e,t){(0,o.writeBytes)(e,t._ir4002)})}),r("5wpNI",function(e,t){"use strict";function r(e){return(0xffffff80&e)==0?1:(0xfffff800&e)==0?2:(0xffff0000&e)==0?3:4}function n(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319){if(n+1<e.length){var a=e.charCodeAt(n+1);(64512&a)==56320&&(n++,t+=r(((1023&i)<<10)+(1023&a)+65536))}}else t+=r(i)}return t}function i(e,t,n){var i=r(n);switch(i){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=63&n|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=63&n|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=63&n|128}return i}function a(e,t,r){for(var n=0;n<r.length;n++){var a=r.charCodeAt(n);if(a>=55296&&a<=56319){if(n+1<r.length){var o=r.charCodeAt(n+1);if((64512&o)==56320){n++;var s=((1023&a)<<10)+(1023&o)+65536;t+=i(e,t,s)}}}else t+=i(e,t,a)}return t}function o(e,t){if(t>=e.length)throw Error("Invalid byte index");var r=e[t];if((192&r)==128)return 63&r;throw Error("Invalid continuation byte")}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeString=e.exports.encodeString=e.exports.encodeStringTo=e.exports.stringLengthInBytes=void 0,e.exports.stringLengthInBytes=n,e.exports.encodeStringTo=a,e.exports.encodeString=function(e){if(e.length>1e3&&"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);var t=new Uint8Array(n(e));return a(t,0,e),t},e.exports.decodeString=function(e){if(e.byteLength>1e3&&"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var t=[],r=0;r<e.length;){var n=e[r++],i=void 0;if((128&n)==0)i=n;else if((224&n)==192){var a=o(e,r++);if((i=(31&n)<<6|a)<128)throw Error("Invalid continuation byte")}else if((240&n)==224){var a=o(e,r++),s=o(e,r++);if((i=(15&n)<<12|a<<6|s)<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((248&n)==240){var a=o(e,r++),s=o(e,r++);if((i=(15&n)<<18|a<<12|s<<6|o(e,r++))<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,t.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|1023&i),t.push(String.fromCharCode(i))}return t.join("")}}),r("klnll",function(e,r){"use strict";var n,i=e.exports&&e.exports.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=e.exports&&e.exports.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ESliceOrigin=e.exports.ESliceVertAlign=e.exports.ESliceHorzAlign=e.exports.ESliceType=e.exports.FrFl=e.exports.FStl=e.exports.ClrS=e.exports.gradientInterpolationMethodType=e.exports.stdTrackID=e.exports.animInterpStyleEnum=e.exports.GrdT=e.exports.IGSr=e.exports.BETE=e.exports.BESs=e.exports.bvlT=e.exports.BESl=e.exports.BlnM=e.exports.warpStyle=e.exports.Annt=e.exports.Ornt=e.exports.textGridding=e.exports.frac=e.exports.unitsValue=e.exports.unitsPercentF=e.exports.unitsPercent=e.exports.unitsAngle=e.exports.parseUnitsToNumber=e.exports.parseUnitsOrNumber=e.exports.parseUnits=e.exports.parsePercentOrAngle=e.exports.parsePercent=e.exports.parseAngle=e.exports.serializeColor=e.exports.parseColor=e.exports.serializeVectorContent=e.exports.parseVectorContent=e.exports.serializeTrackList=e.exports.parseTrackList=e.exports.parseEffects=e.exports.serializeEffects=e.exports.boundsToDescBounds=e.exports.descBoundsToBounds=e.exports.xyToHorzVrtc=e.exports.horzVrtcToXY=e.exports.writeVersionAndDescriptor=e.exports.readVersionAndDescriptor=e.exports.writeDescriptorStructure=e.exports.readDescriptorStructure=e.exports.readAsciiStringOrClassId=e.exports.setLogErrors=void 0,e.exports.presetKindType=e.exports.prjM=e.exports.FlMd=e.exports.IntC=e.exports.IntE=e.exports.Drct=e.exports.WndM=e.exports.CntE=e.exports.FlCl=e.exports.ExtR=e.exports.ExtT=e.exports.DfsM=e.exports.blurType=e.exports.Lns=e.exports.MztT=e.exports.Chnl=e.exports.Dstr=e.exports.ZZTy=e.exports.Wvtp=e.exports.SphM=e.exports.RplS=e.exports.Cnvr=e.exports.UndA=e.exports.DspM=e.exports.SmBQ=e.exports.SmBM=e.exports.BlrQ=e.exports.BlrM=e.exports.strokeStyleLineAlignment=e.exports.strokeStyleLineJoinType=e.exports.strokeStyleLineCapType=e.exports.ESliceBGColorType=void 0;var o=t("jE67M"),s=t("5OPaf"),l=t("kCSTH"),d={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},c=(n={},Object.keys(d).forEach(function(e){return n[d[e]]=e}),n),u=!1;function f(e,t){return{name:e,classID:t}}e.exports.setLogErrors=function(e){u=e};for(var p=f("","null"),h={strokeStyleContent:f("","solidColorLayer"),printProofSetup:f("Proof Setup","proofSetup"),Grad:f("Gradient","Grdn"),Trnf:f("Transform","Trnf"),patternFill:f("","patternFill"),ebbl:f("","ebbl"),SoFi:f("","SoFi"),GrFl:f("","GrFl"),sdwC:f("","RGBC"),hglC:f("","RGBC"),"Clr ":f("","RGBC"),tintColor:f("","RGBC"),Ofst:f("","Pnt "),ChFX:f("","ChFX"),MpgS:f("","ShpC"),DrSh:f("","DrSh"),IrSh:f("","IrSh"),OrGl:f("","OrGl"),IrGl:f("","IrGl"),TrnS:f("","ShpC"),Ptrn:f("","Ptrn"),FrFX:f("","FrFX"),phase:f("","Pnt "),frameStep:p,duration:p,workInTime:p,workOutTime:p,audioClipGroupList:p,bounds:f("","Rctn"),customEnvelopeWarp:f("","customEnvelopeWarp"),warp:f("","warp"),"Sz  ":f("","Pnt "),origin:f("","Pnt "),autoExpandOffset:f("","Pnt "),keyOriginShapeBBox:f("","unitRect"),Vrsn:p,psVersion:p,docDefaultNewArtboardBackgroundColor:f("","RGBC"),artboardRect:f("","classFloatRect"),keyOriginRRectRadii:f("","radii"),keyOriginBoxCorners:p,rectangleCornerA:f("","Pnt "),rectangleCornerB:f("","Pnt "),rectangleCornerC:f("","Pnt "),rectangleCornerD:f("","Pnt "),compInfo:p,quiltWarp:f("","quiltWarp"),generatorSettings:p,crema:p,FrIn:p,blendOptions:p,FXRf:p,Lefx:p,time:p,animKey:p,timeScope:p,inTime:p,outTime:p,sheetStyle:p,translation:p,Skew:p,boundingBox:f("","boundingBox"),"Lnk ":f("","ExternalFileLink"),frameReader:f("","FrameReader"),effectParams:f("","motionTrackEffectParams"),Impr:f("None","none"),Anch:f("","Pnt "),"Fwd ":f("","Pnt "),"Bwd ":f("","Pnt "),FlrC:f("","Pnt "),meshBoundaryPath:f("","pathClass"),filterFX:f("","filterFXStyle"),Fltr:f("","rigidTransform"),FrgC:f("","RGBC"),BckC:f("","RGBC"),sdwM:f("Parameters","adaptCorrectTones"),hglM:f("Parameters","adaptCorrectTones"),customShape:f("","customShape"),origFXRefPoint:p,FXRefPoint:p,ClMg:f("","ClMg")},g={"Crv ":f("","CrPt"),Clrs:f("","Clrt"),Trns:f("","TrnS"),keyDescriptorList:p,solidFillMulti:f("","SoFi"),gradientFillMulti:f("","GrFl"),dropShadowMulti:f("","DrSh"),innerShadowMulti:f("","IrSh"),frameFXMulti:f("","FrFX"),FrIn:p,FSts:p,LaSt:p,sheetTimelineOptions:p,trackList:f("","animationTrack"),globalTrackList:f("","animationTrack"),keyList:p,audioClipGroupList:p,audioClipList:p,countObjectList:f("","countObject"),countGroupList:f("","countGroup"),slices:f("","slice"),"Pts ":f("","Pthp"),SbpL:f("","SbpL"),pathComponents:f("","PaCm"),filterFXList:f("","filterFX"),puppetShapeList:f("","puppetShape"),channelDenoise:f("","channelDenoiseParams"),ShrP:f("","Pnt "),layerSettings:p,list:p,Adjs:f("","CrvA")},m={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},v=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],y={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},w={},b=0,x=Object.keys(m);b<x.length;b++)for(var S=x[b],k=0,I=m[S];k<I.length;k++){var _=I[k];w[_]=S}for(var C=0,F=Object.keys(h);C<F.length;C++){var _=F[C];w[_]||(w[_]="Objc")}for(var D=0,U=Object.keys(g);D<U.length;D++){var _=U[D];y[_]="Objc"}function A(e){var t=(0,s.readInt32)(e);return(0,s.readAsciiString)(e,t||4)}function E(e,t){if(4===t.length&&"warp"!==t&&"time"!==t&&"hold"!==t&&"list"!==t)(0,l.writeInt32)(e,0),(0,l.writeSignature)(e,t);else{(0,l.writeInt32)(e,t.length);for(var r=0;r<t.length;r++)(0,l.writeUint8)(e,t.charCodeAt(r))}}function P(e,t){for(var r=O(e),n=t?{_name:r.name,_classID:r.classID}:{},i=(0,s.readUint32)(e),a=0;a<i;a++){var o=A(e),l=(0,s.readSignature)(e),c=function e(t,r,n){switch(r){case"obj ":return function(e){for(var t=(0,s.readInt32)(e),r=[],n=0;n<t;n++){var i=(0,s.readSignature)(e);switch(i){case"prop":O(e);var a=A(e);r.push(a);break;case"Clss":r.push(O(e));break;case"Enmr":O(e);var o=A(e),l=A(e);r.push("".concat(o,".").concat(l));break;case"rele":O(e),r.push((0,s.readUint32)(e));break;case"Idnt":case"indx":r.push((0,s.readInt32)(e));break;case"name":O(e),r.push((0,s.readUnicodeString)(e));break;default:throw Error("Invalid descriptor reference type: ".concat(i))}}return r}(t);case"Objc":case"GlbO":return P(t,n);case"VlLs":for(var i=(0,s.readInt32)(t),a=[],o=0;o<i;o++){var l=(0,s.readSignature)(t);a.push(e(t,l,n))}return a;case"doub":return(0,s.readFloat64)(t);case"UntF":var c=(0,s.readSignature)(t),u=(0,s.readFloat64)(t);if(!d[c])throw Error("Invalid units: ".concat(c));return{units:d[c],value:u};case"UnFl":var c=(0,s.readSignature)(t),u=(0,s.readFloat32)(t);if(!d[c])throw Error("Invalid units: ".concat(c));return{units:d[c],value:u};case"TEXT":return(0,s.readUnicodeString)(t);case"enum":var f=A(t),u=A(t);return"".concat(f,".").concat(u);case"long":return(0,s.readInt32)(t);case"comp":return{low:(0,s.readUint32)(t),high:(0,s.readUint32)(t)};case"bool":return!!(0,s.readUint8)(t);case"type":case"GlbC":return O(t);case"alis":var p=(0,s.readInt32)(t);return(0,s.readAsciiString)(t,p);case"tdta":var h=(0,s.readInt32)(t);return(0,s.readBytes)(t,h);case"ObAr":(0,s.readInt32)(t),(0,s.readUnicodeString)(t),A(t);for(var g=(0,s.readInt32)(t),a=[],o=0;o<g;o++){var m=A(t);(0,s.readSignature)(t),(0,s.readSignature)(t);for(var v=(0,s.readInt32)(t),y=[],w=0;w<v;w++)y.push((0,s.readFloat64)(t));a.push({type:m,values:y})}return a;case"Pth ":(0,s.readInt32)(t);var b=(0,s.readSignature)(t);(0,s.readInt32LE)(t);var x=(0,s.readInt32LE)(t);return{sig:b,path:(0,s.readUnicodeStringWithLengthLE)(t,x)};default:throw Error("Invalid TySh descriptor OSType: ".concat(r," at ").concat(t.offset.toString(16)))}}(e,l,t);n[o]=c}return n}function M(e,t,r,n,i){u&&!r&&console.log("Missing classId for: ",t,r,n),(0,l.writeUnicodeStringWithPadding)(e,t),E(e,r);var a=Object.keys(n),o=a.length;"_name"in n&&o--,"_classID"in n&&o--,(0,l.writeUint32)(e,o);for(var s=0;s<a.length;s++){var d=a[s];if("_name"!==d&&"_classID"!==d){var m=function(e,t,r,n){if("presetKind"===e)return"string"==typeof t?"enum":"long";if("null"===e&&"slices"===r)return"TEXT";if("groupID"===e)return"slices"===r?"long":"TEXT";if("Sz  "===e)return"Wdth"in t?"Objc":"units"in t?"UntF":"doub";if("Type"===e)return"string"==typeof t?"enum":"long";if("AntA"===e)return"string"==typeof t?"enum":"bool";else if(("Hrzn"===e||"Vrtc"===e)&&("keyType.Pstn"===n.Type||"Ofst"===n._classID))return"long";else if("Hrzn"===e||"Vrtc"===e||"Top "===e||"Left"===e||"Btom"===e||"Rght"===e)return"slices"===r?"long":"number"==typeof t?"doub":"UntF";else if("Vrsn"===e)return"number"==typeof t?"long":"Objc";else if("Rd  "===e||"Grn "===e||"Bl  "===e)return"artd"===r?"long":"doub";else if("Trnf"===e)return Array.isArray(t)?"VlLs":"Objc";else return w[e]}(d,n[d],i,n),b=h[d];"bounds"===d&&"text"===i?b=f("","bounds"):"origin"===d?m="slices"===i?"enum":"Objc":("Cyn "===d||"Mgnt"===d||"Ylw "===d||"Blck"===d)&&"CMYC"===n._classID?m="doub":/^PN[a-z][a-z]$/.test(d)?m="TEXT":/^PT[a-z][a-z]$/.test(d)?m="long":/^PF[a-z][a-z]$/.test(d)||("Rds "===d||"Thsh"===d)&&"number"==typeof n[d]&&"SmrB"===n._classID?m="doub":"ClSz"===d||"Rds "===d||"Amnt"===d?m="number"==typeof n[d]?"long":"UntF":("sdwM"===d||"hglM"===d)&&"string"==typeof n[d]||"blur"===d&&"string"==typeof n[d]?m="enum":"Hght"===d&&"number"==typeof n[d]&&"Embs"===n._classID||"Angl"===d&&"number"==typeof n[d]&&("Embs"===n._classID||"smartSharpen"===n._classID||"Twrl"===n._classID||"MtnB"===n._classID)?m="long":"Angl"===d&&"number"==typeof n[d]?m="doub":"bounds"===d&&"slices"===i?(m="Objc",b=f("","Rct1")):"Scl "===d?"object"==typeof n[d]&&"Hrzn"in n[d]?(m="Objc",b=p):m="number"==typeof n[d]?"long":"UntF":"audioClipGroupList"===d&&1===a.length?m="VlLs":("Strt"===d||"Brgh"===d)&&"H   "in n?m="doub":"Wdth"===d&&"object"==typeof n[d]?m="UntF":"Ofst"===d&&"number"==typeof n[d]?m="long":"Strt"===d&&"object"==typeof n[d]?(m="Objc",b=p):-1!==v.indexOf(d)?m="RGBC"===r&&"artd"!==i?"doub":"long":"profile"===d?m="printOutput"===r?"TEXT":"tdta":"strokeStyleContent"===d?n[d]["Clr "]?b=f("","solidColorLayer"):n[d].Grad?b=f("","gradientLayer"):n[d].Ptrn?b=f("","patternLayer"):u&&console.log("Invalid strokeStyleContent value",n[d]):"bounds"===d&&"quiltWarp"===i&&(b=f("","classFloatRect")),b&&"RGBC"===b.classID&&"H   "in n[d]&&(b={classID:"HSBC",name:""}),E(e,d),(0,l.writeSignature)(e,m||"long"),function e(t,r,n,i,a,o){switch(r){case"obj ":!function(e,t,r){(0,l.writeInt32)(e,r.length);for(var n=0;n<r.length;n++){var i=r[n],a="unknown";switch("string"==typeof i&&(a=/^[a-z ]+\.[a-z ]+$/i.test(i)?"Enmr":"name"),(0,l.writeSignature)(e,a),a){case"Enmr":var o=i.split("."),s=o[0],d=o[1];T(e,"\0",s),E(e,s),E(e,d);break;case"name":T(e,"\0","Lyr "),(0,l.writeUnicodeString)(e,i+"\0");break;default:throw Error("Invalid descriptor reference type: ".concat(a))}}}(t,0,n);break;case"Objc":case"GlbO":if("object"!=typeof n)throw Error("Invalid struct value: ".concat(JSON.stringify(n),", key: ").concat(i));if(!a)throw Error("Missing ext type for: '".concat(i,"' (").concat(JSON.stringify(n),")"));M(t,n._name||a.name,n._classID||a.classID,n,o);break;case"VlLs":if(!Array.isArray(n))throw Error("Invalid list value: ".concat(JSON.stringify(n),", key: ").concat(i));(0,l.writeInt32)(t,n.length);for(var s=0;s<n.length;s++){var d=y[i];(0,l.writeSignature)(t,d||"long"),e(t,d||"long",n[s],"".concat(i,"[]"),g[i],o),u&&!d&&console.log("Missing descriptor array type for: '".concat(i,"' in"),n)}break;case"doub":if("number"!=typeof n)throw Error("Invalid number value: ".concat(JSON.stringify(n),", key: ").concat(i));(0,l.writeFloat64)(t,n);break;case"UntF":if(!c[n.units])throw Error("Invalid units: ".concat(n.units," in ").concat(i));(0,l.writeSignature)(t,c[n.units]),(0,l.writeFloat64)(t,n.value);break;case"UnFl":if(!c[n.units])throw Error("Invalid units: ".concat(n.units," in ").concat(i));(0,l.writeSignature)(t,c[n.units]),(0,l.writeFloat32)(t,n.value);break;case"TEXT":(0,l.writeUnicodeStringWithPadding)(t,n);break;case"enum":if("string"!=typeof n)throw Error("Invalid enum value: ".concat(JSON.stringify(n),", key: ").concat(i));var f=n.split("."),p=f[0],h=f[1];E(t,p),E(t,h);break;case"long":if("number"!=typeof n)throw Error("Invalid integer value: ".concat(JSON.stringify(n),", key: ").concat(i));(0,l.writeInt32)(t,n);break;case"bool":if("boolean"!=typeof n)throw Error("Invalid boolean value: ".concat(JSON.stringify(n),", key: ").concat(i));(0,l.writeUint8)(t,+!!n);break;case"tdta":(0,l.writeInt32)(t,n.byteLength),(0,l.writeBytes)(t,n);break;case"ObAr":(0,l.writeInt32)(t,16),(0,l.writeUnicodeStringWithPadding)(t,"");var m=B[i];if(!m)throw Error("Not implemented ObArType for: ".concat(i));E(t,m),(0,l.writeInt32)(t,n.length);for(var s=0;s<n.length;s++){E(t,n[s].type),(0,l.writeSignature)(t,"UnFl"),(0,l.writeSignature)(t,"#Pxl"),(0,l.writeInt32)(t,n[s].values.length);for(var v=0;v<n[s].values.length;v++)(0,l.writeFloat64)(t,n[s].values[v])}break;case"Pth ":var w=12+2*n.path.length;(0,l.writeInt32)(t,w),(0,l.writeSignature)(t,n.sig),(0,l.writeInt32LE)(t,w),(0,l.writeInt32LE)(t,n.path.length),(0,l.writeUnicodeStringWithoutLengthLE)(t,n.path);break;default:throw Error("Not implemented descriptor OSType: ".concat(r))}}(e,m||"long",n[d],d,b,i),u&&!m&&console.log("Missing descriptor field type for: '".concat(d,"' in"),n)}}}e.exports.readAsciiStringOrClassId=A,e.exports.readDescriptorStructure=P,e.exports.writeDescriptorStructure=M;var B={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function O(e){return{name:(0,s.readUnicodeString)(e),classID:A(e)}}function T(e,t,r){(0,l.writeUnicodeString)(e,t),E(e,r)}function L(e){return{x:e.Hrzn,y:e.Vrtc}}function R(e){return{Hrzn:e.x,Vrtc:e.y}}function z(t){var r={enabled:!!t.enab,position:e.exports.FStl.decode(t.Styl),fillType:e.exports.FrFl.decode(t.PntT),blendMode:e.exports.BlnM.decode(t["Md  "]),opacity:er(t.Opct),size:ei(t["Sz  "])};return void 0!==t.present&&(r.present=t.present),void 0!==t.showInDialog&&(r.showInDialog=t.showInDialog),void 0!==t.overprint&&(r.overprint=t.overprint),t["Clr "]&&(r.color=Q(t["Clr "])),t.Grad&&(r.gradient=Y(t)),t.Ptrn&&(r.pattern=q(t)),r}function V(t){var r={};return r.enab=!!t.enabled,void 0!==t.present&&(r.present=!!t.present),void 0!==t.showInDialog&&(r.showInDialog=!!t.showInDialog),r.Styl=e.exports.FStl.encode(t.position),r.PntT=e.exports.FrFl.encode(t.fillType),r["Md  "]=e.exports.BlnM.encode(t.blendMode),r.Opct=eo(t.opacity),r["Sz  "]=el(t.size,"size"),t.color&&(r["Clr "]=ee(t.color)),t.gradient&&(r=i(i({},r),$(t.gradient))),t.pattern&&(r=i(i({},r),J(t.pattern))),void 0!==t.overprint&&(r.overprint=!!t.overprint),r}function N(e,t,r){for(var n,i,a,o=r?{"Scl ":es(null!=(n=e.scale)?n:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":es(null!=(i=e.scale)?i:1)},s=0,l=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"];s<l.length;s++){var d=l[s];if(e[d]&&!Array.isArray(e[d]))throw Error("".concat(d," should be an array"))}var c=function(e){return!!e&&e.length>1&&r},u=function(e){return!!e&&e.length>=1&&(!r||1===e.length)};if(u(e.dropShadow)&&(o.DrSh=X(e.dropShadow[0],"dropShadow",t)),c(e.dropShadow)&&(o.dropShadowMulti=e.dropShadow.map(function(e){return X(e,"dropShadow",t)})),u(e.innerShadow)&&(o.IrSh=X(e.innerShadow[0],"innerShadow",t)),c(e.innerShadow)&&(o.innerShadowMulti=e.innerShadow.map(function(e){return X(e,"innerShadow",t)})),e.outerGlow&&(o.OrGl=X(e.outerGlow,"outerGlow",t)),c(e.solidFill)&&(o.solidFillMulti=e.solidFill.map(function(e){return X(e,"solidFill",t)})),c(e.gradientOverlay)&&(o.gradientFillMulti=e.gradientOverlay.map(function(e){return X(e,"gradientOverlay",t)})),c(e.stroke)&&(o.frameFXMulti=e.stroke.map(function(e){return V(e)})),e.innerGlow&&(o.IrGl=X(e.innerGlow,"innerGlow",t)),e.bevel&&(o.ebbl=X(e.bevel,"bevel",t)),u(e.solidFill)&&(o.SoFi=X(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(o.patternFill=X(e.patternOverlay,"patternOverlay",t)),u(e.gradientOverlay)&&(o.GrFl=X(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(o.ChFX=X(e.satin,"satin",t)),u(e.stroke)&&(o.FrFX=V(null==(a=e.stroke)?void 0:a[0])),r){o.numModifyingFX=0;for(var f=0,p=Object.keys(e);f<p.length;f++){var d=p[f],h=e[d];if(Array.isArray(h))for(var g=0;g<h.length;g++)h[g].enabled&&o.numModifyingFX++;else h.enabled&&o.numModifyingFX++}}return o}function G(e,t){var r={},n=e.masterFXSwitch,i=e.DrSh,o=e.dropShadowMulti,s=e.IrSh,l=e.innerShadowMulti,d=e.OrGl,c=e.IrGl,u=e.ebbl,f=e.SoFi,p=e.solidFillMulti,h=e.patternFill,g=e.GrFl,m=e.gradientFillMulti,v=e.ChFX,y=e.FrFX,w=e.frameFXMulti,b=(e.numModifyingFX,a(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]));return n||(r.disabled=!0),e["Scl "]&&(r.scale=er(e["Scl "])),i&&(r.dropShadow=[H(i,t)]),o&&(r.dropShadow=o.map(function(e){return H(e,t)})),s&&(r.innerShadow=[H(s,t)]),l&&(r.innerShadow=l.map(function(e){return H(e,t)})),d&&(r.outerGlow=H(d,t)),c&&(r.innerGlow=H(c,t)),u&&(r.bevel=H(u,t)),f&&(r.solidFill=[H(f,t)]),p&&(r.solidFill=p.map(function(e){return H(e,t)})),h&&(r.patternOverlay=H(h,t)),g&&(r.gradientOverlay=[H(g,t)]),m&&(r.gradientOverlay=m.map(function(e){return H(e,t)})),v&&(r.satin=H(v,t)),y&&(r.stroke=[z(y)]),w&&(r.stroke=w.map(function(e){return z(e)})),t&&Object.keys(b).length>1&&console.log("Unhandled effect keys:",b),r}function j(t,r){for(var n=[],i=0;i<t.length;i++){var a=t[i],o=a.time,s=o.denominator,l=o.numerator,d=a.selected,c=a.animKey,u={numerator:l,denominator:s},f=e.exports.animInterpStyleEnum.decode(a.animInterpStyle);switch(c.Type){case"keyType.Opct":n.push({interpolation:f,time:u,selected:d,type:"opacity",value:er(c.Opct)});break;case"keyType.Pstn":n.push({interpolation:f,time:u,selected:d,type:"position",x:c.Hrzn,y:c.Vrtc});break;case"keyType.Trnf":n.push({interpolation:f,time:u,selected:d,type:"transform",scale:L(c["Scl "]),skew:L(c.Skew),rotation:c.rotation,translation:L(c.translation)});break;case"keyType.sheetStyle":var p={interpolation:f,time:u,selected:d,type:"style"};c.sheetStyle.Lefx&&(p.style=G(c.sheetStyle.Lefx,r)),n.push(p);break;case"keyType.globalLighting":n.push({interpolation:f,time:u,selected:d,type:"globalLighting",globalAngle:c.gblA,globalAltitude:c.globalAltitude});break;default:throw Error("Unsupported keyType value")}}return n}function W(t){for(var r=[],n=0;n<t.length;n++){var i=t[n],a=i.time,o=i.selected,s=void 0!==o&&o,l=i.interpolation,d=e.exports.animInterpStyleEnum.encode(l),c=void 0;switch(i.type){case"opacity":c={Type:"keyType.Opct",Opct:eo(i.value)};break;case"position":c={Type:"keyType.Pstn",Hrzn:i.x,Vrtc:i.y};break;case"transform":c={Type:"keyType.Trnf","Scl ":R(i.scale),Skew:R(i.skew),rotation:i.rotation,translation:R(i.translation)};break;case"style":c={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},i.style&&(c.sheetStyle={Vrsn:1,Lefx:N(i.style,!1,!1),blendOptions:{}});break;case"globalLighting":c={Type:"keyType.globalLighting",gblA:i.globalAngle,globalAltitude:i.globalAltitude};break;default:throw Error("Unsupported keyType value")}r.push({Vrsn:1,animInterpStyle:d,time:a,animKey:c,selected:s})}return r}function H(t,r){for(var n={},i=0,a=Object.keys(t);i<a.length;i++){var o=a[i],s=t[o];switch(o){case"enab":n.enabled=!!s;break;case"uglg":n.useGlobalLight=!!s;break;case"AntA":n.antialiased=!!s;break;case"Algn":n.align=!!s;break;case"Dthr":n.dither=!!s;break;case"Invr":n.invert=!!s;break;case"Rvrs":n.reverse=!!s;break;case"Clr ":n.color=Q(s);break;case"hglC":n.highlightColor=Q(s);break;case"sdwC":n.shadowColor=Q(s);break;case"Styl":n.position=e.exports.FStl.decode(s);break;case"Md  ":n.blendMode=e.exports.BlnM.decode(s);break;case"hglM":n.highlightBlendMode=e.exports.BlnM.decode(s);break;case"sdwM":n.shadowBlendMode=e.exports.BlnM.decode(s);break;case"bvlS":n.style=e.exports.BESl.decode(s);break;case"bvlD":n.direction=e.exports.BESs.decode(s);break;case"bvlT":n.technique=e.exports.bvlT.decode(s);break;case"GlwT":n.technique=e.exports.BETE.decode(s);break;case"glwS":n.source=e.exports.IGSr.decode(s);break;case"Type":n.type=e.exports.GrdT.decode(s);break;case"gs99":n.interpolationMethod=e.exports.gradientInterpolationMethodType.decode(s);break;case"Opct":n.opacity=er(s);break;case"hglO":n.highlightOpacity=er(s);break;case"sdwO":n.shadowOpacity=er(s);break;case"lagl":case"Angl":n.angle=et(s);break;case"Lald":n.altitude=et(s);break;case"Sftn":n.soften=ei(s);break;case"srgR":n.strength=er(s);break;case"blur":n.size=ei(s);break;case"Nose":n.noise=er(s);break;case"Inpr":n.range=er(s);break;case"Ckmt":n.choke=ei(s);break;case"ShdN":n.jitter=er(s);break;case"Dstn":n.distance=ei(s);break;case"Scl ":n.scale=er(s);break;case"Ptrn":n.pattern={name:s["Nm  "],id:s.Idnt};break;case"phase":n.phase={x:s.Hrzn,y:s.Vrtc};break;case"Ofst":n.offset={x:er(s.Hrzn),y:er(s.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:s["Nm  "],curve:s["Crv "].map(function(e){return{x:e.Hrzn,y:e.Vrtc}})};break;case"Grad":n.gradient=K(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[o]=s;break;case"_name":case"_classID":break;default:r&&console.log("Invalid effect key: '".concat(o,"', value:"),s)}}return n}function X(t,r,n){for(var i={},a=0,o=Object.keys(t);a<o.length;a++){var s=o[a],l=t[s];switch(s){case"enabled":i.enab=!!l;break;case"useGlobalLight":i.uglg=!!l;break;case"antialiased":i.AntA=!!l;break;case"align":i.Algn=!!l;break;case"dither":i.Dthr=!!l;break;case"invert":i.Invr=!!l;break;case"reverse":i.Rvrs=!!l;break;case"color":i["Clr "]=ee(l);break;case"highlightColor":i.hglC=ee(l);break;case"shadowColor":i.sdwC=ee(l);break;case"position":i.Styl=e.exports.FStl.encode(l);break;case"blendMode":i["Md  "]=e.exports.BlnM.encode(l);break;case"highlightBlendMode":i.hglM=e.exports.BlnM.encode(l);break;case"shadowBlendMode":i.sdwM=e.exports.BlnM.encode(l);break;case"style":i.bvlS=e.exports.BESl.encode(l);break;case"direction":i.bvlD=e.exports.BESs.encode(l);break;case"technique":"bevel"===r?i.bvlT=e.exports.bvlT.encode(l):i.GlwT=e.exports.BETE.encode(l);break;case"source":i.glwS=e.exports.IGSr.encode(l);break;case"type":i.Type=e.exports.GrdT.encode(l);break;case"interpolationMethod":i.gs99=e.exports.gradientInterpolationMethodType.encode(l);break;case"opacity":i.Opct=eo(l);break;case"highlightOpacity":i.hglO=eo(l);break;case"shadowOpacity":i.sdwO=eo(l);break;case"angle":"gradientOverlay"===r||"patternFill"===r?i.Angl=ea(l):i.lagl=ea(l);break;case"altitude":i.Lald=ea(l);break;case"soften":i.Sftn=el(l,s);break;case"strength":i.srgR=eo(l);break;case"size":i.blur=el(l,s);break;case"noise":i.Nose=eo(l);break;case"range":i.Inpr=eo(l);break;case"choke":i.Ckmt=el(l,s);break;case"jitter":i.ShdN=eo(l);break;case"distance":i.Dstn=el(l,s);break;case"scale":i["Scl "]=eo(l);break;case"pattern":i.Ptrn={"Nm  ":l.name,Idnt:l.id};break;case"phase":i.phase={Hrzn:l.x,Vrtc:l.y};break;case"offset":i.Ofst={Hrzn:eo(l.x),Vrtc:eo(l.y)};break;case"contour":i["satin"===r?"MpgS":"TrnS"]={"Nm  ":l.name,"Crv ":l.curve.map(function(e){return{Hrzn:e.x,Vrtc:e.y}})};break;case"gradient":i.Grad=Z(l);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":i[s]=l;break;default:n&&console.log("Invalid effect key: '".concat(s,"', value:"),l)}}return i}function K(t){if("GrdF.CstS"!==t.GrdF)return{type:"noise",name:t["Nm  "],roughness:t.Smth/4096,colorModel:e.exports.ClrS.decode(t.ClrS),randomSeed:t.RndS,restrictColors:!!t.VctC,addTransparency:!!t.ShTr,min:t["Mnm "].map(function(e){return e/100}),max:t["Mxm "].map(function(e){return e/100})};var r=t.Intr||4096;return{type:"solid",name:t["Nm  "],smoothness:t.Intr/4096,colorStops:t.Clrs.map(function(e){return{color:Q(e["Clr "]),location:e.Lctn/r,midpoint:e.Mdpn/100}}),opacityStops:t.Trns.map(function(e){return{opacity:er(e.Opct),location:e.Lctn/r,midpoint:e.Mdpn/100}})}}function Z(t){if("solid"!==t.type)return{GrdF:"GrdF.ClNs","Nm  ":t.name||"",ShTr:!!t.addTransparency,VctC:!!t.restrictColors,ClrS:e.exports.ClrS.encode(t.colorModel),RndS:t.randomSeed||0,Smth:Math.round((null!=(n=t.roughness)?n:1)*4096),"Mnm ":(t.min||[0,0,0,0]).map(function(e){return 100*e}),"Mxm ":(t.max||[1,1,1,1]).map(function(e){return 100*e})};var r,n,i=Math.round((null!=(r=t.smoothness)?r:1)*4096);return{"Nm  ":t.name||"",GrdF:"GrdF.CstS",Intr:i,Clrs:t.colorStops.map(function(e){var t;return{"Clr ":ee(e.color),Type:"Clry.UsrS",Lctn:Math.round(e.location*i),Mdpn:Math.round((null!=(t=e.midpoint)?t:.5)*100)}}),Trns:t.opacityStops.map(function(e){var t;return{Opct:eo(e.opacity),Lctn:Math.round(e.location*i),Mdpn:Math.round((null!=(t=e.midpoint)?t:.5)*100)}})}}function Y(t){var r=K(t.Grad);return r.style=e.exports.GrdT.decode(t.Type),void 0!==t.Dthr&&(r.dither=t.Dthr),void 0!==t.gradientsInterpolationMethod&&(r.interpolationMethod=e.exports.gradientInterpolationMethodType.decode(t.gradientsInterpolationMethod)),void 0!==t.Rvrs&&(r.reverse=t.Rvrs),void 0!==t.Angl&&(r.angle=et(t.Angl)),void 0!==t["Scl "]&&(r.scale=er(t["Scl "])),void 0!==t.Algn&&(r.align=t.Algn),void 0!==t.Ofst&&(r.offset={x:er(t.Ofst.Hrzn),y:er(t.Ofst.Vrtc)}),r}function q(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return void 0!==e.Lnkd&&(t.linked=e.Lnkd),void 0!==e.phase&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function $(t){var r={};return void 0!==t.dither&&(r.Dthr=t.dither),void 0!==t.interpolationMethod&&(r.gradientsInterpolationMethod=e.exports.gradientInterpolationMethodType.encode(t.interpolationMethod)),void 0!==t.reverse&&(r.Rvrs=t.reverse),void 0!==t.angle&&(r.Angl=ea(t.angle)),r.Type=e.exports.GrdT.encode(t.style),void 0!==t.align&&(r.Algn=t.align),void 0!==t.scale&&(r["Scl "]=eo(t.scale)),t.offset&&(r.Ofst={Hrzn:eo(t.offset.x),Vrtc:eo(t.offset.y)}),r.Grad=Z(t),r}function J(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return void 0!==e.linked&&(t.Lnkd=!!e.linked),void 0!==e.phase&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function Q(e){if("H   "in e)return{h:en(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};else if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};else throw Error("Unsupported color descriptor")}function ee(e){if(!e)return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0};if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":ea(360*e.h),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};else if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};else if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};else throw Error("Invalid color value")}function et(e){if(void 0===e)return 0;if("Angle"!==e.units)throw Error("Invalid units: ".concat(e.units));return e.value}function er(e){if(void 0===e)return 1;if("Percent"!==e.units)throw Error("Invalid units: ".concat(e.units));return e.value/100}function en(e){if(void 0===e)return 1;if("Percent"===e.units)return e.value/100;if("Angle"===e.units)return e.value/360;throw Error("Invalid units: ".concat(e.units))}function ei(e){var t=e.units,r=e.value;if("Pixels"!==t&&"Millimeters"!==t&&"Points"!==t&&"None"!==t&&"Picas"!==t&&"Inches"!==t&&"Centimeters"!==t&&"Density"!==t)throw Error("Invalid units: ".concat(JSON.stringify({units:t,value:r})));return{value:r,units:t}}function ea(e){return{units:"Angle",value:e||0}}function eo(e){return{units:"Percent",value:Math.round(100*(e||0))}}function es(e){return{units:"Percent",value:100*(e||0)}}function el(e,t){if(null==e)return{units:"Pixels",value:0};if("object"!=typeof e)throw Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var r=e.units,n=e.value;if("number"!=typeof n)throw Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if("Pixels"!==r&&"Millimeters"!==r&&"Points"!==r&&"None"!==r&&"Picas"!==r&&"Inches"!==r&&"Centimeters"!==r&&"Density"!==r)throw Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:r,value:n}}e.exports.readVersionAndDescriptor=function(e,t){void 0===t&&(t=!1);var r=(0,s.readUint32)(e);if(16!==r)throw Error("Invalid descriptor version: ".concat(r));return P(e,t)},e.exports.writeVersionAndDescriptor=function(e,t,r,n,i){void 0===i&&(i=""),(0,l.writeUint32)(e,16),M(e,t,r,n,i)},e.exports.horzVrtcToXY=L,e.exports.xyToHorzVrtc=R,e.exports.descBoundsToBounds=function(e){return{top:ei(e["Top "]),left:ei(e.Left),right:ei(e.Rght),bottom:ei(e.Btom)}},e.exports.boundsToDescBounds=function(e){var t;return(t={Left:el(e.left,"bounds.left")})["Top "]=el(e.top,"bounds.top"),t.Rght=el(e.right,"bounds.right"),t.Btom=el(e.bottom,"bounds.bottom"),t},e.exports.serializeEffects=N,e.exports.parseEffects=G,e.exports.parseTrackList=function(t,r){for(var n=[],i=0;i<t.length;i++){var a=t[i],o={type:e.exports.stdTrackID.decode(a.trackID),enabled:a.enab,keys:j(a.keyList,r)};a.effectParams&&(o.effectParams={fillCanvas:a.effectParams.fillCanvas,zoomOrigin:a.effectParams.zoomOrigin,keys:j(a.effectParams.keyList,r)}),n.push(o)}return n},e.exports.serializeTrackList=function(t){for(var r=[],n=0;n<t.length;n++){var a=t[n];r.push(i(i({trackID:e.exports.stdTrackID.encode(a.type),Vrsn:1,enab:!!a.enabled,Effc:!!a.effectParams},a.effectParams?{effectParams:{keyList:W(a.keys),fillCanvas:a.effectParams.fillCanvas,zoomOrigin:a.effectParams.zoomOrigin}}:{}),{keyList:W(a.keys)}))}return r},e.exports.parseVectorContent=function(e){if("Grad"in e)return Y(e);if("Ptrn"in e)return i({type:"pattern"},q(e));if("Clr "in e)return{type:"color",color:Q(e["Clr "])};throw Error("Invalid vector content")},e.exports.serializeVectorContent=function(e){return"color"===e.type?{key:"SoCo",descriptor:{"Clr ":ee(e.color)}}:"pattern"===e.type?{key:"PtFl",descriptor:J(e)}:{key:"GdFl",descriptor:$(e)}},e.exports.parseColor=Q,e.exports.serializeColor=ee,e.exports.parseAngle=et,e.exports.parsePercent=er,e.exports.parsePercentOrAngle=en,e.exports.parseUnits=ei,e.exports.parseUnitsOrNumber=function(e,t){return(void 0===t&&(t="Pixels"),"number"==typeof e)?{value:e,units:t}:ei(e)},e.exports.parseUnitsToNumber=function(e,t){var r=e.units,n=e.value;if(r!==t)throw Error("Invalid units: ".concat(JSON.stringify({units:r,value:n})));return n},e.exports.unitsAngle=ea,e.exports.unitsPercent=eo,e.exports.unitsPercentF=es,e.exports.unitsValue=el,e.exports.frac=function(e){return{numerator:e.numerator,denominator:e.denominator}},e.exports.textGridding=(0,o.createEnum)("textGridding","none",{none:"None",round:"Rnd "}),e.exports.Ornt=(0,o.createEnum)("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),e.exports.Annt=(0,o.createEnum)("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),e.exports.warpStyle=(0,o.createEnum)("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),e.exports.BlnM=(0,o.createEnum)("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),e.exports.BESl=(0,o.createEnum)("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),e.exports.bvlT=(0,o.createEnum)("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),e.exports.BESs=(0,o.createEnum)("BESs","up",{up:"In  ",down:"Out "}),e.exports.BETE=(0,o.createEnum)("BETE","softer",{softer:"SfBL",precise:"PrBL"}),e.exports.IGSr=(0,o.createEnum)("IGSr","edge",{edge:"SrcE",center:"SrcC"}),e.exports.GrdT=(0,o.createEnum)("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),e.exports.animInterpStyleEnum=(0,o.createEnum)("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),e.exports.stdTrackID=(0,o.createEnum)("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),e.exports.gradientInterpolationMethodType=(0,o.createEnum)("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),e.exports.ClrS=(0,o.createEnum)("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),e.exports.FStl=(0,o.createEnum)("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),e.exports.FrFl=(0,o.createEnum)("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),e.exports.ESliceType=(0,o.createEnum)("ESliceType","image",{image:"Img ",noImage:"noImage"}),e.exports.ESliceHorzAlign=(0,o.createEnum)("ESliceHorzAlign","default",{default:"default"}),e.exports.ESliceVertAlign=(0,o.createEnum)("ESliceVertAlign","default",{default:"default"}),e.exports.ESliceOrigin=(0,o.createEnum)("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),e.exports.ESliceBGColorType=(0,o.createEnum)("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),e.exports.strokeStyleLineCapType=(0,o.createEnum)("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),e.exports.strokeStyleLineJoinType=(0,o.createEnum)("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),e.exports.strokeStyleLineAlignment=(0,o.createEnum)("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),e.exports.BlrM=(0,o.createEnum)("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),e.exports.BlrQ=(0,o.createEnum)("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),e.exports.SmBM=(0,o.createEnum)("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),e.exports.SmBQ=(0,o.createEnum)("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),e.exports.DspM=(0,o.createEnum)("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),e.exports.UndA=(0,o.createEnum)("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),e.exports.Cnvr=(0,o.createEnum)("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),e.exports.RplS=(0,o.createEnum)("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),e.exports.SphM=(0,o.createEnum)("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),e.exports.Wvtp=(0,o.createEnum)("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),e.exports.ZZTy=(0,o.createEnum)("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),e.exports.Dstr=(0,o.createEnum)("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),e.exports.Chnl=(0,o.createEnum)("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),e.exports.MztT=(0,o.createEnum)("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),e.exports.Lns=(0,o.createEnum)("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),e.exports.blurType=(0,o.createEnum)("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),e.exports.DfsM=(0,o.createEnum)("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),e.exports.ExtT=(0,o.createEnum)("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),e.exports.ExtR=(0,o.createEnum)("ExtR","random",{random:"Rndm","level-based":"LvlB"}),e.exports.FlCl=(0,o.createEnum)("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),e.exports.CntE=(0,o.createEnum)("CntE","upper",{lower:"Lwr ",upper:"Upr "}),e.exports.WndM=(0,o.createEnum)("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),e.exports.Drct=(0,o.createEnum)("Drct","from the right",{left:"Left",right:"Rght"}),e.exports.IntE=(0,o.createEnum)("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),e.exports.IntC=(0,o.createEnum)("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),e.exports.FlMd=(0,o.createEnum)("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "}),e.exports.prjM=(0,o.createEnum)("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"}),e.exports.presetKindType=(0,o.createEnum)("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"})}),r("2TM27",function(e,t){"use strict";function r(e){return 32===e||10===e||13===e||9===e}function n(e){return e>=48&&e<=57||46===e||45===e}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.serializeEngineData=e.exports.parseEngineData=void 0,e.exports.parseEngineData=function(e){var t=0;function i(){for(;t<e.length&&r(e[t]);)t++}function a(){var r=e[t];return t++,92===r&&(r=e[t],t++),r}var o=null,s=[];function l(e){s.length?(d(e),s.push(e)):(s.push(e),o=e)}function d(e){if(!s.length)throw Error("Invalid data");var t=s[s.length-1];if("string"==typeof t)s[s.length-2][t]=e,c();else if(Array.isArray(t))t.push(e);else throw Error("Invalid data")}function c(){if(!s.length)throw Error("Invalid data");s.pop()}i();for(var u=e.length;u>0&&0===e[u-1];)u--;for(;t<u;){var f=t,p=e[f];if(60===p&&60===e[f+1])t+=2,l({});else if(62===p&&62===e[f+1])t+=2,c();else if(47===p){for(var h=t+=1;t<e.length&&!r(e[t]);)t++;for(var g="",m=h;m<t;m++)g+=String.fromCharCode(e[m]);!function(e){s.length||l({});var t=s[s.length-1];if(t&&"string"==typeof t)"nil"===e?d(null):d("/".concat(e));else if(t&&"object"==typeof t)s.push(e);else throw Error("Invalid data")}(g)}else if(40===p)t+=1,d(function(){var r="";if(41===e[t])return t++,r;if(254!==e[t]||255!==e[t+1])throw Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&41!==e[t];)r+=String.fromCharCode(a()<<8|a());return t++,r}());else if(91===p)t+=1,l([]);else if(93===p)t+=1,c();else if(110===p&&117===e[f+1]&&108===e[f+2]&&108===e[f+3])t+=4,d(null);else if(116===p&&114===e[f+1]&&117===e[f+2]&&101===e[f+3])t+=4,d(!0);else if(102===p&&97===e[f+1]&&108===e[f+2]&&115===e[f+3]&&101===e[f+4])t+=5,d(!1);else if(n(p)){for(var v="";t<e.length&&n(e[t]);)v+=String.fromCharCode(e[t]),t++;d(parseFloat(v))}else t+=1,console.log("Invalid token '".concat(String.fromCharCode(p),"' (").concat(p,") at ").concat(t));i()}return o};var i=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],a=["RunLengthArray"];e.exports.serializeEngineData=function(e,t){void 0===t&&(t=!1);var r=new Uint8Array(1024),n=0,o=0;function s(e){if(n>=r.length){var t=new Uint8Array(2*r.length);t.set(r),r=t}r[n]=e,n++}function l(e){for(var t=0;t<e.length;t++)s(e.charCodeAt(t))}function d(){if(t)l(" ");else for(var e=0;e<o;e++)l("	")}function c(e,r){d(),l("/".concat(e)),g(r,e,!0),t||l("\n")}function u(e){return e.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function f(e,t){return t&&-1!==i.indexOf(t)||(0|e)!==e?u(e):e.toString()}function p(e){var t=Object.keys(e);return -1!==t.indexOf("98")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),-1!==t.indexOf("99")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),t}function h(e){(40===e||41===e||92===e)&&s(92),s(e)}function g(e,r,n){function i(){n?l(" "):d()}if(void 0===n&&(n=!1),null===e)i(),l(t?"/nil":"null");else if("number"==typeof e)i(),l(f(e,r));else if("boolean"==typeof e)i(),l(e?"true":"false");else if("string"==typeof e)if(i(),("99"===r||"98"===r)&&"/"===e.charAt(0))l(e);else{l("("),s(254),s(255);for(var m=0;m<e.length;m++){var v=e.charCodeAt(m);h(v>>8&255),h(255&v)}l(")")}else if(Array.isArray(e))if(i(),e.every(function(e){return"number"==typeof e})){l("[");for(var y=-1!==a.indexOf(r),w=0;w<e.length;w++){var b=e[w];l(" "),l(y?f(b):u(b))}l(" ]")}else{l("["),t||l("\n");for(var x=0;x<e.length;x++){var b=e[x];g(b,r),t||l("\n")}d(),l("]")}else if("object"==typeof e){n&&!t&&l("\n"),d(),l("<<"),t||l("\n"),o++;for(var S=0,k=p(e);S<k.length;S++){var I=k[S];c(I,e[I])}o--,d(),l(">>")}}if(t){if("object"==typeof e)for(var m=0,v=p(e);m<v.length;m++){var y=v[m];c(y,e[y])}}else l("\n\n"),g(e);return r.slice(0,n)}}),r("6rQPt",function(e,t){"use strict";var r=e.exports&&e.exports.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encodeEngineData=e.exports.decodeEngineData=void 0;var n={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},i={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},a={font:n,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},o={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},s=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],l=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],d=["none","crisp","strong","smooth","sharp"],c=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function u(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function f(e){if(!e)return{Type:1,Values:[0,0,0,0]};if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw Error("Invalid color type in text layer")}function p(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function h(e,t){if(!e||!t)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}for(var a=0,o=Object.keys(t);a<o.length;a++){var i=o[a];if(e[i]!==t[i])return!1}return!0}function g(e,t,r){for(var n={},i=0;i<t.length;i++){var a=t[i],o=u(a);void 0!==e[o]&&("justification"===a?n[a]=c[e[o]]:"font"===a?n[a]=r[e[o]]:"fillColor"===a||"strokeColor"===a?n[a]=function(e){var t=e.Values;switch(e.Type){case 0:return{k:255*t[1]};case 1:return 1===t[0]?{r:255*t[1],g:255*t[2],b:255*t[3]}:{r:255*t[1],g:255*t[2],b:255*t[3],a:255*t[0]};case 2:return{c:255*t[1],m:255*t[2],y:255*t[3],k:255*t[4]};default:throw Error("Unknown color type in text layer")}}(e[o]):n[a]=e[o])}return n}function m(e,t,r){for(var n,i={},a=0;a<t.length;a++){var o=t[a],s=u(o);void 0!==e[o]&&("justification"===o?i[s]=c.indexOf(null!=(n=e[o])?n:"left"):"font"===o?i[s]=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t.name)return r;return e.push(t),e.length-1}(r,e[o]):"fillColor"===o||"strokeColor"===o?i[s]=f(e[o]):i[s]=e[o])}return i}function v(e,t,r){if(t.length){for(var n=function(r){var n=t[0].style[r];if(void 0!==n){var i=!1;(Array.isArray(n)?t.every(function(e){return p(e.style[r],n)}):"object"==typeof n?t.every(function(e){return h(e.style[r],n)}):t.every(function(e){return e.style[r]===n}))&&(e[r]=n)}if(void 0!==e[r])for(var a=0;a<t.length;a++){var o=t[a],s=!1;(Array.isArray(n)?p(o.style[r],n):"object"==typeof n?h(o.style[r],n):o.style[r]===n)&&delete o.style[r]}},i=0;i<r.length;i++)n(r[i]);t.every(function(e){return 0===Object.keys(e.style).length})&&(t.length=0)}}e.exports.decodeEngineData=function(e){for(var t,r,n,i,a,o,c=e.EngineDict,u=e.ResourceDict,f=u.FontSet.map(function(e){return{name:e.Name,script:e.Script,type:e.FontType,synthetic:e.Synthetic}}),p=c.Editor.Text.replace(/\r/g,"\n"),h=0;/\n$/.test(p);)p=p.substring(0,p.length-1),h++;var m={text:p,antiAlias:null!=(t=d[c.AntiAlias])?t:"smooth",useFractionalGlyphWidths:!!c.UseFractionalGlyphWidths,superscriptSize:u.SuperscriptSize,superscriptPosition:u.SuperscriptPosition,subscriptSize:u.SubscriptSize,subscriptPosition:u.SubscriptPosition,smallCapSize:u.SmallCapSize},y=null==(o=null==(a=null==(i=null==(n=null==(r=c.Rendered)?void 0:r.Shapes)?void 0:n.Children)?void 0:i[0])?void 0:a.Cookie)?void 0:o.Photoshop;y&&(m.shapeType=1===y.ShapeType?"box":"point",y.PointBase&&(m.pointBase=y.PointBase),y.BoxBounds&&(m.boxBounds=y.BoxBounds));var w=c.ParagraphRun;m.paragraphStyle={},m.paragraphStyleRuns=[];for(var b=0;b<w.RunArray.length;b++){var x=w.RunArray[b],S=w.RunLengthArray[b],k=g(x.ParagraphSheet.Properties,s,f);m.paragraphStyleRuns.push({length:S,style:k})}for(var I=h;m.paragraphStyleRuns.length&&I>0;I--)0==--m.paragraphStyleRuns[m.paragraphStyleRuns.length-1].length&&m.paragraphStyleRuns.pop();v(m.paragraphStyle,m.paragraphStyleRuns,s),m.paragraphStyleRuns.length||delete m.paragraphStyleRuns;var _=c.StyleRun;m.style={},m.styleRuns=[];for(var b=0;b<_.RunArray.length;b++){var C=_.RunLengthArray[b],k=g(_.RunArray[b].StyleSheet.StyleSheetData,l,f);k.font||(k.font=f[0]),m.styleRuns.push({length:C,style:k})}for(var I=h;m.styleRuns.length&&I>0;I--)0==--m.styleRuns[m.styleRuns.length-1].length&&m.styleRuns.pop();return v(m.style,m.styleRuns,l),m.styleRuns.length||delete m.styleRuns,m},e.exports.encodeEngineData=function(e){var t,c,u,p,h,g,v,y,w,b,x,S,k="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),I=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],_=(null==(t=e.style)?void 0:t.font)||(null==(u=null==(c=e.styleRuns)?void 0:c.find(function(e){return e.style.font}))?void 0:u.style.font)||n,C=[],F=[],D=e.paragraphStyleRuns;if(D&&D.length){for(var U=k.length,A=0;A<D.length;A++){var E=D[A],P=Math.min(E.length,U);U-=P,P&&(1===U&&E===D[D.length-1]&&(P++,U--),F.push(P),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:m(r(r(r({},i),e.paragraphStyle),E.style),s,I)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}U&&(F.push(U),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:m(r(r({},i),e.paragraphStyle),s,I)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var M=0,B=0;M<k.length;M++)13===k.charCodeAt(M)&&(F.push(M-B+1),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:m(r(r({},i),e.paragraphStyle),s,I)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),B=M+1);for(var O=m(r(r({},a),{font:_}),l,I),T=e.styleRuns||[{length:k.length,style:e.style||{}}],L=[],R=[],z=k.length,V=0;V<T.length;V++){var N=T[V],P=Math.min(N.length,z);z-=P,P&&(1===z&&N===T[T.length-1]&&(P++,z--),R.push(P),L.push({StyleSheet:{StyleSheetData:m(r(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),N.style),l,I)}}))}z&&T.length&&(R.push(z),L.push({StyleSheet:{StyleSheetData:m(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),l,I)}}));var G=r(r({},o),e.gridInfo),j=2*("vertical"===e.orientation),W=+("vertical"===e.orientation),H=+("box"===e.shapeType),X={ShapeType:H};0===H?X.PointBase=e.pointBase||[0,0]:X.BoxBounds=e.boxBounds||[0,0,0,0],X.Base={ShapeType:H,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var K={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"、。，．・：；？！ー―’”）〕］｝〉》」』】ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ゛゜?!)]},.:;℃℉¢％‰",NoEnd:"‘“（〔［｛〈《「『【([{￥＄£＠§〒＃",Keep:"―‥",Hanging:"、。.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"、。，．・：；？！’”）〕］｝〉》」』】ヽヾゝゞ々",NoEnd:"‘“（〔［｛〈《「『【",Keep:"―‥",Hanging:"、。.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:m(r(r({},i),e.paragraphStyle),s,I)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:O}],FontSet:I.map(function(e){return{Name:e.name,Script:e.script||0,FontType:e.type||0,Synthetic:e.synthetic||0}}),SuperscriptSize:null!=(p=e.superscriptSize)?p:.583,SuperscriptPosition:null!=(h=e.superscriptPosition)?h:.333,SubscriptSize:null!=(g=e.subscriptSize)?g:.583,SubscriptPosition:null!=(v=e.subscriptPosition)?v:.333,SmallCapSize:null!=(y=e.smallCapSize)?y:.7};return{EngineDict:{Editor:{Text:k},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:C,RunLengthArray:F,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:L,RunLengthArray:R,IsJoinable:2},GridInfo:{GridIsOn:!!G.isOn,ShowGrid:!!G.show,GridSize:null!=(w=G.size)?w:18,GridLeading:null!=(b=G.leading)?b:22,GridColor:f(G.color),GridLeadingFillColor:f(G.color),AlignLineHeightToGridFlags:!!G.alignLineHeightToGridFlags},AntiAlias:d.indexOf(null!=(x=e.antiAlias)?x:"sharp"),UseFractionalGlyphWidths:null==(S=e.useFractionalGlyphWidths)||S,Rendered:{Version:1,Shapes:{WritingDirection:j,Children:[{ShapeType:H,Procession:W,Lines:{WritingDirection:j,Children:[]},Cookie:{Photoshop:X}}]}}},ResourceDict:r({},K),DocumentResources:r({},K)}}}),r("duoIX",function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decodeEngineData2=void 0;var r={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},n={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:r},54:{name:"StrokeColor",children:r},55:{children:{99:{uproot:!0}}},79:{children:r}},i={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:n}},a={name:"StyleSheetData",children:n},o={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:a}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:i},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:i},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:a}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:n},3:{name:"ParagraphSheet",children:i}}}};e.exports.decodeEngineData2=function(e){return function e(t,r){if(null===t)return t;if(Array.isArray(t))return t.map(function(t){return e(t,r)});if("object"!=typeof t)return t;for(var n,i,a={},o=0,s=Object.keys(t);o<s.length;o++){var l=s[o];if(r[l])if(r[l].uproot){"99"!==l&&(a=e(t[l],null!=(n=r[l].children)?n:{})),t["99"]&&(a._type=t["99"]);break}else a[r[l].name||l]=e(t[l],null!=(i=r[l].children)?i:{});else"99"===l?a._type=t[l]:a[l]=e(t[l],{})}return a}(e,o)}}),r("TW1B9",function(e,r){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.readAbr=void 0;var n=t("klnll"),i=t("5OPaf"),a=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],o={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function s(e){return{control:a[e.bVTy],steps:e.fStp,jitter:(0,n.parsePercent)(e.jitter),minimum:(0,n.parsePercent)(e["Mnm "])}}function l(e){var t={size:(0,n.parseUnitsToNumber)(e.Dmtr,"Pixels"),angle:(0,n.parseAngle)(e.Angl),roundness:(0,n.parsePercent)(e.Rndn),spacingOn:e.Intr,spacing:(0,n.parsePercent)(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(t.name=e["Nm  "]),e.Hrdn&&(t.hardness=(0,n.parsePercent)(e.Hrdn)),e.sampledData&&(t.sampledData=e.sampledData),t}e.exports.readAbr=function(e,t){void 0===t&&(t={});var r,a,d,c,u=(0,i.createReader)(e.buffer,e.byteOffset,e.byteLength),f=(0,i.readInt16)(u),p=[],h=[],g=[];if(1===f||2===f)throw Error("Unsupported ABR version (".concat(f,")"));if(6===f||7===f||9===f||10===f){var m=(0,i.readInt16)(u);if(1!==m&&2!==m)throw Error("Unsupported ABR minor version");for(;u.offset<u.view.byteLength;){(0,i.checkSignature)(u,"8BIM");var v=(0,i.readSignature)(u),y=(0,i.readUint32)(u),w=u.offset+y;switch(v){case"samp":for(;u.offset<w;){for(var b=(0,i.readUint32)(u);3&b;)b++;var x=u.offset+b,S=(0,i.readPascalString)(u,1);(0,i.skipBytes)(u,1===m?10:264);var k=(0,i.readInt32)(u),I=(0,i.readInt32)(u),_=(0,i.readInt32)(u)-k,C=(0,i.readInt32)(u)-I;if(C<=0||_<=0)throw Error("Invalid bounds");var F=(0,i.readInt16)(u),D=(0,i.readUint8)(u),U=new Uint8Array(C*_);if(8===F)if(0===D)U.set((0,i.readBytes)(u,U.byteLength));else if(1===D)(0,i.readDataRLE)(u,{width:C,height:_,data:U},C,_,F,1,[0],!1);else throw Error("Invalid compression");else if(16===F)if(0===D)for(var A=0;A<U.byteLength;A++)U[A]=(0,i.readUint16)(u)>>8;else if(1===D)throw Error("not implemented (16bit RLE)");else throw Error("Invalid compression");else throw Error("Invalid depth");p.push({id:S,bounds:{x:I,y:k,w:C,h:_},alpha:U}),u.offset=x}break;case"desc":for(var E=(0,n.readVersionAndDescriptor)(u,!0),P=0,M=E.Brsh;P<M.length;P++){var B=M[P],O={name:B["Nm  "],shape:l(B.Brsh),spacing:(0,n.parsePercent)(B.Spcn),wetEdges:B.Wtdg,noise:B.Nose,useBrushSize:B.useBrushSize};null!=B.interpretation&&(O.interpretation=B.interpretation),null!=B.protectTexture&&(O.protectTexture=B.protectTexture),B.useTipDynamics&&(O.shapeDynamics={tiltScale:(0,n.parsePercent)(B.tiltScale),sizeDynamics:s(B.szVr),angleDynamics:s(B.angleDynamics),roundnessDynamics:s(B.roundnessDynamics),flipX:B.flipX,flipY:B.flipY,brushProjection:B.brushProjection,minimumDiameter:(0,n.parsePercent)(B.minimumDiameter),minimumRoundness:(0,n.parsePercent)(B.minimumRoundness)}),B.useScatter&&(O.scatter={count:B["Cnt "],bothAxes:B.bothAxes,countDynamics:s(B.countDynamics),scatterDynamics:s(B.scatterDynamics)}),B.useTexture&&B.Txtr&&(O.texture={id:B.Txtr.Idnt,name:B.Txtr["Nm  "],blendMode:n.BlnM.decode(B.textureBlendMode),depth:(0,n.parsePercent)(B.textureDepth),depthMinimum:(0,n.parsePercent)(B.minimumDepth),depthDynamics:s(B.textureDepthDynamics),scale:(0,n.parsePercent)(B.textureScale),invert:B.InvT,brightness:B.textureBrightness,contrast:B.textureContrast});var T=B.dualBrush;T&&T.useDualBrush&&(O.dualBrush={flip:T.Flip,shape:l(T.Brsh),blendMode:n.BlnM.decode(T.BlnM),useScatter:T.useScatter,spacing:(0,n.parsePercent)(T.Spcn),count:T["Cnt "],bothAxes:T.bothAxes,countDynamics:s(T.countDynamics),scatterDynamics:s(T.scatterDynamics)}),B.useColorDynamics&&(O.colorDynamics={foregroundBackground:s(B.clVr),hue:(0,n.parsePercent)(B["H   "]),saturation:(0,n.parsePercent)(B.Strt),brightness:(0,n.parsePercent)(B.Brgh),purity:(0,n.parsePercent)(B.purity),perTip:B.colorDynamicsPerTip}),B.usePaintDynamics&&(O.transfer={flowDynamics:s(B.prVr),opacityDynamics:s(B.opVr),wetnessDynamics:s(B.wtVr),mixDynamics:s(B.mxVr)}),B.useBrushPose&&(O.brushPose={overrideAngle:B.overridePoseAngle,overrideTiltX:B.overridePoseTiltX,overrideTiltY:B.overridePoseTiltY,overridePressure:B.overridePosePressure,pressure:(0,n.parsePercent)(B.brushPosePressure),tiltX:B.brushPoseTiltX,tiltY:B.brushPoseTiltY,angle:B.brushPoseAngle});var L=B.toolOptions;L&&(O.toolOptions={type:o[L._classID]||"brush",brushPreset:L.brushPreset,flow:null!=(r=L.flow)?r:100,smooth:null!=(a=L.Smoo)?a:0,mode:n.BlnM.decode(L["Md  "]||"BlnM.Nrml"),opacity:null!=(d=L.Opct)?d:100,smoothing:!!L.smoothing,smoothingValue:L.smoothingValue||0,smoothingRadiusMode:!!L.smoothingRadiusMode,smoothingCatchup:!!L.smoothingCatchup,smoothingCatchupAtEnd:!!L.smoothingCatchupAtEnd,smoothingZoomCompensation:!!L.smoothingZoomCompensation,pressureSmoothing:!!L.pressureSmoothing,usePressureOverridesSize:!!L.usePressureOverridesSize,usePressureOverridesOpacity:!!L.usePressureOverridesOpacity,useLegacy:!!L.useLegacy},L.prVr&&(O.toolOptions.flowDynamics=s(L.prVr)),L.opVr&&(O.toolOptions.opacityDynamics=s(L.opVr)),L.szVr&&(O.toolOptions.sizeDynamics=s(L.szVr)),"wetness"in L&&(O.toolOptions.wetness=L.wetness),"dryness"in L&&(O.toolOptions.dryness=L.dryness),"mix"in L&&(O.toolOptions.mix=L.mix),"autoFill"in L&&(O.toolOptions.autoFill=L.autoFill),"autoClean"in L&&(O.toolOptions.autoClean=L.autoClean),"loadSolidColorOnly"in L&&(O.toolOptions.loadSolidColorOnly=L.loadSolidColorOnly),"sampleAllLayers"in L&&(O.toolOptions.sampleAllLayers=L.sampleAllLayers),"SmdF"in L&&(O.toolOptions.smudgeFingerPainting=L.SmdF),"SmdS"in L&&(O.toolOptions.smudgeSampleAllLayers=L.SmdS),"Prs "in L&&(O.toolOptions.strength=L["Prs "]),"SmdF"in L&&(O.toolOptions.smudgeFingerPainting=L.SmdF),"SmdS"in L&&(O.toolOptions.smudgeSampleAllLayers=L.SmdS)),h.push(O)}break;case"patt":u.offset<w&&(g.push((0,i.readPattern)(u)),u.offset=w);break;case"phry":var E=(0,n.readVersionAndDescriptor)(u);t.logMissingFeatures&&(null==(c=E.hierarchy)?void 0:c.length)&&console.log("unhandled phry section",E);break;default:throw Error("Invalid brush type: ".concat(v))}for(;y%4;)u.offset++,y++}}else throw Error("Unsupported ABR version (".concat(f,")"));return{samples:p,patterns:g,brushes:h}}}),r("3vNLh",function(e,r){"use strict";var n=e.exports&&e.exports.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.readCsh=void 0;var i=t("cAUqy"),a=t("5OPaf");e.exports.readCsh=function(e){var t=(0,a.createReader)(e.buffer,e.byteOffset,e.byteLength),r={shapes:[]};if((0,a.checkSignature)(t,"cush"),2!==(0,a.readUint32)(t))throw Error("Invalid version");for(var o=(0,a.readUint32)(t),s=0;s<o;s++){for(var l=(0,a.readUnicodeString)(t);t.offset%4;)t.offset++;if(1!==(0,a.readUint32)(t))throw Error("Invalid shape version");var d=(0,a.readUint32)(t),c=t.offset+d,u=(0,a.readPascalString)(t,1),f=(0,a.readUint32)(t),p=(0,a.readUint32)(t),h=(0,a.readUint32)(t),g=(0,a.readUint32)(t)-p,m=h-f,v={paths:[]};(0,i.readVectorMask)(t,v,g,m,c-t.offset),r.shapes.push(n({name:l,id:u,width:g,height:m},v)),t.offset=c}return r}}),r("cKsyM",function(e,t){"use strict";var r,n,i;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LayerCompCapturedInfo=e.exports.SectionDividerType=e.exports.ColorMode=void 0,(r=e.exports.ColorMode||(e.exports.ColorMode={}))[r.Bitmap=0]="Bitmap",r[r.Grayscale=1]="Grayscale",r[r.Indexed=2]="Indexed",r[r.RGB=3]="RGB",r[r.CMYK=4]="CMYK",r[r.Multichannel=7]="Multichannel",r[r.Duotone=8]="Duotone",r[r.Lab=9]="Lab",(n=e.exports.SectionDividerType||(e.exports.SectionDividerType={}))[n.Other=0]="Other",n[n.OpenFolder=1]="OpenFolder",n[n.ClosedFolder=2]="ClosedFolder",n[n.BoundingSectionDivider=3]="BoundingSectionDivider",(i=e.exports.LayerCompCapturedInfo||(e.exports.LayerCompCapturedInfo={}))[i.None=0]="None",i[i.Visibility=1]="Visibility",i[i.Position=2]="Position",i[i.Appearance=4]="Appearance"})}();
//# sourceMappingURL=dist.56e07eff.js.map
